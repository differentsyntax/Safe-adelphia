{"ast":null,"code":"import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport EventEmitter from 'eventemitter3';\nimport Point from '@mapbox/point-geometry';\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nvar style = {\n  width: '100%',\n  height: '100%',\n  left: 0,\n  top: 0,\n  margin: 0,\n  padding: 0,\n  position: 'absolute'\n};\n\nvar GoogleMapMap = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(GoogleMapMap, _Component);\n\n  function GoogleMapMap() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  var _proto = GoogleMapMap.prototype;\n\n  _proto.shouldComponentUpdate = function shouldComponentUpdate() {\n    return false;\n  };\n\n  _proto.render = function render() {\n    var registerChild = this.props.registerChild;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: registerChild,\n      style: style\n    });\n  };\n\n  return GoogleMapMap;\n}(Component);\n\nvar MarkerDispatcher = /*#__PURE__*/function (_EventEmitter) {\n  _inheritsLoose(MarkerDispatcher, _EventEmitter);\n\n  function MarkerDispatcher(gmapInstance) {\n    var _this;\n\n    _this = _EventEmitter.call(this) || this;\n    _this.gmapInstance = gmapInstance;\n    return _this;\n  }\n\n  var _proto = MarkerDispatcher.prototype;\n\n  _proto.getChildren = function getChildren() {\n    return this.gmapInstance.props.children;\n  };\n\n  _proto.getMousePosition = function getMousePosition() {\n    return this.gmapInstance.mouse_;\n  };\n\n  _proto.getUpdateCounter = function getUpdateCounter() {\n    return this.gmapInstance.updateCounter_;\n  };\n\n  _proto.dispose = function dispose() {\n    this.gmapInstance = null;\n    this.removeAllListeners();\n  };\n\n  return MarkerDispatcher;\n}(EventEmitter);\n\nvar omit = function omit(obj, keys) {\n  var rest = _extends({}, obj);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n\n    if (key in rest) {\n      delete rest[key];\n    }\n  }\n\n  return rest;\n};\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction is(x, y) {\n  if (x === y) {\n    return x !== 0 || y !== 0 || 1 / x === 1 / y;\n  }\n\n  return x !== x && y !== y;\n}\n\nfunction shallowEqual(objA, objB) {\n  if (is(objA, objB)) {\n    return true;\n  }\n\n  if (typeof objA !== 'object' || objA === null || typeof objB !== 'object' || objB === null) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  for (var i = 0; i < keysA.length; i++) {\n    if (!hasOwnProperty.call(objB, keysA[i]) || !is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nvar mainStyle = {\n  width: '100%',\n  height: '100%',\n  left: 0,\n  top: 0,\n  margin: 0,\n  padding: 0,\n  position: 'absolute'\n};\nvar style$1 = {\n  width: 0,\n  height: 0,\n  left: 0,\n  top: 0,\n  backgroundColor: 'transparent',\n  position: 'absolute'\n};\n\nvar GoogleMapMarkers = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(GoogleMapMarkers, _Component);\n\n  function GoogleMapMarkers(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _this._getState = function () {\n      return {\n        children: _this.props.dispatcher.getChildren(),\n        updateCounter: _this.props.dispatcher.getUpdateCounter()\n      };\n    };\n\n    _this._onChangeHandler = function () {\n      if (!_this.dimensionsCache_) {\n        return;\n      }\n\n      var prevChildCount = (_this.state.children || []).length;\n\n      var state = _this._getState();\n\n      _this.setState(state, function () {\n        return (state.children || []).length !== prevChildCount && _this._onMouseChangeHandler();\n      });\n    };\n\n    _this._onChildClick = function () {\n      if (_this.props.onChildClick) {\n        if (_this.hoverChildProps_) {\n          var hoverKey = _this.hoverKey_;\n          var childProps = _this.hoverChildProps_;\n\n          _this.props.onChildClick(hoverKey, childProps);\n        }\n      }\n    };\n\n    _this._onChildMouseDown = function () {\n      if (_this.props.onChildMouseDown) {\n        if (_this.hoverChildProps_) {\n          var hoverKey = _this.hoverKey_;\n          var childProps = _this.hoverChildProps_;\n\n          _this.props.onChildMouseDown(hoverKey, childProps);\n        }\n      }\n    };\n\n    _this._onChildMouseEnter = function (hoverKey, childProps) {\n      if (!_this.dimensionsCache_) {\n        return;\n      }\n\n      if (_this.props.onChildMouseEnter) {\n        _this.props.onChildMouseEnter(hoverKey, childProps);\n      }\n\n      _this.hoverChildProps_ = childProps;\n      _this.hoverKey_ = hoverKey;\n\n      _this.setState({\n        hoverKey: hoverKey\n      });\n    };\n\n    _this._onChildMouseLeave = function () {\n      if (!_this.dimensionsCache_) {\n        return;\n      }\n\n      var hoverKey = _this.hoverKey_;\n      var childProps = _this.hoverChildProps_;\n\n      if (hoverKey !== undefined && hoverKey !== null) {\n        if (_this.props.onChildMouseLeave) {\n          _this.props.onChildMouseLeave(hoverKey, childProps);\n        }\n\n        _this.hoverKey_ = null;\n        _this.hoverChildProps_ = null;\n\n        _this.setState({\n          hoverKey: null\n        });\n      }\n    };\n\n    _this._onMouseAllow = function (value) {\n      if (!value) {\n        _this._onChildMouseLeave();\n      }\n\n      _this.allowMouse_ = value;\n    };\n\n    _this._onMouseChangeHandler = function () {\n      if (_this.allowMouse_) {\n        _this._onMouseChangeHandlerRaf();\n      }\n    };\n\n    _this._onMouseChangeHandlerRaf = function () {\n      if (!_this.dimensionsCache_) {\n        return;\n      }\n\n      var mp = _this.props.dispatcher.getMousePosition();\n\n      if (mp) {\n        var distances = [];\n\n        var hoverDistance = _this.props.getHoverDistance();\n\n        React.Children.forEach(_this.state.children, function (child, childIndex) {\n          if (!child) return;\n\n          if (child.props.latLng === undefined && child.props.lat === undefined && child.props.lng === undefined) {\n            return;\n          }\n\n          var childKey = child.key !== undefined && child.key !== null ? child.key : childIndex;\n\n          var dist = _this.props.distanceToMouse(_this.dimensionsCache_[childKey], mp, child.props);\n\n          if (dist < hoverDistance) {\n            distances.push({\n              key: childKey,\n              dist: dist,\n              props: child.props\n            });\n          }\n        });\n\n        if (distances.length) {\n          distances.sort(function (a, b) {\n            return a.dist - b.dist;\n          });\n          var hoverKey = distances[0].key;\n          var childProps = distances[0].props;\n\n          if (_this.hoverKey_ !== hoverKey) {\n            _this._onChildMouseLeave();\n\n            _this._onChildMouseEnter(hoverKey, childProps);\n          }\n        } else {\n          _this._onChildMouseLeave();\n        }\n      } else {\n        _this._onChildMouseLeave();\n      }\n    };\n\n    _this._getDimensions = function (key) {\n      var childKey = key;\n      return _this.dimensionsCache_[childKey];\n    };\n\n    _this.dimensionsCache_ = {};\n    _this.hoverKey_ = null;\n    _this.hoverChildProps_ = null;\n    _this.allowMouse_ = true;\n    _this.state = _extends({}, _this._getState(), {\n      hoverKey: null\n    });\n    return _this;\n  }\n\n  var _proto = GoogleMapMarkers.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.props.dispatcher.on('kON_CHANGE', this._onChangeHandler);\n    this.props.dispatcher.on('kON_MOUSE_POSITION_CHANGE', this._onMouseChangeHandler);\n    this.props.dispatcher.on('kON_CLICK', this._onChildClick);\n    this.props.dispatcher.on('kON_MDOWN', this._onChildMouseDown);\n  };\n\n  _proto.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n    if (this.props.experimental === true) {\n      return !shallowEqual(this.props, nextProps) || !shallowEqual(omit(this.state, ['hoverKey']), omit(nextState, ['hoverKey']));\n    }\n\n    return !shallowEqual(this.props, nextProps) || !shallowEqual(this.state, nextState);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.props.dispatcher.removeListener('kON_CHANGE', this._onChangeHandler);\n    this.props.dispatcher.removeListener('kON_MOUSE_POSITION_CHANGE', this._onMouseChangeHandler);\n    this.props.dispatcher.removeListener('kON_CLICK', this._onChildClick);\n    this.props.dispatcher.removeListener('kON_MDOWN', this._onChildMouseDown);\n    this.dimensionsCache_ = null;\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var mainElementStyle = this.props.style || mainStyle;\n    this.dimensionsCache_ = {};\n    var markers = React.Children.map(this.state.children, function (child, childIndex) {\n      if (!child) return undefined;\n\n      if (child.props.latLng === undefined && child.props.lat === undefined && child.props.lng === undefined) {\n        return React.cloneElement(child, {\n          $geoService: _this2.props.geoService,\n          $onMouseAllow: _this2._onMouseAllow,\n          $prerender: _this2.props.prerender\n        });\n      }\n\n      var latLng = child.props.latLng !== undefined ? child.props.latLng : {\n        lat: child.props.lat,\n        lng: child.props.lng\n      };\n      var pt = _this2.props.insideMapPanes ? _this2.props.geoService.fromLatLngToDivPixel(latLng) : _this2.props.geoService.fromLatLngToCenterPixel(latLng);\n      var stylePtPos = {\n        left: pt.x,\n        top: pt.y\n      };\n\n      if (child.props.seLatLng !== undefined || child.props.seLat !== undefined && child.props.seLng !== undefined) {\n        var seLatLng = child.props.seLatLng !== undefined ? child.props.seLatLng : {\n          lat: child.props.seLat,\n          lng: child.props.seLng\n        };\n        var sePt = _this2.props.insideMapPanes ? _this2.props.geoService.fromLatLngToDivPixel(seLatLng) : _this2.props.geoService.fromLatLngToCenterPixel(seLatLng);\n        stylePtPos.width = sePt.x - pt.x;\n        stylePtPos.height = sePt.y - pt.y;\n      }\n\n      var containerPt = _this2.props.geoService.fromLatLngToContainerPixel(latLng);\n\n      var childKey = child.key !== undefined && child.key !== null ? child.key : childIndex;\n      _this2.dimensionsCache_[childKey] = _extends({\n        x: containerPt.x,\n        y: containerPt.y\n      }, latLng);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: childKey,\n        style: _extends({}, style$1, stylePtPos),\n        className: child.props.$markerHolderClassName\n      }, React.cloneElement(child, {\n        $hover: childKey === _this2.state.hoverKey,\n        $getDimensions: _this2._getDimensions,\n        $dimensionKey: childKey,\n        $geoService: _this2.props.geoService,\n        $onMouseAllow: _this2._onMouseAllow,\n        $prerender: _this2.props.prerender\n      }));\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: mainElementStyle\n    }, markers);\n  };\n\n  return GoogleMapMarkers;\n}(Component);\n\nGoogleMapMarkers.propTypes = {\n  geoService: PropTypes.any,\n  style: PropTypes.any,\n  distanceToMouse: PropTypes.func,\n  dispatcher: PropTypes.any,\n  onChildClick: PropTypes.func,\n  onChildMouseDown: PropTypes.func,\n  onChildMouseLeave: PropTypes.func,\n  onChildMouseEnter: PropTypes.func,\n  getHoverDistance: PropTypes.func,\n  insideMapPanes: PropTypes.bool,\n  prerender: PropTypes.bool\n};\nGoogleMapMarkers.defaultProps = {\n  insideMapPanes: false,\n  prerender: false\n};\nvar style$2 = {\n  width: '50%',\n  height: '50%',\n  left: '50%',\n  top: '50%',\n  margin: 0,\n  padding: 0,\n  position: 'absolute'\n};\n\nfunction GoogleMapMarkersPrerender(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: style$2\n  }, /*#__PURE__*/React.createElement(GoogleMapMarkers, _extends({}, props, {\n    prerender: true\n  })));\n}\n\nvar generateHeatmap = function generateHeatmap(instance, _ref) {\n  var positions = _ref.positions;\n  return new instance.visualization.HeatmapLayer({\n    data: positions.reduce(function (acc, _ref2) {\n      var lat = _ref2.lat,\n          lng = _ref2.lng,\n          _ref2$weight = _ref2.weight,\n          weight = _ref2$weight === void 0 ? 1 : _ref2$weight;\n      acc.push({\n        location: new instance.LatLng(lat, lng),\n        weight: weight\n      });\n      return acc;\n    }, [])\n  });\n};\n\nvar optionsHeatmap = function optionsHeatmap(instance, _ref3) {\n  var _ref3$options = _ref3.options,\n      options = _ref3$options === void 0 ? {} : _ref3$options;\n  return Object.keys(options).map(function (option) {\n    return instance.set(option, options[option]);\n  });\n};\n\nvar BASE_URL = 'https://maps';\nvar DEFAULT_URL = BASE_URL + \".googleapis.com\";\nvar API_PATH = '/maps/api/js?callback=_$_google_map_initialize_$_';\nvar $script_ = null;\nvar loadPromise_;\nvar resolveCustomPromise_;\n\nvar _customPromise = new Promise(function (resolve) {\n  resolveCustomPromise_ = resolve;\n});\n\nvar googleMapLoader = function (bootstrapURLKeys, heatmapLibrary) {\n  if (!$script_) {\n    $script_ = require('scriptjs');\n  }\n\n  if (!bootstrapURLKeys) {\n    return _customPromise;\n  }\n\n  if (loadPromise_) {\n    return loadPromise_;\n  }\n\n  loadPromise_ = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined') {\n      reject(new Error('google map cannot be loaded outside browser env'));\n      return;\n    }\n\n    if (window.google && window.google.maps) {\n      resolve(window.google.maps);\n      return;\n    }\n\n    if (typeof window._$_google_map_initialize_$_ !== 'undefined') {\n      reject(new Error('google map initialization error'));\n    }\n\n    window._$_google_map_initialize_$_ = function () {\n      delete window._$_google_map_initialize_$_;\n      resolve(window.google.maps);\n    };\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (Object.keys(bootstrapURLKeys).indexOf('callback') > -1) {\n        var message = \"\\\"callback\\\" key in bootstrapURLKeys is not allowed,\\n                          use onGoogleApiLoaded property instead\";\n        console.error(message);\n        throw new Error(message);\n      }\n    }\n\n    var params = Object.keys(bootstrapURLKeys).reduce(function (r, key) {\n      return r + \"&\" + key + \"=\" + bootstrapURLKeys[key];\n    }, '');\n    var libraries = heatmapLibrary ? '&libraries=visualization' : '';\n    $script_(\"\" + DEFAULT_URL + API_PATH + params + libraries, function () {\n      return typeof window.google === 'undefined' && reject(new Error('google map initialization error (not loaded)'));\n    });\n  });\n  resolveCustomPromise_(loadPromise_);\n  return loadPromise_;\n};\n\nfunction wrap(n, min, max) {\n  var d = max - min;\n  return n === max ? n : ((n - min) % d + d) % d + min;\n}\n\nvar LatLng = /*#__PURE__*/function () {\n  function LatLng(lat, lng) {\n    if (isNaN(lat) || isNaN(lng)) {\n      throw new Error(\"Invalid LatLng object: (\" + lat + \", \" + lng + \")\");\n    }\n\n    this.lat = +lat;\n    this.lng = +lng;\n  }\n\n  var _proto = LatLng.prototype;\n\n  _proto.wrap = function wrap$1() {\n    return new LatLng(this.lat, wrap(this.lng, -180, 180));\n  };\n\n  return LatLng;\n}();\n\nLatLng.convert = function (a) {\n  if (a instanceof LatLng) {\n    return a;\n  }\n\n  if (Array.isArray(a)) {\n    return new LatLng(a[0], a[1]);\n  }\n\n  if ('lng' in a && 'lat' in a) {\n    return new LatLng(a.lat, a.lng);\n  }\n\n  return a;\n};\n\nvar Transform = /*#__PURE__*/function () {\n  function Transform(tileSize, minZoom, maxZoom) {\n    this.tileSize = tileSize || 512;\n    this._minZoom = minZoom || 0;\n    this._maxZoom = maxZoom || 52;\n    this.latRange = [-85.05113, 85.05113];\n    this.width = 0;\n    this.height = 0;\n    this.zoom = 0;\n    this.center = new LatLng(0, 0);\n    this.angle = 0;\n  }\n\n  var _proto = Transform.prototype;\n\n  _proto.zoomScale = function zoomScale(zoom) {\n    return Math.pow(2, zoom);\n  };\n\n  _proto.scaleZoom = function scaleZoom(scale) {\n    return Math.log(scale) / Math.LN2;\n  };\n\n  _proto.project = function project(latlng, worldSize) {\n    return new Point(this.lngX(latlng.lng, worldSize), this.latY(latlng.lat, worldSize));\n  };\n\n  _proto.unproject = function unproject(point, worldSize) {\n    return new LatLng(this.yLat(point.y, worldSize), this.xLng(point.x, worldSize));\n  };\n\n  _proto.lngX = function lngX(lon, worldSize) {\n    return (180 + lon) * (worldSize || this.worldSize) / 360;\n  };\n\n  _proto.latY = function latY(lat, worldSize) {\n    var y = 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + lat * Math.PI / 360));\n    return (180 - y) * (worldSize || this.worldSize) / 360;\n  };\n\n  _proto.xLng = function xLng(x, worldSize) {\n    return x * 360 / (worldSize || this.worldSize) - 180;\n  };\n\n  _proto.yLat = function yLat(y, worldSize) {\n    var y2 = 180 - y * 360 / (worldSize || this.worldSize);\n    return 360 / Math.PI * Math.atan(Math.exp(y2 * Math.PI / 180)) - 90;\n  };\n\n  _proto.locationPoint = function locationPoint(latlng) {\n    var p = this.project(latlng);\n    return this.centerPoint._sub(this.point._sub(p)._rotate(this.angle));\n  };\n\n  _proto.pointLocation = function pointLocation(p) {\n    var p2 = this.centerPoint._sub(p)._rotate(-this.angle);\n\n    return this.unproject(this.point.sub(p2));\n  };\n\n  _createClass(Transform, [{\n    key: \"minZoom\",\n    get: function get() {\n      return this._minZoom;\n    },\n    set: function set(zoom) {\n      this._minZoom = zoom;\n      this.zoom = Math.max(this.zoom, zoom);\n    }\n  }, {\n    key: \"maxZoom\",\n    get: function get() {\n      return this._maxZoom;\n    },\n    set: function set(zoom) {\n      this._maxZoom = zoom;\n      this.zoom = Math.min(this.zoom, zoom);\n    }\n  }, {\n    key: \"worldSize\",\n    get: function get() {\n      return this.tileSize * this.scale;\n    }\n  }, {\n    key: \"centerPoint\",\n    get: function get() {\n      return new Point(0, 0);\n    }\n  }, {\n    key: \"size\",\n    get: function get() {\n      return new Point(this.width, this.height);\n    }\n  }, {\n    key: \"bearing\",\n    get: function get() {\n      return -this.angle / Math.PI * 180;\n    },\n    set: function set(bearing) {\n      this.angle = -wrap(bearing, -180, 180) * Math.PI / 180;\n    }\n  }, {\n    key: \"zoom\",\n    get: function get() {\n      return this._zoom;\n    },\n    set: function set(zoom) {\n      var zoomV = Math.min(Math.max(zoom, this.minZoom), this.maxZoom);\n      this._zoom = zoomV;\n      this.scale = this.zoomScale(zoomV);\n      this.tileZoom = Math.floor(zoomV);\n      this.zoomFraction = zoomV - this.tileZoom;\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this.lngX(this.center.lng);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this.latY(this.center.lat);\n    }\n  }, {\n    key: \"point\",\n    get: function get() {\n      return new Point(this.x, this.y);\n    }\n  }]);\n\n  return Transform;\n}();\n\nvar Geo = /*#__PURE__*/function () {\n  function Geo(tileSize) {\n    this.hasSize_ = false;\n    this.hasView_ = false;\n    this.transform_ = new Transform(tileSize || 512);\n  }\n\n  var _proto = Geo.prototype;\n\n  _proto.setView = function setView(center, zoom, bearing) {\n    this.transform_.center = LatLng.convert(center);\n    this.transform_.zoom = +zoom;\n    this.transform_.bearing = +bearing;\n    this.hasView_ = true;\n  };\n\n  _proto.setViewSize = function setViewSize(width, height) {\n    this.transform_.width = width;\n    this.transform_.height = height;\n    this.hasSize_ = true;\n  };\n\n  _proto.setMapCanvasProjection = function setMapCanvasProjection(maps, mapCanvasProjection) {\n    this.maps_ = maps;\n    this.mapCanvasProjection_ = mapCanvasProjection;\n  };\n\n  _proto.canProject = function canProject() {\n    return this.hasSize_ && this.hasView_;\n  };\n\n  _proto.hasSize = function hasSize() {\n    return this.hasSize_;\n  };\n\n  _proto.fromLatLngToCenterPixel = function fromLatLngToCenterPixel(ptLatLng) {\n    return this.transform_.locationPoint(LatLng.convert(ptLatLng));\n  };\n\n  _proto.fromLatLngToDivPixel = function fromLatLngToDivPixel(ptLatLng) {\n    if (this.mapCanvasProjection_) {\n      var latLng = new this.maps_.LatLng(ptLatLng.lat, ptLatLng.lng);\n      return this.mapCanvasProjection_.fromLatLngToDivPixel(latLng);\n    }\n\n    return this.fromLatLngToCenterPixel(ptLatLng);\n  };\n\n  _proto.fromLatLngToContainerPixel = function fromLatLngToContainerPixel(ptLatLng) {\n    if (this.mapCanvasProjection_) {\n      var latLng = new this.maps_.LatLng(ptLatLng.lat, ptLatLng.lng);\n      return this.mapCanvasProjection_.fromLatLngToContainerPixel(latLng);\n    }\n\n    var pt = this.fromLatLngToCenterPixel(ptLatLng);\n    pt.x -= this.transform_.worldSize * Math.round(pt.x / this.transform_.worldSize);\n    pt.x += this.transform_.width / 2;\n    pt.y += this.transform_.height / 2;\n    return pt;\n  };\n\n  _proto.fromContainerPixelToLatLng = function fromContainerPixelToLatLng(ptXY) {\n    if (this.mapCanvasProjection_) {\n      var latLng = this.mapCanvasProjection_.fromContainerPixelToLatLng(ptXY);\n      return {\n        lat: latLng.lat(),\n        lng: latLng.lng()\n      };\n    }\n\n    var ptxy = _extends({}, ptXY);\n\n    ptxy.x -= this.transform_.width / 2;\n    ptxy.y -= this.transform_.height / 2;\n    var ptRes = this.transform_.pointLocation(Point.convert(ptxy));\n    ptRes.lng -= 360 * Math.round(ptRes.lng / 360);\n    return ptRes;\n  };\n\n  _proto.getWidth = function getWidth() {\n    return this.transform_.width;\n  };\n\n  _proto.getHeight = function getHeight() {\n    return this.transform_.height;\n  };\n\n  _proto.getZoom = function getZoom() {\n    return this.transform_.zoom;\n  };\n\n  _proto.getCenter = function getCenter() {\n    var ptRes = this.transform_.pointLocation({\n      x: 0,\n      y: 0\n    });\n    return ptRes;\n  };\n\n  _proto.getBounds = function getBounds(margins, roundFactor) {\n    var bndT = margins && margins[0] || 0;\n    var bndR = margins && margins[1] || 0;\n    var bndB = margins && margins[2] || 0;\n    var bndL = margins && margins[3] || 0;\n\n    if (this.getWidth() - bndR - bndL > 0 && this.getHeight() - bndT - bndB > 0) {\n      var topLeftCorner = this.transform_.pointLocation(Point.convert({\n        x: bndL - this.getWidth() / 2,\n        y: bndT - this.getHeight() / 2\n      }));\n      var bottomRightCorner = this.transform_.pointLocation(Point.convert({\n        x: this.getWidth() / 2 - bndR,\n        y: this.getHeight() / 2 - bndB\n      }));\n      var res = [topLeftCorner.lat, topLeftCorner.lng, bottomRightCorner.lat, bottomRightCorner.lng, bottomRightCorner.lat, topLeftCorner.lng, topLeftCorner.lat, bottomRightCorner.lng];\n\n      if (roundFactor) {\n        res = res.map(function (r) {\n          return Math.round(r * roundFactor) / roundFactor;\n        });\n      }\n\n      return res;\n    }\n\n    return [0, 0, 0, 0];\n  };\n\n  return Geo;\n}();\n\nfunction raf(callback) {\n  if (window.requestAnimationFrame) {\n    return window.requestAnimationFrame(callback);\n  }\n\n  var nativeRaf = window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame;\n  return nativeRaf ? nativeRaf(callback) : window.setTimeout(callback, 1e3 / 60);\n}\n\nvar log2 = Math.log2 ? Math.log2 : function (x) {\n  return Math.log(x) / Math.LN2;\n};\n\nfunction pick(obj, fn) {\n  return Object.keys(obj).reduce(function (result, key) {\n    if (fn(obj[key])) {\n      result[key] = obj[key];\n    }\n\n    return result;\n  }, {});\n}\n\nvar isEmpty = function isEmpty(val) {\n  if (val !== null && typeof val === 'object') {\n    if (Object.keys(val).length === 0) {\n      return true;\n    }\n  } else if (val === null || val === undefined || val === '') {\n    return true;\n  }\n\n  return false;\n};\n\nfunction isObjectLike(value) {\n  return !!value && typeof value === 'object';\n}\n\nvar objectToString = Object.prototype.toString;\n\nfunction isNumber(value) {\n  var numberTag = '[object Number]';\n  return typeof value === 'number' || isObjectLike(value) && objectToString.call(value) === numberTag;\n}\n\nvar detectBrowserResult_ = null;\n\nfunction detectBrowser() {\n  if (detectBrowserResult_) {\n    return detectBrowserResult_;\n  }\n\n  if (typeof navigator !== 'undefined') {\n    var isExplorer = navigator.userAgent.indexOf('MSIE') > -1;\n    var isFirefox = navigator.userAgent.indexOf('Firefox') > -1;\n    var isOpera = navigator.userAgent.toLowerCase().indexOf('op') > -1;\n    var isChrome = navigator.userAgent.indexOf('Chrome') > -1;\n    var isSafari = navigator.userAgent.indexOf('Safari') > -1;\n\n    if (isChrome && isSafari) {\n      isSafari = false;\n    }\n\n    if (isChrome && isOpera) {\n      isChrome = false;\n    }\n\n    detectBrowserResult_ = {\n      isExplorer: isExplorer,\n      isFirefox: isFirefox,\n      isOpera: isOpera,\n      isChrome: isChrome,\n      isSafari: isSafari\n    };\n    return detectBrowserResult_;\n  }\n\n  detectBrowserResult_ = {\n    isChrome: true,\n    isExplorer: false,\n    isFirefox: false,\n    isOpera: false,\n    isSafari: false\n  };\n  return detectBrowserResult_;\n}\n\nvar fnToString = function fnToString(fn) {\n  return Function.prototype.toString.call(fn);\n};\n\nfunction isPlainObject(obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  var proto = typeof obj.constructor === 'function' ? Object.getPrototypeOf(obj) : Object.prototype;\n\n  if (proto === null) {\n    return true;\n  }\n\n  var constructor = proto.constructor;\n  return typeof constructor === 'function' && constructor instanceof constructor && fnToString(constructor) === fnToString(Object);\n}\n\nfunction isArraysEqualEps(arrayA, arrayB, eps) {\n  if (arrayA && arrayB) {\n    for (var i = 0; i !== arrayA.length; ++i) {\n      if (Math.abs(arrayA[i] - arrayB[i]) > eps) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nfunction hasPassiveSupport() {\n  var passiveSupported = false;\n\n  try {\n    var options = Object.defineProperty({}, 'passive', {\n      get: function get() {\n        passiveSupported = true;\n      }\n    });\n    window.addEventListener('test', options, options);\n    window.removeEventListener('test', options, options);\n  } catch (err) {\n    passiveSupported = false;\n  }\n\n  return passiveSupported;\n}\n\nfunction addPassiveEventListener(element, eventName, func, capture) {\n  element.addEventListener(eventName, func, hasPassiveSupport() ? {\n    capture: capture,\n    passive: true\n  } : capture);\n}\n\nvar canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n\nvar _window;\n\nif (canUseDOM) {\n  _window = window;\n} else if (typeof self !== 'undefined') {\n  _window = self;\n} else {\n  _window = undefined;\n}\n\nvar attachEvent = typeof document !== 'undefined' && document.attachEvent;\nvar stylesCreated = false;\n\nif (canUseDOM && !attachEvent) {\n  var requestFrame = function () {\n    var raf = _window.requestAnimationFrame || _window.mozRequestAnimationFrame || _window.webkitRequestAnimationFrame || function (fn) {\n      return _window.setTimeout(fn, 20);\n    };\n\n    return function (fn) {\n      return raf(fn);\n    };\n  }();\n\n  var cancelFrame = function () {\n    var cancel = _window.cancelAnimationFrame || _window.mozCancelAnimationFrame || _window.webkitCancelAnimationFrame || _window.clearTimeout;\n    return function (id) {\n      return cancel(id);\n    };\n  }();\n\n  var resetTriggers = function resetTriggers(element) {\n    var triggers = element.__resizeTriggers__,\n        expand = triggers.firstElementChild,\n        contract = triggers.lastElementChild,\n        expandChild = expand.firstElementChild;\n    contract.scrollLeft = contract.scrollWidth;\n    contract.scrollTop = contract.scrollHeight;\n    expandChild.style.width = expand.offsetWidth + 1 + 'px';\n    expandChild.style.height = expand.offsetHeight + 1 + 'px';\n    expand.scrollLeft = expand.scrollWidth;\n    expand.scrollTop = expand.scrollHeight;\n  };\n\n  var checkTriggers = function checkTriggers(element) {\n    return element.offsetWidth != element.__resizeLast__.width || element.offsetHeight != element.__resizeLast__.height;\n  };\n\n  var scrollListener = function scrollListener(e) {\n    var element = this;\n    resetTriggers(this);\n    if (this.__resizeRAF__) cancelFrame(this.__resizeRAF__);\n    this.__resizeRAF__ = requestFrame(function () {\n      if (checkTriggers(element)) {\n        element.__resizeLast__.width = element.offsetWidth;\n        element.__resizeLast__.height = element.offsetHeight;\n\n        element.__resizeListeners__.forEach(function (fn) {\n          fn.call(element, e);\n        });\n      }\n    });\n  };\n\n  var animation = false,\n      keyframeprefix = '',\n      animationstartevent = 'animationstart',\n      domPrefixes = 'Webkit Moz O ms'.split(' '),\n      startEvents = 'webkitAnimationStart animationstart oAnimationStart MSAnimationStart'.split(' '),\n      pfx = '';\n\n  if (canUseDOM) {\n    var elm = document.createElement('fakeelement');\n\n    if (elm.style.animationName !== undefined) {\n      animation = true;\n    }\n\n    if (animation === false) {\n      for (var i = 0; i < domPrefixes.length; i++) {\n        if (elm.style[domPrefixes[i] + 'AnimationName'] !== undefined) {\n          pfx = domPrefixes[i];\n          keyframeprefix = '-' + pfx.toLowerCase() + '-';\n          animationstartevent = startEvents[i];\n          animation = true;\n          break;\n        }\n      }\n    }\n  }\n\n  var animationName = 'resizeanim';\n  var animationKeyframes = '@' + keyframeprefix + 'keyframes ' + animationName + ' { from { opacity: 0; } to { opacity: 0; } } ';\n  var animationStyle = keyframeprefix + 'animation: 1ms ' + animationName + '; ';\n}\n\nvar createStyles = function createStyles() {\n  if (!stylesCreated) {\n    var css = (animationKeyframes ? animationKeyframes : '') + '.resize-triggers { ' + (animationStyle ? animationStyle : '') + 'visibility: hidden; opacity: 0; } ' + '.resize-triggers, .resize-triggers > div, .contract-trigger:before { content: \" \"; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',\n        head = document.head || document.getElementsByTagName('head')[0],\n        style = document.createElement('style');\n    style.type = 'text/css';\n\n    if (style.styleSheet) {\n      style.styleSheet.cssText = css;\n    } else {\n      style.appendChild(document.createTextNode(css));\n    }\n\n    head.appendChild(style);\n    stylesCreated = true;\n  }\n};\n\nvar addResizeListener = function addResizeListener(element, fn) {\n  if (element.parentNode === undefined) {\n    var tempParentDiv = document.createElement('div');\n    element.parentNode = tempParentDiv;\n  }\n\n  element = element.parentNode;\n  if (attachEvent) element.attachEvent('onresize', fn);else {\n    if (!element.__resizeTriggers__) {\n      if (getComputedStyle(element).position == 'static') element.style.position = 'relative';\n      createStyles();\n      element.__resizeLast__ = {};\n      element.__resizeListeners__ = [];\n      (element.__resizeTriggers__ = document.createElement('div')).className = 'resize-triggers';\n      element.__resizeTriggers__.innerHTML = '<div class=\"expand-trigger\"><div></div></div>' + '<div class=\"contract-trigger\"></div>';\n      element.appendChild(element.__resizeTriggers__);\n      resetTriggers(element);\n      addPassiveEventListener(element, 'scroll', scrollListener, true);\n      animationstartevent && element.__resizeTriggers__.addEventListener(animationstartevent, function (e) {\n        if (e.animationName == animationName) resetTriggers(element);\n      });\n    }\n\n    element.__resizeListeners__.push(fn);\n  }\n};\n\nvar removeResizeListener = function removeResizeListener(element, fn) {\n  element = element.parentNode;\n  if (attachEvent) element.detachEvent('onresize', fn);else {\n    element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn), 1);\n\n    if (!element.__resizeListeners__.length) {\n      element.removeEventListener('scroll', scrollListener);\n      element.__resizeTriggers__ = !element.removeChild(element.__resizeTriggers__);\n    }\n  }\n};\n\nvar kEPS = 0.00001;\nvar K_GOOGLE_TILE_SIZE = 256;\nvar K_IDLE_TIMEOUT = 100;\nvar K_IDLE_CLICK_TIMEOUT = 300;\nvar DEFAULT_MIN_ZOOM = 3;\nvar DRAW_CALLED_DURING_ANIMATION_VERSION = 32;\nvar IS_REACT_16 = ReactDOM.createPortal !== undefined;\nvar createPortal = IS_REACT_16 ? ReactDOM.createPortal : ReactDOM.unstable_renderSubtreeIntoContainer;\n\nfunction defaultOptions_() {\n  return {\n    overviewMapControl: false,\n    streetViewControl: false,\n    rotateControl: true,\n    mapTypeControl: false,\n    styles: [{\n      featureType: 'poi',\n      elementType: 'labels',\n      stylers: [{\n        visibility: 'off'\n      }]\n    }],\n    minZoom: DEFAULT_MIN_ZOOM\n  };\n}\n\nvar latLng2Obj = function latLng2Obj(latLng) {\n  return isPlainObject(latLng) ? latLng : {\n    lat: latLng[0],\n    lng: latLng[1]\n  };\n};\n\nvar _checkMinZoom = function _checkMinZoom(zoom, minZoom) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (zoom < minZoom) {\n      console.warn('GoogleMap: ' + 'minZoom option is less than recommended ' + 'minZoom option for your map sizes.\\n' + 'overrided to value ' + minZoom);\n    }\n  }\n\n  if (minZoom < zoom) {\n    return zoom;\n  }\n\n  return minZoom;\n};\n\nvar isFullScreen = function isFullScreen() {\n  return document.fullscreen || document.webkitIsFullScreen || document.mozFullScreen || document.msFullscreenElement;\n};\n\nvar GoogleMap = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(GoogleMap, _Component);\n\n  function GoogleMap(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _this._getMinZoom = function () {\n      if (_this.geoService_.getWidth() > 0 || _this.geoService_.getHeight() > 0) {\n        var tilesPerWidth = Math.ceil(_this.geoService_.getWidth() / K_GOOGLE_TILE_SIZE) + 2;\n        var tilesPerHeight = Math.ceil(_this.geoService_.getHeight() / K_GOOGLE_TILE_SIZE) + 2;\n        var maxTilesPerDim = Math.max(tilesPerWidth, tilesPerHeight);\n        return Math.ceil(log2(maxTilesPerDim));\n      }\n\n      return DEFAULT_MIN_ZOOM;\n    };\n\n    _this._computeMinZoom = function (minZoom) {\n      if (!isEmpty(minZoom)) {\n        return minZoom;\n      }\n\n      return _this._getMinZoom();\n    };\n\n    _this._mapDomResizeCallback = function () {\n      _this.resetSizeOnIdle_ = true;\n\n      if (_this.maps_) {\n        var originalCenter = _this.props.center || _this.props.defaultCenter;\n\n        var currentCenter = _this.map_.getCenter();\n\n        _this.maps_.event.trigger(_this.map_, 'resize');\n\n        _this.map_.setCenter(_this.props.resetBoundsOnResize ? originalCenter : currentCenter);\n      }\n    };\n\n    _this._setLayers = function (layerTypes) {\n      layerTypes.forEach(function (layerType) {\n        _this.layers_[layerType] = new _this.maps_[layerType]();\n\n        _this.layers_[layerType].setMap(_this.map_);\n      });\n    };\n\n    _this._renderPortal = function () {\n      return /*#__PURE__*/React.createElement(GoogleMapMarkers, {\n        experimental: _this.props.experimental,\n        onChildClick: _this._onChildClick,\n        onChildMouseDown: _this._onChildMouseDown,\n        onChildMouseEnter: _this._onChildMouseEnter,\n        onChildMouseLeave: _this._onChildMouseLeave,\n        geoService: _this.geoService_,\n        insideMapPanes: true,\n        distanceToMouse: _this.props.distanceToMouse,\n        getHoverDistance: _this._getHoverDistance,\n        dispatcher: _this.markersDispatcher_\n      });\n    };\n\n    _this._initMap = function () {\n      if (_this.initialized_) {\n        return;\n      }\n\n      _this.initialized_ = true;\n      var propsCenter = latLng2Obj(_this.props.center || _this.props.defaultCenter);\n\n      _this.geoService_.setView(propsCenter, _this.props.zoom || _this.props.defaultZoom, 0);\n\n      _this._onBoundsChanged();\n\n      var bootstrapURLKeys = _extends({}, _this.props.apiKey && {\n        key: _this.props.apiKey\n      }, _this.props.bootstrapURLKeys);\n\n      _this.props.googleMapLoader(bootstrapURLKeys, _this.props.heatmapLibrary).then(function (maps) {\n        if (!_this.mounted_) {\n          return;\n        }\n\n        var centerLatLng = _this.geoService_.getCenter();\n\n        var propsOptions = {\n          zoom: _this.props.zoom || _this.props.defaultZoom,\n          center: new maps.LatLng(centerLatLng.lat, centerLatLng.lng)\n        };\n\n        if (_this.props.heatmap.positions) {\n          Object.assign(_assertThisInitialized(_this), {\n            heatmap: generateHeatmap(maps, _this.props.heatmap)\n          });\n          optionsHeatmap(_this.heatmap, _this.props.heatmap);\n        }\n\n        var mapPlainObjects = pick(maps, isPlainObject);\n        var options = typeof _this.props.options === 'function' ? _this.props.options(mapPlainObjects) : _this.props.options;\n        var defaultOptions = defaultOptions_();\n        var draggableOptions = !isEmpty(_this.props.draggable) && {\n          draggable: _this.props.draggable\n        };\n\n        var minZoom = _this._computeMinZoom(options.minZoom);\n\n        _this.minZoom_ = minZoom;\n\n        var preMapOptions = _extends({}, defaultOptions, {\n          minZoom: minZoom\n        }, options, propsOptions);\n\n        _this.defaultDraggableOption_ = !isEmpty(preMapOptions.draggable) ? preMapOptions.draggable : _this.defaultDraggableOption_;\n\n        var mapOptions = _extends({}, preMapOptions, draggableOptions);\n\n        mapOptions.minZoom = _checkMinZoom(mapOptions.minZoom, minZoom);\n        var map = new maps.Map(ReactDOM.findDOMNode(_this.googleMapDom_), mapOptions);\n        _this.map_ = map;\n        _this.maps_ = maps;\n\n        _this._setLayers(_this.props.layerTypes);\n\n        var versionMatch = maps.version.match(/^3\\.(\\d+)\\./);\n        var mapsVersion = versionMatch && Number(versionMatch[1]);\n\n        var this_ = _assertThisInitialized(_this);\n\n        var overlay = Object.assign(new maps.OverlayView(), {\n          onAdd: function onAdd() {\n            var K_MAX_WIDTH = typeof screen !== 'undefined' ? screen.width + \"px\" : '2000px';\n            var K_MAX_HEIGHT = typeof screen !== 'undefined' ? screen.height + \"px\" : '2000px';\n            var div = document.createElement('div');\n            div.style.backgroundColor = 'transparent';\n            div.style.position = 'absolute';\n            div.style.left = '0px';\n            div.style.top = '0px';\n            div.style.width = K_MAX_WIDTH;\n            div.style.height = K_MAX_HEIGHT;\n\n            if (this_.props.overlayViewDivStyle) {\n              var overlayViewDivStyle = this_.props.overlayViewDivStyle;\n\n              if (typeof overlayViewDivStyle === 'object') {\n                Object.keys(overlayViewDivStyle).forEach(function (property) {\n                  div.style[property] = overlayViewDivStyle[property];\n                });\n              }\n            }\n\n            var panes = this.getPanes();\n            panes.overlayMouseTarget.appendChild(div);\n            this_.geoService_.setMapCanvasProjection(maps, overlay.getProjection());\n\n            if (!IS_REACT_16) {\n              createPortal(this_, this_._renderPortal(), div, function () {\n                return this_.setState({\n                  overlay: div\n                });\n              });\n            } else {\n              this_.setState({\n                overlay: div\n              });\n            }\n          },\n          onRemove: function onRemove() {\n            var renderedOverlay = this_.state.overlay;\n\n            if (renderedOverlay && !IS_REACT_16) {\n              ReactDOM.unmountComponentAtNode(renderedOverlay);\n            }\n\n            this_.setState({\n              overlay: null\n            });\n          },\n          draw: function draw() {\n            this_.updateCounter_++;\n\n            this_._onBoundsChanged(map, maps, !this_.props.debounced);\n\n            if (!this_.googleApiLoadedCalled_) {\n              this_._onGoogleApiLoaded({\n                map: map,\n                maps: maps,\n                ref: this_.googleMapDom_\n              });\n\n              this_.googleApiLoadedCalled_ = true;\n            }\n\n            if (this_.mouse_) {\n              var latLng = this_.geoService_.fromContainerPixelToLatLng(this_.mouse_);\n              this_.mouse_.lat = latLng.lat;\n              this_.mouse_.lng = latLng.lng;\n            }\n\n            this_._onChildMouseMove();\n\n            if (this_.markersDispatcher_) {\n              this_.markersDispatcher_.emit('kON_CHANGE');\n\n              if (this_.fireMouseEventOnIdle_) {\n                this_.markersDispatcher_.emit('kON_MOUSE_POSITION_CHANGE');\n              }\n            }\n          }\n        });\n        _this.overlay_ = overlay;\n        overlay.setMap(map);\n\n        if (_this.props.heatmap.positions) {\n          _this.heatmap.setMap(map);\n        }\n\n        if (_this.props.onTilesLoaded) {\n          maps.event.addListener(map, 'tilesloaded', function () {\n            this_._onTilesLoaded();\n          });\n        }\n\n        maps.event.addListener(map, 'zoom_changed', function () {\n          if (this_.geoService_.getZoom() !== map.getZoom()) {\n            if (!this_.zoomAnimationInProgress_) {\n              this_.zoomAnimationInProgress_ = true;\n\n              this_._onZoomAnimationStart(map.zoom);\n            }\n\n            if (mapsVersion < DRAW_CALLED_DURING_ANIMATION_VERSION) {\n              var TIMEOUT_ZOOM = 300;\n\n              if (new Date().getTime() - _this.zoomControlClickTime_ < TIMEOUT_ZOOM) {\n                raf(function () {\n                  return raf(function () {\n                    this_.updateCounter_++;\n\n                    this_._onBoundsChanged(map, maps);\n                  });\n                });\n              } else {\n                this_.updateCounter_++;\n\n                this_._onBoundsChanged(map, maps);\n              }\n            }\n          }\n        });\n        maps.event.addListener(map, 'idle', function () {\n          if (_this.resetSizeOnIdle_) {\n            _this._setViewSize();\n\n            var currMinZoom = _this._computeMinZoom(options.minZoom);\n\n            if (currMinZoom !== _this.minZoom_) {\n              _this.minZoom_ = currMinZoom;\n              map.setOptions({\n                minZoom: currMinZoom\n              });\n            }\n\n            _this.resetSizeOnIdle_ = false;\n          }\n\n          if (this_.zoomAnimationInProgress_) {\n            this_.zoomAnimationInProgress_ = false;\n\n            this_._onZoomAnimationEnd(map.zoom);\n          }\n\n          this_.updateCounter_++;\n\n          this_._onBoundsChanged(map, maps);\n\n          this_.dragTime_ = 0;\n\n          if (this_.markersDispatcher_) {\n            this_.markersDispatcher_.emit('kON_CHANGE');\n          }\n        });\n        maps.event.addListener(map, 'mouseover', function () {\n          this_.mouseInMap_ = true;\n        });\n        maps.event.addListener(map, 'click', function () {\n          this_.mouseInMap_ = true;\n        });\n        maps.event.addListener(map, 'mouseout', function () {\n          this_.mouseInMap_ = false;\n          this_.mouse_ = null;\n          this_.markersDispatcher_.emit('kON_MOUSE_POSITION_CHANGE');\n        });\n        maps.event.addListener(map, 'drag', function () {\n          this_.dragTime_ = new Date().getTime();\n\n          this_._onDrag(map);\n        });\n        maps.event.addListener(map, 'dragend', function () {\n          var idleListener = maps.event.addListener(map, 'idle', function () {\n            maps.event.removeListener(idleListener);\n\n            this_._onDragEnd(map);\n          });\n        });\n        maps.event.addListener(map, 'maptypeid_changed', function () {\n          this_._onMapTypeIdChange(map.getMapTypeId());\n        });\n      })[\"catch\"](function (e) {\n        _this._onGoogleApiLoaded({\n          map: null,\n          maps: null,\n          ref: _this.googleMapDom_\n        });\n\n        console.error(e);\n        throw e;\n      });\n    };\n\n    _this._onGoogleApiLoaded = function () {\n      if (_this.props.onGoogleApiLoaded) {\n        var _this$props;\n\n        if (process.env.NODE_ENV !== 'production' && _this.props.yesIWantToUseGoogleMapApiInternals !== true) {\n          console.warn('GoogleMap: ' + 'Usage of internal api objects is dangerous ' + 'and can cause a lot of issues.\\n' + 'To hide this warning add yesIWantToUseGoogleMapApiInternals={true} ' + 'to <GoogleMap instance');\n        }\n\n        (_this$props = _this.props).onGoogleApiLoaded.apply(_this$props, arguments);\n      }\n    };\n\n    _this._getHoverDistance = function () {\n      return _this.props.hoverDistance;\n    };\n\n    _this._onDrag = function () {\n      var _this$props2;\n\n      return _this.props.onDrag && (_this$props2 = _this.props).onDrag.apply(_this$props2, arguments);\n    };\n\n    _this._onDragEnd = function () {\n      var _this$props3;\n\n      return _this.props.onDragEnd && (_this$props3 = _this.props).onDragEnd.apply(_this$props3, arguments);\n    };\n\n    _this._onMapTypeIdChange = function () {\n      var _this$props4;\n\n      return _this.props.onMapTypeIdChange && (_this$props4 = _this.props).onMapTypeIdChange.apply(_this$props4, arguments);\n    };\n\n    _this._onZoomAnimationStart = function () {\n      var _this$props5;\n\n      return _this.props.onZoomAnimationStart && (_this$props5 = _this.props).onZoomAnimationStart.apply(_this$props5, arguments);\n    };\n\n    _this._onZoomAnimationEnd = function () {\n      var _this$props6;\n\n      return _this.props.onZoomAnimationEnd && (_this$props6 = _this.props).onZoomAnimationEnd.apply(_this$props6, arguments);\n    };\n\n    _this._onTilesLoaded = function () {\n      return _this.props.onTilesLoaded && _this.props.onTilesLoaded();\n    };\n\n    _this._onChildClick = function () {\n      if (_this.props.onChildClick) {\n        var _this$props7;\n\n        return (_this$props7 = _this.props).onChildClick.apply(_this$props7, arguments);\n      }\n\n      return undefined;\n    };\n\n    _this._onChildMouseDown = function (hoverKey, childProps) {\n      _this.childMouseDownArgs_ = [hoverKey, childProps];\n\n      if (_this.props.onChildMouseDown) {\n        _this.props.onChildMouseDown(hoverKey, childProps, _extends({}, _this.mouse_));\n      }\n    };\n\n    _this._onChildMouseUp = function () {\n      if (_this.childMouseDownArgs_) {\n        if (_this.props.onChildMouseUp) {\n          var _this$props8;\n\n          (_this$props8 = _this.props).onChildMouseUp.apply(_this$props8, _this.childMouseDownArgs_.concat([_extends({}, _this.mouse_)]));\n        }\n\n        _this.childMouseDownArgs_ = null;\n        _this.childMouseUpTime_ = new Date().getTime();\n      }\n    };\n\n    _this._onChildMouseMove = function () {\n      if (_this.childMouseDownArgs_) {\n        if (_this.props.onChildMouseMove) {\n          var _this$props9;\n\n          (_this$props9 = _this.props).onChildMouseMove.apply(_this$props9, _this.childMouseDownArgs_.concat([_extends({}, _this.mouse_)]));\n        }\n      }\n    };\n\n    _this._onChildMouseEnter = function () {\n      if (_this.props.onChildMouseEnter) {\n        var _this$props10;\n\n        return (_this$props10 = _this.props).onChildMouseEnter.apply(_this$props10, arguments);\n      }\n\n      return undefined;\n    };\n\n    _this._onChildMouseLeave = function () {\n      if (_this.props.onChildMouseLeave) {\n        var _this$props11;\n\n        return (_this$props11 = _this.props).onChildMouseLeave.apply(_this$props11, arguments);\n      }\n\n      return undefined;\n    };\n\n    _this._setViewSize = function () {\n      if (!_this.mounted_) return;\n\n      if (isFullScreen()) {\n        _this.geoService_.setViewSize(window.innerWidth, window.innerHeight);\n      } else {\n        var mapDom = ReactDOM.findDOMNode(_this.googleMapDom_);\n\n        _this.geoService_.setViewSize(mapDom.clientWidth, mapDom.clientHeight);\n      }\n\n      _this._onBoundsChanged();\n    };\n\n    _this._onWindowResize = function () {\n      _this.resetSizeOnIdle_ = true;\n    };\n\n    _this._onMapMouseMove = function (e) {\n      if (!_this.mouseInMap_) return;\n      var currTime = new Date().getTime();\n      var K_RECALC_CLIENT_RECT_MS = 50;\n\n      if (currTime - _this.mouseMoveTime_ > K_RECALC_CLIENT_RECT_MS) {\n        _this.boundingRect_ = e.currentTarget.getBoundingClientRect();\n      }\n\n      _this.mouseMoveTime_ = currTime;\n      var mousePosX = e.clientX - _this.boundingRect_.left;\n      var mousePosY = e.clientY - _this.boundingRect_.top;\n\n      if (!_this.mouse_) {\n        _this.mouse_ = {\n          x: 0,\n          y: 0,\n          lat: 0,\n          lng: 0\n        };\n      }\n\n      _this.mouse_.x = mousePosX;\n      _this.mouse_.y = mousePosY;\n\n      var latLng = _this.geoService_.fromContainerPixelToLatLng(_this.mouse_);\n\n      _this.mouse_.lat = latLng.lat;\n      _this.mouse_.lng = latLng.lng;\n\n      _this._onChildMouseMove();\n\n      if (currTime - _this.dragTime_ < K_IDLE_TIMEOUT) {\n        _this.fireMouseEventOnIdle_ = true;\n      } else {\n        _this.markersDispatcher_.emit('kON_MOUSE_POSITION_CHANGE');\n\n        _this.fireMouseEventOnIdle_ = false;\n      }\n    };\n\n    _this._onClick = function () {\n      var _this$props12;\n\n      return _this.props.onClick && !_this.childMouseDownArgs_ && new Date().getTime() - _this.childMouseUpTime_ > K_IDLE_CLICK_TIMEOUT && _this.dragTime_ === 0 && (_this$props12 = _this.props).onClick.apply(_this$props12, arguments);\n    };\n\n    _this._onMapClick = function (event) {\n      if (_this.markersDispatcher_) {\n        _this._onMapMouseMove(event);\n\n        var currTime = new Date().getTime();\n\n        if (currTime - _this.dragTime_ > K_IDLE_TIMEOUT) {\n          if (_this.mouse_) {\n            _this._onClick(_extends({}, _this.mouse_, {\n              event: event\n            }));\n          }\n\n          _this.markersDispatcher_.emit('kON_CLICK', event);\n        }\n      }\n    };\n\n    _this._onMapMouseDownNative = function (event) {\n      if (!_this.mouseInMap_) return;\n\n      _this._onMapMouseDown(event);\n    };\n\n    _this._onMapMouseDown = function (event) {\n      if (_this.markersDispatcher_) {\n        var currTime = new Date().getTime();\n\n        if (currTime - _this.dragTime_ > K_IDLE_TIMEOUT) {\n          _this._onMapMouseMove(event);\n\n          _this.markersDispatcher_.emit('kON_MDOWN', event);\n        }\n      }\n    };\n\n    _this._onMapMouseDownCapture = function () {\n      if (detectBrowser().isChrome) {\n        _this.zoomControlClickTime_ = new Date().getTime();\n      }\n    };\n\n    _this._onKeyDownCapture = function () {\n      if (detectBrowser().isChrome) {\n        _this.zoomControlClickTime_ = new Date().getTime();\n      }\n    };\n\n    _this._isCenterDefined = function (center) {\n      return center && (isPlainObject(center) && isNumber(center.lat) && isNumber(center.lng) || center.length === 2 && isNumber(center[0]) && isNumber(center[1]));\n    };\n\n    _this._onBoundsChanged = function (map, maps, callExtBoundsChange) {\n      if (map) {\n        var gmC = map.getCenter();\n\n        _this.geoService_.setView([gmC.lat(), gmC.lng()], map.getZoom(), 0);\n      }\n\n      if ((_this.props.onChange || _this.props.onBoundsChange) && _this.geoService_.canProject()) {\n        var zoom = _this.geoService_.getZoom();\n\n        var bounds = _this.geoService_.getBounds();\n\n        var centerLatLng = _this.geoService_.getCenter();\n\n        if (!isArraysEqualEps(bounds, _this.prevBounds_, kEPS)) {\n          if (callExtBoundsChange !== false) {\n            var marginBounds = _this.geoService_.getBounds(_this.props.margin);\n\n            if (_this.props.onBoundsChange) {\n              _this.props.onBoundsChange(_this.centerIsObject_ ? _extends({}, centerLatLng) : [centerLatLng.lat, centerLatLng.lng], zoom, bounds, marginBounds);\n            }\n\n            if (_this.props.onChange) {\n              _this.props.onChange({\n                center: _extends({}, centerLatLng),\n                zoom: zoom,\n                bounds: {\n                  nw: {\n                    lat: bounds[0],\n                    lng: bounds[1]\n                  },\n                  se: {\n                    lat: bounds[2],\n                    lng: bounds[3]\n                  },\n                  sw: {\n                    lat: bounds[4],\n                    lng: bounds[5]\n                  },\n                  ne: {\n                    lat: bounds[6],\n                    lng: bounds[7]\n                  }\n                },\n                marginBounds: {\n                  nw: {\n                    lat: marginBounds[0],\n                    lng: marginBounds[1]\n                  },\n                  se: {\n                    lat: marginBounds[2],\n                    lng: marginBounds[3]\n                  },\n                  sw: {\n                    lat: marginBounds[4],\n                    lng: marginBounds[5]\n                  },\n                  ne: {\n                    lat: marginBounds[6],\n                    lng: marginBounds[7]\n                  }\n                },\n                size: _this.geoService_.hasSize() ? {\n                  width: _this.geoService_.getWidth(),\n                  height: _this.geoService_.getHeight()\n                } : {\n                  width: 0,\n                  height: 0\n                }\n              });\n            }\n\n            _this.prevBounds_ = bounds;\n          }\n        }\n      }\n    };\n\n    _this._registerChild = function (ref) {\n      _this.googleMapDom_ = ref;\n    };\n\n    _this.mounted_ = false;\n    _this.initialized_ = false;\n    _this.googleApiLoadedCalled_ = false;\n    _this.map_ = null;\n    _this.maps_ = null;\n    _this.prevBounds_ = null;\n    _this.heatmap = null;\n    _this.layers_ = {};\n    _this.mouse_ = null;\n    _this.mouseMoveTime_ = 0;\n    _this.boundingRect_ = null;\n    _this.mouseInMap_ = true;\n    _this.dragTime_ = 0;\n    _this.fireMouseEventOnIdle_ = false;\n    _this.updateCounter_ = 0;\n    _this.markersDispatcher_ = new MarkerDispatcher(_assertThisInitialized(_this));\n    _this.geoService_ = new Geo(K_GOOGLE_TILE_SIZE);\n    _this.centerIsObject_ = isPlainObject(_this.props.center);\n    _this.minZoom_ = DEFAULT_MIN_ZOOM;\n    _this.defaultDraggableOption_ = true;\n    _this.zoomControlClickTime_ = 0;\n    _this.childMouseDownArgs_ = null;\n    _this.childMouseUpTime_ = 0;\n    _this.googleMapDom_ = null;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (_this.props.apiKey) {\n        console.warn('GoogleMap: ' + 'apiKey is deprecated, use ' + 'bootstrapURLKeys={{key: YOUR_API_KEY}} instead.');\n      }\n\n      if (_this.props.onBoundsChange) {\n        console.warn('GoogleMap: ' + 'onBoundsChange is deprecated, use ' + 'onChange({center, zoom, bounds, ...other}) instead.');\n      }\n\n      if (isEmpty(_this.props.center) && isEmpty(_this.props.defaultCenter)) {\n        console.warn('GoogleMap: center or defaultCenter property must be defined');\n      }\n\n      if (isEmpty(_this.props.zoom) && isEmpty(_this.props.defaultZoom)) {\n        console.warn('GoogleMap: zoom or defaultZoom property must be defined');\n      }\n    }\n\n    if (_this._isCenterDefined(_this.props.center || _this.props.defaultCenter)) {\n      var propsCenter = latLng2Obj(_this.props.center || _this.props.defaultCenter);\n\n      _this.geoService_.setView(propsCenter, _this.props.zoom || _this.props.defaultZoom, 0);\n    }\n\n    _this.zoomAnimationInProgress_ = false;\n    _this.state = {\n      overlay: null\n    };\n    return _this;\n  }\n\n  var _proto = GoogleMap.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    this.mounted_ = true;\n    addPassiveEventListener(window, 'resize', this._onWindowResize, false);\n    addPassiveEventListener(window, 'keydown', this._onKeyDownCapture, true);\n    var mapDom = ReactDOM.findDOMNode(this.googleMapDom_);\n\n    if (mapDom) {\n      addPassiveEventListener(mapDom, 'mousedown', this._onMapMouseDownNative, true);\n    }\n\n    addPassiveEventListener(window, 'mouseup', this._onChildMouseUp, false);\n\n    var bootstrapURLKeys = _extends({}, this.props.apiKey && {\n      key: this.props.apiKey\n    }, this.props.bootstrapURLKeys);\n\n    this.props.googleMapLoader(bootstrapURLKeys, this.props.heatmapLibrary);\n    setTimeout(function () {\n      _this2._setViewSize();\n\n      if (_this2._isCenterDefined(_this2.props.center || _this2.props.defaultCenter)) {\n        _this2._initMap();\n      }\n    }, 0, this);\n\n    if (this.props.resetBoundsOnResize) {\n      var that = this;\n      addResizeListener(mapDom, that._mapDomResizeCallback);\n    }\n  };\n\n  _proto.UNSAFE_componentWillReceiveProps = function UNSAFE_componentWillReceiveProps(nextProps) {\n    var _this3 = this;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!shallowEqual(this.props.defaultCenter, nextProps.defaultCenter)) {\n        console.warn(\"GoogleMap: defaultCenter prop changed. You can't change default props.\");\n      }\n\n      if (!shallowEqual(this.props.defaultZoom, nextProps.defaultZoom)) {\n        console.warn(\"GoogleMap: defaultZoom prop changed. You can't change default props.\");\n      }\n    }\n\n    if (!this._isCenterDefined(this.props.center) && this._isCenterDefined(nextProps.center)) {\n      setTimeout(function () {\n        return _this3._initMap();\n      }, 0);\n    }\n\n    if (this.map_) {\n      var centerLatLng = this.geoService_.getCenter();\n\n      if (this._isCenterDefined(nextProps.center)) {\n        var nextPropsCenter = latLng2Obj(nextProps.center);\n        var currCenter = this._isCenterDefined(this.props.center) ? latLng2Obj(this.props.center) : null;\n\n        if (!currCenter || Math.abs(nextPropsCenter.lat - currCenter.lat) + Math.abs(nextPropsCenter.lng - currCenter.lng) > kEPS) {\n          if (Math.abs(nextPropsCenter.lat - centerLatLng.lat) + Math.abs(nextPropsCenter.lng - centerLatLng.lng) > kEPS) {\n            this.map_.panTo({\n              lat: nextPropsCenter.lat,\n              lng: nextPropsCenter.lng\n            });\n          }\n        }\n      }\n\n      if (!isEmpty(nextProps.zoom)) {\n        if (Math.abs(nextProps.zoom - this.props.zoom) > 0) {\n          this.map_.setZoom(nextProps.zoom);\n        }\n      }\n\n      if (!isEmpty(this.props.draggable) && isEmpty(nextProps.draggable)) {\n        this.map_.setOptions({\n          draggable: this.defaultDraggableOption_\n        });\n      } else if (!shallowEqual(this.props.draggable, nextProps.draggable)) {\n        this.map_.setOptions({\n          draggable: nextProps.draggable\n        });\n      }\n\n      if (!isEmpty(nextProps.options) && !shallowEqual(this.props.options, nextProps.options)) {\n        var mapPlainObjects = pick(this.maps_, isPlainObject);\n        var options = typeof nextProps.options === 'function' ? nextProps.options(mapPlainObjects) : nextProps.options;\n        options = omit(options, ['zoom', 'center', 'draggable']);\n\n        if ('minZoom' in options) {\n          var minZoom = this._computeMinZoom(options.minZoom);\n\n          options.minZoom = _checkMinZoom(options.minZoom, minZoom);\n        }\n\n        this.map_.setOptions(options);\n      }\n\n      if (!shallowEqual(nextProps.layerTypes, this.props.layerTypes)) {\n        Object.keys(this.layers_).forEach(function (layerKey) {\n          _this3.layers_[layerKey].setMap(null);\n\n          delete _this3.layers_[layerKey];\n        });\n\n        this._setLayers(nextProps.layerTypes);\n      }\n\n      if (this.heatmap && !shallowEqual(nextProps.heatmap.positions, this.props.heatmap.positions)) {\n        this.heatmap.setData(nextProps.heatmap.positions.map(function (p) {\n          return {\n            location: new _this3.maps_.LatLng(p.lat, p.lng),\n            weight: p.weight\n          };\n        }));\n      }\n\n      if (this.heatmap && !shallowEqual(nextProps.heatmap.options, this.props.heatmap.options)) {\n        Object.keys(nextProps.heatmap.options).forEach(function (option) {\n          _this3.heatmap.set(option, nextProps.heatmap.options[option]);\n        });\n      }\n    }\n  };\n\n  _proto.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n    return !shallowEqual(omit(this.props, ['draggable']), omit(nextProps, ['draggable'])) || !shallowEqual(this.state, nextState);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    this.markersDispatcher_.emit('kON_CHANGE');\n\n    if (!shallowEqual(this.props.hoverDistance, prevProps.hoverDistance)) {\n      this.markersDispatcher_.emit('kON_MOUSE_POSITION_CHANGE');\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.mounted_ = false;\n    var mapDom = ReactDOM.findDOMNode(this.googleMapDom_);\n\n    if (mapDom) {\n      mapDom.removeEventListener('mousedown', this._onMapMouseDownNative, true);\n    }\n\n    window.removeEventListener('resize', this._onWindowResize);\n    window.removeEventListener('keydown', this._onKeyDownCapture);\n    window.removeEventListener('mouseup', this._onChildMouseUp, false);\n\n    if (this.props.resetBoundsOnResize) {\n      removeResizeListener(mapDom, this._mapDomResizeCallback);\n    }\n\n    if (this.overlay_) {\n      this.overlay_.setMap(null);\n    }\n\n    if (this.maps_ && this.map_ && this.props.shouldUnregisterMapOnUnmount) {\n      this.map_.setOptions({\n        scrollwheel: false\n      });\n      this.maps_.event.clearInstanceListeners(this.map_);\n    }\n\n    if (this.props.shouldUnregisterMapOnUnmount) {\n      this.map_ = null;\n      this.maps_ = null;\n    }\n\n    this.markersDispatcher_.dispose();\n    this.resetSizeOnIdle_ = false;\n\n    if (this.props.shouldUnregisterMapOnUnmount) {\n      delete this.map_;\n      delete this.markersDispatcher_;\n    }\n  };\n\n  _proto.render = function render() {\n    var overlay = this.state.overlay;\n    var mapMarkerPrerender = !overlay ? /*#__PURE__*/React.createElement(GoogleMapMarkersPrerender, {\n      experimental: this.props.experimental,\n      onChildClick: this._onChildClick,\n      onChildMouseDown: this._onChildMouseDown,\n      onChildMouseEnter: this._onChildMouseEnter,\n      onChildMouseLeave: this._onChildMouseLeave,\n      geoService: this.geoService_,\n      insideMapPanes: false,\n      distanceToMouse: this.props.distanceToMouse,\n      getHoverDistance: this._getHoverDistance,\n      dispatcher: this.markersDispatcher_\n    }) : null;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: this.props.style,\n      onMouseMove: this._onMapMouseMove,\n      onMouseDownCapture: this._onMapMouseDownCapture,\n      onClick: this._onMapClick\n    }, /*#__PURE__*/React.createElement(GoogleMapMap, {\n      registerChild: this._registerChild\n    }), IS_REACT_16 && overlay && createPortal(this._renderPortal(), overlay), mapMarkerPrerender);\n  };\n\n  return GoogleMap;\n}(Component);\n\nGoogleMap.propTypes = {\n  apiKey: PropTypes.string,\n  bootstrapURLKeys: PropTypes.any,\n  defaultCenter: PropTypes.oneOfType([PropTypes.array, PropTypes.shape({\n    lat: PropTypes.number,\n    lng: PropTypes.number\n  })]),\n  center: PropTypes.oneOfType([PropTypes.array, PropTypes.shape({\n    lat: PropTypes.number,\n    lng: PropTypes.number\n  })]),\n  defaultZoom: PropTypes.number,\n  zoom: PropTypes.number,\n  onBoundsChange: PropTypes.func,\n  onChange: PropTypes.func,\n  onClick: PropTypes.func,\n  onChildClick: PropTypes.func,\n  onChildMouseDown: PropTypes.func,\n  onChildMouseUp: PropTypes.func,\n  onChildMouseMove: PropTypes.func,\n  onChildMouseEnter: PropTypes.func,\n  onChildMouseLeave: PropTypes.func,\n  onZoomAnimationStart: PropTypes.func,\n  onZoomAnimationEnd: PropTypes.func,\n  onDrag: PropTypes.func,\n  onDragEnd: PropTypes.func,\n  onMapTypeIdChange: PropTypes.func,\n  onTilesLoaded: PropTypes.func,\n  options: PropTypes.any,\n  distanceToMouse: PropTypes.func,\n  hoverDistance: PropTypes.number,\n  debounced: PropTypes.bool,\n  margin: PropTypes.array,\n  googleMapLoader: PropTypes.any,\n  onGoogleApiLoaded: PropTypes.func,\n  yesIWantToUseGoogleMapApiInternals: PropTypes.bool,\n  draggable: PropTypes.bool,\n  style: PropTypes.any,\n  resetBoundsOnResize: PropTypes.bool,\n  layerTypes: PropTypes.arrayOf(PropTypes.string),\n  shouldUnregisterMapOnUnmount: PropTypes.bool\n};\nGoogleMap.defaultProps = {\n  distanceToMouse: function distanceToMouse(pt, mousePos) {\n    return Math.sqrt((pt.x - mousePos.x) * (pt.x - mousePos.x) + (pt.y - mousePos.y) * (pt.y - mousePos.y));\n  },\n  hoverDistance: 30,\n  debounced: true,\n  options: defaultOptions_,\n  googleMapLoader: googleMapLoader,\n  yesIWantToUseGoogleMapApiInternals: false,\n  style: {\n    width: '100%',\n    height: '100%',\n    margin: 0,\n    padding: 0,\n    position: 'relative'\n  },\n  layerTypes: [],\n  heatmap: {},\n  heatmapLibrary: false,\n  shouldUnregisterMapOnUnmount: true\n};\nGoogleMap.googleMapLoader = googleMapLoader;\nexport default GoogleMap;","map":{"version":3,"sources":["../src/google_map_map.js","../src/marker_dispatcher.js","../src/utils/omit.js","../src/utils/shallowEqual.js","../src/google_map_markers.js","../src/google_map_markers_prerender.js","../src/google_heatmap.js","../src/loaders/google_map_loader.js","../src/lib/geo/wrap.js","../src/lib/geo/lat_lng.js","../src/lib/geo/transform.js","../src/lib/geo/index.js","../src/utils/raf.js","../src/utils/log2.js","../src/utils/pick.js","../src/utils/isEmpty.js","../src/utils/isNumber.js","../src/utils/detect.js","../src/utils/isPlainObject.js","../src/utils/isArraysEqualEps.js","../src/utils/passiveEvents.js","../src/utils/detectElementResize.js","../src/google_map.js"],"names":["style","width","height","left","top","margin","padding","position","GoogleMapMap","Component","shouldComponentUpdate","render","registerChild","MarkerDispatcher","EventEmitter","getChildren","getMousePosition","getUpdateCounter","dispose","omit","rest","i","keys","key","hasOwnProperty","Object","x","y","is","objA","objB","keysA","keysB","mainStyle","backgroundColor","GoogleMapMarkers","propTypes","geoService","PropTypes","distanceToMouse","dispatcher","onChildClick","onChildMouseDown","onChildMouseLeave","onChildMouseEnter","getHoverDistance","insideMapPanes","prerender","bool","defaultProps","hoverKey","componentDidMount","shallowEqual","componentWillUnmount","children","updateCounter","prevChildCount","state","childProps","mp","distances","hoverDistance","React","child","childKey","dist","props","a","b","mainElementStyle","markers","$geoService","$onMouseAllow","$prerender","latLng","lat","lng","pt","stylePtPos","seLatLng","seLng","sePt","containerPt","$markerHolderClassName","$hover","$getDimensions","$dimensionKey","generateHeatmap","positions","instance","data","weight","acc","location","optionsHeatmap","options","BASE_URL","DEFAULT_URL","API_PATH","$script_","_customPromise","resolveCustomPromise_","require","loadPromise_","reject","window","resolve","process","message","console","params","r","bootstrapURLKeys","libraries","heatmapLibrary","d","max","n","LatLng","convert","Array","isNaN","wrap","Transform","tileSize","minZoom","maxZoom","zoom","Math","bearing","zoomV","zoomScale","scaleZoom","project","latlng","unproject","point","lngX","worldSize","latY","xLng","yLat","y2","locationPoint","p","pointLocation","p2","Geo","setView","setViewSize","setMapCanvasProjection","canProject","hasSize","fromLatLngToCenterPixel","fromLatLngToDivPixel","ptLatLng","fromLatLngToContainerPixel","fromContainerPixelToLatLng","ptxy","ptRes","Point","getWidth","getHeight","getZoom","getCenter","getBounds","bndT","margins","bndR","bndB","bndL","topLeftCorner","bottomRightCorner","res","nativeRaf","log2","fn","obj","result","isEmpty","val","objectToString","numberTag","isObjectLike","detectBrowserResult_","isExplorer","navigator","isFirefox","isOpera","isChrome","isSafari","fnToString","Function","proto","constructor","arrayA","arrayB","passiveSupported","get","element","hasPassiveSupport","capture","passive","canUseDOM","_window","attachEvent","document","stylesCreated","requestFrame","raf","cancelFrame","cancel","resetTriggers","triggers","expand","contract","expandChild","checkTriggers","scrollListener","animation","keyframeprefix","animationstartevent","domPrefixes","startEvents","pfx","elm","animationName","animationKeyframes","animationStyle","createStyles","css","head","addResizeListener","tempParentDiv","getComputedStyle","addPassiveEventListener","e","removeResizeListener","kEPS","K_GOOGLE_TILE_SIZE","K_IDLE_TIMEOUT","K_IDLE_CLICK_TIMEOUT","DEFAULT_MIN_ZOOM","DRAW_CALLED_DURING_ANIMATION_VERSION","IS_REACT_16","ReactDOM","createPortal","overviewMapControl","streetViewControl","rotateControl","mapTypeControl","styles","featureType","elementType","stylers","visibility","latLng2Obj","isPlainObject","_checkMinZoom","isFullScreen","GoogleMap","apiKey","defaultCenter","number","center","defaultZoom","onBoundsChange","onChange","onClick","onChildMouseUp","onChildMouseMove","onZoomAnimationStart","onZoomAnimationEnd","onDrag","onDragEnd","onMapTypeIdChange","onTilesLoaded","debounced","googleMapLoader","onGoogleApiLoaded","yesIWantToUseGoogleMapApiInternals","draggable","resetBoundsOnResize","layerTypes","shouldUnregisterMapOnUnmount","mousePos","heatmap","propsCenter","overlay","mapDom","setTimeout","that","UNSAFE_componentWillReceiveProps","nextProps","centerLatLng","nextPropsCenter","currCenter","defaultDraggableOption_","mapPlainObjects","pick","componentDidUpdate","prevProps","scrollwheel","tilesPerWidth","tilesPerHeight","maxTilesPerDim","originalCenter","currentCenter","markersDispatcher_","propsOptions","maps","defaultOptions","defaultOptions_","draggableOptions","preMapOptions","mapOptions","map","versionMatch","mapsVersion","Number","this_","onAdd","K_MAX_WIDTH","screen","K_MAX_HEIGHT","div","overlayViewDivStyle","panes","onRemove","renderedOverlay","draw","ref","googleMapDom_","TIMEOUT_ZOOM","currMinZoom","idleListener","currTime","K_RECALC_CLIENT_RECT_MS","mousePosX","mousePosY","event","detectBrowser","isNumber","gmC","bounds","isArraysEqualEps","callExtBoundsChange","marginBounds","nw","se","sw","ne","size","mapMarkerPrerender","_onMapClick","_registerChild"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,KAAK,GAAG;AACZC,EAAAA,KAAK,EADO,MAAA;AAEZC,EAAAA,MAAM,EAFM,MAAA;AAGZC,EAAAA,IAAI,EAHQ,CAAA;AAIZC,EAAAA,GAAG,EAJS,CAAA;AAKZC,EAAAA,MAAM,EALM,CAAA;AAMZC,EAAAA,OAAO,EANK,CAAA;AAOZC,EAAAA,QAAQ,EAAE;AAPE,CAAd;;IAUqBC,YAAAA,GAAAA,aAAAA,UAAAA,UAAAA,EAAAA;;;;;;;;;SACnBE,qB,GAAAA,SAAAA,qBAAAA,GAAwB;AACtB,WAAA,KAAA;AACD,G;;SAEDC,M,GAAAA,SAAAA,MAAAA,GAAS;AAAA,QACCC,aADD,GACmB,KADnB,KACmB,CADnB,aAAA;AAEP,WAAA,aAAO,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,GAAG,EAAR,aAAA;AAAyB,MAAA,KAAK,EAAEZ;AAAhC,KAAA,CAAP;AACD,G;;;CARkBQ,CAAqBC,SAArBD,C;;ICVAK,gBAAAA,GAAAA,aAAAA,UAAAA,aAAAA,EAAAA;;;AACnB,WAAA,gBAAA,CAAA,YAAA,EAA0B;AAAA,QAAA,KAAA;;AACxB,IAAA,KAAA,GAAA,aAAA,CAAA,IAAA,CAAA,IAAA,KAAA,IAAA;AACA,IAAA,KAAA,CAAA,YAAA,GAAA,YAAA;AAFwB,WAAA,KAAA;AAGzB;;;;SAEDE,W,GAAAA,SAAAA,WAAAA,GAAc;AACZ,WAAO,KAAA,YAAA,CAAA,KAAA,CAAP,QAAA;AACD,G;;SAEDC,gB,GAAAA,SAAAA,gBAAAA,GAAmB;AACjB,WAAO,KAAA,YAAA,CAAP,MAAA;AACD,G;;SAEDC,gB,GAAAA,SAAAA,gBAAAA,GAAmB;AACjB,WAAO,KAAA,YAAA,CAAP,cAAA;AACD,G;;SAEDC,O,GAAAA,SAAAA,OAAAA,GAAU;AACR,SAAA,YAAA,GAAA,IAAA;AACA,SAAA,kBAAA;AACD,G;;;CArBkBL,CAAyBC,YAAzBD,C;;ACDrB,IAAMM,IAAI,GAAG,SAAPA,IAAO,CAAA,GAAA,EAAA,IAAA,EAAe;AAAA,MACfC,IADe,GAAA,QAAA,CAAA,EAAA,EAAA,GAAA,CAAA;;AAE1B,OAAK,IAAIC,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAGC,IAAI,CAAxB,MAAA,EAAiCD,CAAjC,EAAA,EAAsC;AACpC,QAAME,GAAG,GAAGD,IAAI,CAAhB,CAAgB,CAAhB;;AACA,QAAIC,GAAG,IAAP,IAAA,EAAiB;AACf,aAAOH,IAAI,CAAX,GAAW,CAAX;AACD;AACF;;AACD,SAAA,IAAA;AARF,CAAA;;ACUA,IAAMI,cAAc,GAAGC,MAAM,CAANA,SAAAA,CAAvB,cAAA;;AAMA,SAAA,EAAA,CAAA,CAAA,EAAA,CAAA,EAAkB;AAEhB,MAAIC,CAAC,KAAL,CAAA,EAAa;AAIX,WAAOA,CAAC,KAADA,CAAAA,IAAWC,CAAC,KAAZD,CAAAA,IAAsB,IAAA,CAAA,KAAU,IAAvC,CAAA;AACD;;AAGD,SAAOA,CAAC,KAADA,CAAAA,IAAWC,CAAC,KAAnB,CAAA;AACD;;AAOD,SAAA,YAAA,CAAA,IAAA,EAAA,IAAA,EAAkC;AAChC,MAAIC,EAAE,CAAA,IAAA,EAAN,IAAM,CAAN,EAAoB;AAClB,WAAA,IAAA;AACD;;AAED,MACE,OAAA,IAAA,KAAA,QAAA,IACAC,IAAI,KADJ,IAAA,IAEA,OAAA,IAAA,KAFA,QAAA,IAGAC,IAAI,KAJN,IAAA,EAKE;AACA,WAAA,KAAA;AACD;;AAED,MAAMC,KAAK,GAAGN,MAAM,CAANA,IAAAA,CAAd,IAAcA,CAAd;AACA,MAAMO,KAAK,GAAGP,MAAM,CAANA,IAAAA,CAAd,IAAcA,CAAd;;AAEA,MAAIM,KAAK,CAALA,MAAAA,KAAiBC,KAAK,CAA1B,MAAA,EAAmC;AACjC,WAAA,KAAA;AACD;;AAGD,OAAK,IAAIX,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAGU,KAAK,CAAzB,MAAA,EAAkCV,CAAlC,EAAA,EAAuC;AACrC,QACE,CAACG,cAAc,CAAdA,IAAAA,CAAAA,IAAAA,EAA0BO,KAAK,CAAhC,CAAgC,CAA/BP,CAAD,IACA,CAACI,EAAE,CAACC,IAAI,CAACE,KAAK,CAAX,CAAW,CAAN,CAAL,EAAiBD,IAAI,CAACC,KAAK,CAFhC,CAEgC,CAAN,CAArB,CAFL,EAGE;AACA,aAAA,KAAA;AACD;AACF;;AAED,SAAA,IAAA;AACD;;AC5DD,IAAME,SAAS,GAAG;AAChBhC,EAAAA,KAAK,EADW,MAAA;AAEhBC,EAAAA,MAAM,EAFU,MAAA;AAGhBC,EAAAA,IAAI,EAHY,CAAA;AAIhBC,EAAAA,GAAG,EAJa,CAAA;AAKhBC,EAAAA,MAAM,EALU,CAAA;AAMhBC,EAAAA,OAAO,EANS,CAAA;AAOhBC,EAAAA,QAAQ,EAAE;AAPM,CAAlB;AAUA,IAAMP,OAAK,GAAG;AACZC,EAAAA,KAAK,EADO,CAAA;AAEZC,EAAAA,MAAM,EAFM,CAAA;AAGZC,EAAAA,IAAI,EAHQ,CAAA;AAIZC,EAAAA,GAAG,EAJS,CAAA;AAKZ8B,EAAAA,eAAe,EALH,aAAA;AAMZ3B,EAAAA,QAAQ,EAAE;AANE,CAAd;;IASqB4B,gBAAAA,GAAAA,aAAAA,UAAAA,UAAAA,EAAAA;;;AAsBnB,WAAA,gBAAA,CAAA,KAAA,EAAmB;AAAA,QAAA,KAAA;;AACjB,IAAA,KAAA,GAAA,UAAA,CAAA,IAAA,CAAA,IAAA,EAAA,KAAA,KAAA,IAAA;;AADiB,IAAA,KAAA,CAAA,SAAA,GAkDP,YAAA;AAAA,aAAO;AACjBmB,QAAAA,QAAQ,EAAE,KAAA,CAAA,KAAA,CAAA,UAAA,CADO,WACP,EADO;AAEjBC,QAAAA,aAAa,EAAE,KAAA,CAAA,KAAA,CAAA,UAAA,CAAA,gBAAA;AAFE,OAAP;AAlDO,KAAA;;AAAA,IAAA,KAAA,CAAA,gBAAA,GAuDA,YAAM;AACvB,UAAI,CAAC,KAAA,CAAL,gBAAA,EAA4B;AAC1B;AACD;;AAED,UAAMC,cAAc,GAAG,CAAC,KAAA,CAAA,KAAA,CAAA,QAAA,IAAD,EAAA,EAAvB,MAAA;;AACA,UAAMC,KAAK,GAAG,KAAA,CAAd,SAAc,EAAd;;AAEA,MAAA,KAAA,CAAA,QAAA,CAAA,KAAA,EAEE,YAAA;AAAA,eACE,CAACA,KAAK,CAALA,QAAAA,IAAD,EAAA,EAAA,MAAA,KAAA,cAAA,IACA,KAAA,CAFF,qBAEE,EAFF;AAFF,OAAA;AA/DiB,KAAA;;AAAA,IAAA,KAAA,CAAA,aAAA,GAuEH,YAAM;AACpB,UAAI,KAAA,CAAA,KAAA,CAAJ,YAAA,EAA6B;AAC3B,YAAI,KAAA,CAAJ,gBAAA,EAA2B;AACzB,cAAMP,QAAQ,GAAG,KAAA,CAAjB,SAAA;AACA,cAAMQ,UAAU,GAAG,KAAA,CAAnB,gBAAA;;AAEA,UAAA,KAAA,CAAA,KAAA,CAAA,YAAA,CAAA,QAAA,EAAA,UAAA;AACD;AACF;AA/EgB,KAAA;;AAAA,IAAA,KAAA,CAAA,iBAAA,GAkFC,YAAM;AACxB,UAAI,KAAA,CAAA,KAAA,CAAJ,gBAAA,EAAiC;AAC/B,YAAI,KAAA,CAAJ,gBAAA,EAA2B;AACzB,cAAMR,QAAQ,GAAG,KAAA,CAAjB,SAAA;AACA,cAAMQ,UAAU,GAAG,KAAA,CAAnB,gBAAA;;AAEA,UAAA,KAAA,CAAA,KAAA,CAAA,gBAAA,CAAA,QAAA,EAAA,UAAA;AACD;AACF;AA1FgB,KAAA;;AAAA,IAAA,KAAA,CAAA,kBAAA,GA6FE,UAAA,QAAA,EAAA,UAAA,EAA0B;AAC7C,UAAI,CAAC,KAAA,CAAL,gBAAA,EAA4B;AAC1B;AACD;;AAED,UAAI,KAAA,CAAA,KAAA,CAAJ,iBAAA,EAAkC;AAChC,QAAA,KAAA,CAAA,KAAA,CAAA,iBAAA,CAAA,QAAA,EAAA,UAAA;AACD;;AAED,MAAA,KAAA,CAAA,gBAAA,GAAA,UAAA;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,QAAA;;AACA,MAAA,KAAA,CAAA,QAAA,CAAc;AAAER,QAAAA,QAAQ,EAARA;AAAF,OAAd;AAxGiB,KAAA;;AAAA,IAAA,KAAA,CAAA,kBAAA,GA2GE,YAAM;AACzB,UAAI,CAAC,KAAA,CAAL,gBAAA,EAA4B;AAC1B;AACD;;AAED,UAAMA,QAAQ,GAAG,KAAA,CAAjB,SAAA;AACA,UAAMQ,UAAU,GAAG,KAAA,CAAnB,gBAAA;;AAEA,UAAIR,QAAQ,KAARA,SAAAA,IAA0BA,QAAQ,KAAtC,IAAA,EAAiD;AAC/C,YAAI,KAAA,CAAA,KAAA,CAAJ,iBAAA,EAAkC;AAChC,UAAA,KAAA,CAAA,KAAA,CAAA,iBAAA,CAAA,QAAA,EAAA,UAAA;AACD;;AAED,QAAA,KAAA,CAAA,SAAA,GAAA,IAAA;AACA,QAAA,KAAA,CAAA,gBAAA,GAAA,IAAA;;AACA,QAAA,KAAA,CAAA,QAAA,CAAc;AAAEA,UAAAA,QAAQ,EAAE;AAAZ,SAAd;AACD;AA3HgB,KAAA;;AAAA,IAAA,KAAA,CAAA,aAAA,GA8HH,UAAA,KAAA,EAAW;AACzB,UAAI,CAAJ,KAAA,EAAY;AACV,QAAA,KAAA,CAAA,kBAAA;AACD;;AAED,MAAA,KAAA,CAAA,WAAA,GAAA,KAAA;AAnIiB,KAAA;;AAAA,IAAA,KAAA,CAAA,qBAAA,GAsIK,YAAM;AAC5B,UAAI,KAAA,CAAJ,WAAA,EAAsB;AACpB,QAAA,KAAA,CAAA,wBAAA;AACD;AAzIgB,KAAA;;AAAA,IAAA,KAAA,CAAA,wBAAA,GA4IQ,YAAM;AAC/B,UAAI,CAAC,KAAA,CAAL,gBAAA,EAA4B;AAC1B;AACD;;AAED,UAAMS,EAAE,GAAG,KAAA,CAAA,KAAA,CAAA,UAAA,CAAX,gBAAW,EAAX;;AAEA,UAAA,EAAA,EAAQ;AACN,YAAMC,SAAS,GAAf,EAAA;;AACA,YAAMC,aAAa,GAAG,KAAA,CAAA,KAAA,CAAtB,gBAAsB,EAAtB;;AAEAC,QAAAA,KAAK,CAALA,QAAAA,CAAAA,OAAAA,CAAuB,KAAA,CAAA,KAAA,CAAvBA,QAAAA,EAA4C,UAAA,KAAA,EAAA,UAAA,EAAuB;AACjE,cAAI,CAAJ,KAAA,EAAY;;AAEZ,cACEC,KAAK,CAALA,KAAAA,CAAAA,MAAAA,KAAAA,SAAAA,IACAA,KAAK,CAALA,KAAAA,CAAAA,GAAAA,KADAA,SAAAA,IAEAA,KAAK,CAALA,KAAAA,CAAAA,GAAAA,KAHF,SAAA,EAIE;AACA;AACD;;AAED,cAAMC,QAAQ,GACZD,KAAK,CAALA,GAAAA,KAAAA,SAAAA,IAA2BA,KAAK,CAALA,GAAAA,KAA3BA,IAAAA,GACIA,KAAK,CADTA,GAAAA,GADF,UAAA;;AAIA,cAAME,IAAI,GAAG,KAAA,CAAA,KAAA,CAAA,eAAA,CACX,KAAA,CAAA,gBAAA,CADW,QACX,CADW,EAAA,EAAA,EAGXF,KAAK,CAHP,KAAa,CAAb;;AAKA,cAAIE,IAAI,GAAR,aAAA,EAA0B;AACxBL,YAAAA,SAAS,CAATA,IAAAA,CAAe;AACbrC,cAAAA,GAAG,EADU,QAAA;AAEb0C,cAAAA,IAAI,EAFS,IAAA;AAGbC,cAAAA,KAAK,EAAEH,KAAK,CAACG;AAHA,aAAfN;AAKD;AA1BHE,SAAAA;;AA6BA,YAAIF,SAAS,CAAb,MAAA,EAAsB;AACpBA,UAAAA,SAAS,CAATA,IAAAA,CAAe,UAAA,CAAA,EAAA,CAAA,EAAA;AAAA,mBAAUO,CAAC,CAADA,IAAAA,GAASC,CAAC,CAApB,IAAA;AAAfR,WAAAA;AACA,cAAMV,QAAQ,GAAGU,SAAS,CAATA,CAAS,CAATA,CAAjB,GAAA;AACA,cAAMF,UAAU,GAAGE,SAAS,CAATA,CAAS,CAATA,CAAnB,KAAA;;AAEA,cAAI,KAAA,CAAA,SAAA,KAAJ,QAAA,EAAiC;AAC/B,YAAA,KAAA,CAAA,kBAAA;;AAEA,YAAA,KAAA,CAAA,kBAAA,CAAA,QAAA,EAAA,UAAA;AACD;AATH,SAAA,MAUO;AACL,UAAA,KAAA,CAAA,kBAAA;AACD;AA7CH,OAAA,MA8CO;AACL,QAAA,KAAA,CAAA,kBAAA;AACD;AAnMgB,KAAA;;AAAA,IAAA,KAAA,CAAA,cAAA,GAsMF,UAAA,GAAA,EAAS;AACxB,UAAMI,QAAQ,GAAd,GAAA;AACA,aAAO,KAAA,CAAA,gBAAA,CAAP,QAAO,CAAP;AAxMiB,KAAA;;AAGjB,IAAA,KAAA,CAAA,gBAAA,GAAA,EAAA;AACA,IAAA,KAAA,CAAA,SAAA,GAAA,IAAA;AACA,IAAA,KAAA,CAAA,gBAAA,GAAA,IAAA;AACA,IAAA,KAAA,CAAA,WAAA,GAAA,IAAA;AAEA,IAAA,KAAA,CAAA,KAAA,GAAA,QAAA,CAAA,EAAA,EAAkB,KAAA,CAAlB,SAAkB,EAAlB,EAAA;AAAoCd,MAAAA,QAAQ,EAAE;AAA9C,KAAA,CAAA;AARiB,WAAA,KAAA;AASlB;;;;SAEDC,iB,GAAAA,SAAAA,iBAAAA,GAAoB;AAClB,SAAA,KAAA,CAAA,UAAA,CAAA,EAAA,CAAA,YAAA,EAAuC,KAAvC,gBAAA;AACA,SAAA,KAAA,CAAA,UAAA,CAAA,EAAA,CAAA,2BAAA,EAEE,KAFF,qBAAA;AAIA,SAAA,KAAA,CAAA,UAAA,CAAA,EAAA,CAAA,WAAA,EAAsC,KAAtC,aAAA;AACA,SAAA,KAAA,CAAA,UAAA,CAAA,EAAA,CAAA,WAAA,EAAsC,KAAtC,iBAAA;AACD,G;;SAEDzC,qB,GAAAA,SAAAA,qBAAAA,CAAAA,SAAAA,EAAAA,SAAAA,EAA4C;AAC1C,QAAI,KAAA,KAAA,CAAA,YAAA,KAAJ,IAAA,EAAsC;AACpC,aACE,CAAC0C,YAAY,CAAC,KAAD,KAAA,EAAb,SAAa,CAAb,IACA,CAACA,YAAY,CACXjC,IAAI,CAAC,KAAD,KAAA,EAAa,CADN,UACM,CAAb,CADO,EAEXA,IAAI,CAAA,SAAA,EAAY,CAJpB,UAIoB,CAAZ,CAFO,CAFf;AAOD;;AAED,WACE,CAACiC,YAAY,CAAC,KAAD,KAAA,EAAb,SAAa,CAAb,IACA,CAACA,YAAY,CAAC,KAAD,KAAA,EAFf,SAEe,CAFf;AAID,G;;SAEDC,oB,GAAAA,SAAAA,oBAAAA,GAAuB;AACrB,SAAA,KAAA,CAAA,UAAA,CAAA,cAAA,CAAA,YAAA,EAAmD,KAAnD,gBAAA;AACA,SAAA,KAAA,CAAA,UAAA,CAAA,cAAA,CAAA,2BAAA,EAEE,KAFF,qBAAA;AAIA,SAAA,KAAA,CAAA,UAAA,CAAA,cAAA,CAAA,WAAA,EAAkD,KAAlD,aAAA;AACA,SAAA,KAAA,CAAA,UAAA,CAAA,cAAA,CAAA,WAAA,EAAkD,KAAlD,iBAAA;AAEA,SAAA,gBAAA,GAAA,IAAA;AACD,G;;SA2JD1C,M,GAAAA,SAAAA,MAAAA,GAAS;AAAA,QAAA,MAAA,GAAA,IAAA;;AACP,QAAM0D,gBAAgB,GAAG,KAAA,KAAA,CAAA,KAAA,IAAzB,SAAA;AACA,SAAA,gBAAA,GAAA,EAAA;AAEA,QAAMC,OAAO,GAAG,KAAK,CAAL,QAAA,CAAA,GAAA,CACd,KAAA,KAAA,CADc,QAAA,EAEd,UAAA,KAAA,EAAA,UAAA,EAAuB;AACrB,UAAI,CAAJ,KAAA,EAAY,OAAA,SAAA;;AACZ,UACEP,KAAK,CAALA,KAAAA,CAAAA,MAAAA,KAAAA,SAAAA,IACAA,KAAK,CAALA,KAAAA,CAAAA,GAAAA,KADAA,SAAAA,IAEAA,KAAK,CAALA,KAAAA,CAAAA,GAAAA,KAHF,SAAA,EAIE;AACA,eAAO,KAAK,CAAL,YAAA,CAAA,KAAA,EAA0B;AAC/BQ,UAAAA,WAAW,EAAE,MAAI,CAAJ,KAAA,CADkB,UAAA;AAE/BC,UAAAA,aAAa,EAAE,MAAI,CAFY,aAAA;AAG/BC,UAAAA,UAAU,EAAE,MAAI,CAAJ,KAAA,CAAW1B;AAHQ,SAA1B,CAAP;AAKD;;AAED,UAAM2B,MAAM,GACVX,KAAK,CAALA,KAAAA,CAAAA,MAAAA,KAAAA,SAAAA,GACIA,KAAK,CAALA,KAAAA,CADJA,MAAAA,GAEI;AAAEY,QAAAA,GAAG,EAAEZ,KAAK,CAALA,KAAAA,CAAP,GAAA;AAAwBa,QAAAA,GAAG,EAAEb,KAAK,CAALA,KAAAA,CAAYa;AAAzC,OAHN;AAKA,UAAMC,EAAE,GAAG,MAAI,CAAJ,KAAA,CAAA,cAAA,GACP,MAAI,CAAJ,KAAA,CAAA,UAAA,CAAA,oBAAA,CADO,MACP,CADO,GAEP,MAAI,CAAJ,KAAA,CAAA,UAAA,CAAA,uBAAA,CAFJ,MAEI,CAFJ;AAIA,UAAMC,UAAU,GAAG;AACjB3E,QAAAA,IAAI,EAAE0E,EAAE,CADS,CAAA;AAEjBzE,QAAAA,GAAG,EAAEyE,EAAE,CAAClD;AAFS,OAAnB;;AAQA,UACEoC,KAAK,CAALA,KAAAA,CAAAA,QAAAA,KAAAA,SAAAA,IACCA,KAAK,CAALA,KAAAA,CAAAA,KAAAA,KAAAA,SAAAA,IAAmCA,KAAK,CAALA,KAAAA,CAAAA,KAAAA,KAFtC,SAAA,EAGE;AACA,YAAMgB,QAAQ,GACZhB,KAAK,CAALA,KAAAA,CAAAA,QAAAA,KAAAA,SAAAA,GACIA,KAAK,CAALA,KAAAA,CADJA,QAAAA,GAEI;AAAEY,UAAAA,GAAG,EAAEZ,KAAK,CAALA,KAAAA,CAAP,KAAA;AAA0Ba,UAAAA,GAAG,EAAEb,KAAK,CAALA,KAAAA,CAAYiB;AAA3C,SAHN;AAKA,YAAMC,IAAI,GAAG,MAAI,CAAJ,KAAA,CAAA,cAAA,GACT,MAAI,CAAJ,KAAA,CAAA,UAAA,CAAA,oBAAA,CADS,QACT,CADS,GAET,MAAI,CAAJ,KAAA,CAAA,UAAA,CAAA,uBAAA,CAFJ,QAEI,CAFJ;AAIAH,QAAAA,UAAU,CAAVA,KAAAA,GAAmBG,IAAI,CAAJA,CAAAA,GAASJ,EAAE,CAA9BC,CAAAA;AACAA,QAAAA,UAAU,CAAVA,MAAAA,GAAoBG,IAAI,CAAJA,CAAAA,GAASJ,EAAE,CAA/BC,CAAAA;AACD;;AAED,UAAMI,WAAW,GAAG,MAAI,CAAJ,KAAA,CAAA,UAAA,CAAA,0BAAA,CAApB,MAAoB,CAApB;;AAMA,UAAMlB,QAAQ,GACZD,KAAK,CAALA,GAAAA,KAAAA,SAAAA,IAA2BA,KAAK,CAALA,GAAAA,KAA3BA,IAAAA,GACIA,KAAK,CADTA,GAAAA,GADF,UAAA;AAKA,MAAA,MAAI,CAAJ,gBAAA,CAAA,QAAA,IAAA,QAAA,CAAA;AACErC,QAAAA,CAAC,EAAEwD,WAAW,CADhB,CAAA;AAEEvD,QAAAA,CAAC,EAAEuD,WAAW,CAACvD;AAFjB,OAAA,EAAA,MAAA,CAAA;AAMA,aAAA,aACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,QAAA,GAAG,EADL,QAAA;AAEE,QAAA,KAAK,EAAA,QAAA,CAAA,EAAA,EAAA,OAAA,EAFP,UAEO,CAFP;AAGE,QAAA,SAAS,EAAEoC,KAAK,CAALA,KAAAA,CAAYoB;AAHzB,OAAA,EAKG,KAAK,CAAL,YAAA,CAAA,KAAA,EAA0B;AACzBC,QAAAA,MAAM,EAAEpB,QAAQ,KAAK,MAAI,CAAJ,KAAA,CADI,QAAA;AAEzBqB,QAAAA,cAAc,EAAE,MAAI,CAFK,cAAA;AAGzBC,QAAAA,aAAa,EAHY,QAAA;AAIzBf,QAAAA,WAAW,EAAE,MAAI,CAAJ,KAAA,CAJY,UAAA;AAKzBC,QAAAA,aAAa,EAAE,MAAI,CALM,aAAA;AAMzBC,QAAAA,UAAU,EAAE,MAAI,CAAJ,KAAA,CAAW1B;AANE,OAA1B,CALH,CADF;AAnEJ,KAAgB,CAAhB;AAsFA,WAAA,aAAO,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,KAAK,EAAEsB;AAAZ,KAAA,EAAP,OAAO,CAAP;AACD,G;;;CA5TkBlC,CAAyB1B,SAAzB0B,C;;AAAAA,gBAAAA,CAEZC,SAFYD,GAEA;AACjBE,EAAAA,UAAU,EAAEC,SAAS,CADJ,GAAA;AAEjBtC,EAAAA,KAAK,EAAEsC,SAAS,CAFC,GAAA;AAGjBC,EAAAA,eAAe,EAAED,SAAS,CAHT,IAAA;AAIjBE,EAAAA,UAAU,EAAEF,SAAS,CAJJ,GAAA;AAKjBG,EAAAA,YAAY,EAAEH,SAAS,CALN,IAAA;AAMjBI,EAAAA,gBAAgB,EAAEJ,SAAS,CANV,IAAA;AAOjBK,EAAAA,iBAAiB,EAAEL,SAAS,CAPX,IAAA;AAQjBM,EAAAA,iBAAiB,EAAEN,SAAS,CARX,IAAA;AASjBO,EAAAA,gBAAgB,EAAEP,SAAS,CATV,IAAA;AAUjBQ,EAAAA,cAAc,EAAER,SAAS,CAVR,IAAA;AAWjBS,EAAAA,SAAS,EAAET,SAAS,CAACU;AAXJ,CAFAb;AAAAA,gBAAAA,CAiBZc,YAjBYd,GAiBG;AACpBW,EAAAA,cAAc,EADM,KAAA;AAEpBC,EAAAA,SAAS,EAAE;AAFS,CAjBHZ;ACvBrB,IAAMnC,OAAK,GAAG;AACZC,EAAAA,KAAK,EADO,KAAA;AAEZC,EAAAA,MAAM,EAFM,KAAA;AAGZC,EAAAA,IAAI,EAHQ,KAAA;AAIZC,EAAAA,GAAG,EAJS,KAAA;AAMZC,EAAAA,MAAM,EANM,CAAA;AAOZC,EAAAA,OAAO,EAPK,CAAA;AAQZC,EAAAA,QAAQ,EAAE;AARE,CAAd;;AAYe,SAAA,yBAAA,CAAA,KAAA,EAAiB;AAC9B,SAAA,aACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,KAAK,EAAEP;AAAZ,GAAA,EAAA,aACE,KAAA,CAAA,aAAA,CAAA,gBAAA,EAAA,QAAA,CAAA,EAAA,EAAA,KAAA,EAAA;AAA6B,IAAA,SAAS,EAAA;AAAtC,GAAA,CAAA,CADF,CADF;AAKD;;ACrBM,IAAMuF,eAAe,GAAG,SAAlBA,eAAkB,CAAA,QAAA,EAAA,IAAA,EAAA;AAAA,MAAaC,SAAb,GAAA,IAAA,CAAA,SAAA;AAAA,SAC7B,IAAIC,QAAQ,CAARA,aAAAA,CAAJ,YAAA,CAAwC;AACtCC,IAAAA,IAAI,EAAE,SAAS,CAAT,MAAA,CAAiB,UAAA,GAAA,EAAA,KAAA,EAAmC;AAAA,UAA3Bf,GAA2B,GAAA,KAAA,CAA3BA,GAA2B;AAAA,UAAtBC,GAAsB,GAAA,KAAA,CAAtBA,GAAsB;AAAA,UAAA,YAAA,GAAA,KAAA,CAAjBe,MAAiB;AAAA,UAAjBA,MAAiB,GAAA,YAAA,KAAA,KAAA,CAAA,GAAR,CAAQ,GAAA,YAAA;AACxDC,MAAAA,GAAG,CAAHA,IAAAA,CAAS;AACPC,QAAAA,QAAQ,EAAE,IAAIJ,QAAQ,CAAZ,MAAA,CAAA,GAAA,EADH,GACG,CADH;AAEPE,QAAAA,MAAM,EAANA;AAFO,OAATC;AAIA,aAAA,GAAA;AALI,KAAA,EAAA,EAAA;AADgC,GAAxC,CAD6B;AAAxB,CAAA;;AAWA,IAAME,cAAc,GAAG,SAAjBA,cAAiB,CAAA,QAAA,EAAA,KAAA,EAAA;AAAA,MAAA,aAAA,GAAA,KAAA,CAAA,OAAA;AAAA,MAAaC,OAAb,GAAA,aAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,aAAA;AAAA,SAC5B,MAAM,CAAN,IAAA,CAAA,OAAA,EAAA,GAAA,CAAyB,UAAA,MAAA,EAAA;AAAA,WAAYN,QAAQ,CAARA,GAAAA,CAAAA,MAAAA,EAAqBM,OAAO,CAAxC,MAAwC,CAA5BN,CAAZ;AADG,GAC5B,CAD4B;AAAvB,CAAA;;ACXP,IAAMO,QAAQ,GAAd,cAAA;AACA,IAAMC,WAAW,GAAMD,QAAN,GAAjB,iBAAA;AACA,IAAME,QAAQ,GAAd,mDAAA;AAEA,IAAIC,QAAQ,GAAZ,IAAA;AAEA,IAAA,YAAA;AAEA,IAAA,qBAAA;;AAEA,IAAMC,cAAc,GAAG,IAAA,OAAA,CAAY,UAAA,OAAA,EAAa;AAC9CC,EAAAA,qBAAqB,GAArBA,OAAAA;AADF,CAAuB,CAAvB;;AAKA,IAAA,eAAA,GAAe,UAAA,gBAAA,EAAA,cAAA,EAAsC;AACnD,MAAI,CAAJ,QAAA,EAAe;AACbF,IAAAA,QAAQ,GAAGG,OAAO,CAAlBH,UAAkB,CAAlBA;AACD;;AAID,MAAI,CAAJ,gBAAA,EAAuB;AACrB,WAAA,cAAA;AACD;;AAED,MAAA,YAAA,EAAkB;AAChB,WAAA,YAAA;AACD;;AAEDI,EAAAA,YAAY,GAAG,IAAA,OAAA,CAAY,UAAA,OAAA,EAAA,MAAA,EAAqB;AAC9C,QAAI,OAAA,MAAA,KAAJ,WAAA,EAAmC;AACjCC,MAAAA,MAAM,CAAC,IAAA,KAAA,CAAPA,iDAAO,CAAD,CAANA;AACA;AACD;;AAED,QAAIC,MAAM,CAANA,MAAAA,IAAiBA,MAAM,CAANA,MAAAA,CAArB,IAAA,EAAyC;AACvCC,MAAAA,OAAO,CAACD,MAAM,CAANA,MAAAA,CAARC,IAAO,CAAPA;AACA;AACD;;AAED,QAAI,OAAOD,MAAM,CAAb,2BAAA,KAAJ,WAAA,EAA+D;AAC7DD,MAAAA,MAAM,CAAC,IAAA,KAAA,CAAPA,iCAAO,CAAD,CAANA;AACD;;AAEDC,IAAAA,MAAM,CAANA,2BAAAA,GAAqC,YAAM;AACzC,aAAOA,MAAM,CAAb,2BAAA;AACAC,MAAAA,OAAO,CAACD,MAAM,CAANA,MAAAA,CAARC,IAAO,CAAPA;AAFFD,KAAAA;;AAKA,QAAIE,OAAO,CAAPA,GAAAA,CAAAA,QAAAA,KAAJ,YAAA,EAA2C;AACzC,UAAIlF,MAAM,CAANA,IAAAA,CAAAA,gBAAAA,EAAAA,OAAAA,CAAAA,UAAAA,IAAoD,CAAxD,CAAA,EAA4D;AAC1D,YAAMmF,OAAO,GAAb,wHAAA;AAGAC,QAAAA,OAAO,CAAPA,KAAAA,CAAAA,OAAAA;AACA,cAAM,IAAA,KAAA,CAAN,OAAM,CAAN;AACD;AACF;;AAED,QAAMC,MAAM,GAAG,MAAM,CAAN,IAAA,CAAA,gBAAA,EAAA,MAAA,CACb,UAAA,CAAA,EAAA,GAAA,EAAA;AAAA,aAAeC,CAAf,GAAA,GAAeA,GAAf,GAAeA,GAAf,GAAeA,GAAYC,gBAAgB,CAA3C,GAA2C,CAA3C;AADa,KAAA,EAAf,EAAe,CAAf;AAKA,QAAMC,SAAS,GAAGC,cAAc,GAAA,0BAAA,GAAhC,EAAA;AAEAf,IAAAA,QAAQ,CAAA,KAAA,WAAA,GAAA,QAAA,GAAA,MAAA,GAAA,SAAA,EAEN,YAAA;AAAA,aACE,OAAOM,MAAM,CAAb,MAAA,KAAA,WAAA,IACAD,MAAM,CAAC,IAAA,KAAA,CAFT,8CAES,CAAD,CAFR;AAFFL,KAAQ,CAARA;AArCFI,GAAe,CAAfA;AA6CAF,EAAAA,qBAAqB,CAArBA,YAAqB,CAArBA;AAEA,SAAA,YAAA;AA9DF,CAAA;;ACbO,SAAA,IAAA,CAAA,CAAA,EAAA,GAAA,EAAA,GAAA,EAA2B;AAChC,MAAMc,CAAC,GAAGC,GAAG,GAAb,GAAA;AACA,SAAOC,CAAC,KAADA,GAAAA,GAAAA,CAAAA,GAAiB,CAAE,CAACA,CAAC,GAAF,GAAA,IAAD,CAAC,GAAF,CAAA,IAAD,CAAC,GAAxB,GAAA;AACD;;ICHoBC,MAAAA,GAAAA,aAAAA,YAAAA;AAiBnB,WAAA,MAAA,CAAA,GAAA,EAAA,GAAA,EAAsB;AACpB,QAAIG,KAAK,CAALA,GAAK,CAALA,IAAcA,KAAK,CAAvB,GAAuB,CAAvB,EAA8B;AAC5B,YAAM,IAAA,KAAA,CAAA,6BAAA,GAAA,GAAA,IAAA,GAAA,GAAA,GAAN,GAAM,CAAN;AACD;;AACD,SAAA,GAAA,GAAW,CAAX,GAAA;AACA,SAAA,GAAA,GAAW,CAAX,GAAA;AACD;;;;SAEDC,I,GAAAA,SAAAA,MAAAA,GAAO;AACL,WAAO,IAAA,MAAA,CAAW,KAAX,GAAA,EAAqBA,IAAI,CAAC,KAAD,GAAA,EAAW,CAAX,GAAA,EAAhC,GAAgC,CAAzB,CAAP;AACD,G;;;CA3BkBJ,E;;AAAAA,MAAAA,CACZC,OADYD,GACF,UAAA,CAAA,EAAO;AACtB,MAAInD,CAAC,YAAL,MAAA,EAAyB;AACvB,WAAA,CAAA;AACD;;AAED,MAAIqD,KAAK,CAALA,OAAAA,CAAJ,CAAIA,CAAJ,EAAsB;AACpB,WAAO,IAAA,MAAA,CAAWrD,CAAC,CAAZ,CAAY,CAAZ,EAAiBA,CAAC,CAAzB,CAAyB,CAAlB,CAAP;AACD;;AAED,MAAI,SAAA,CAAA,IAAc,SAAlB,CAAA,EAA8B;AAC5B,WAAO,IAAA,MAAA,CAAWA,CAAC,CAAZ,GAAA,EAAkBA,CAAC,CAA1B,GAAO,CAAP;AACD;;AAED,SAAA,CAAA;AACD,CAfkBmD;;ICIAK,SAAAA,GAAAA,aAAAA,YAAAA;AACnB,WAAA,SAAA,CAAA,QAAA,EAAA,OAAA,EAAA,OAAA,EAAwC;AACtC,SAAA,QAAA,GAAgBC,QAAQ,IAAxB,GAAA;AAEA,SAAA,QAAA,GAAgBC,OAAO,IAAvB,CAAA;AACA,SAAA,QAAA,GAAgBC,OAAO,IAAvB,EAAA;AAEA,SAAA,QAAA,GAAgB,CAAC,CAAD,QAAA,EAAhB,QAAgB,CAAhB;AAEA,SAAA,KAAA,GAAA,CAAA;AACA,SAAA,MAAA,GAAA,CAAA;AACA,SAAA,IAAA,GAAA,CAAA;AACA,SAAA,MAAA,GAAc,IAAA,MAAA,CAAA,CAAA,EAAd,CAAc,CAAd;AACA,SAAA,KAAA,GAAA,CAAA;AACD;;;;SAoDDK,S,GAAAA,SAAAA,SAAAA,CAAAA,IAAAA,EAAgB;AACd,WAAOH,IAAI,CAAJA,GAAAA,CAAAA,CAAAA,EAAP,IAAOA,CAAP;AACD,G;;SAEDI,S,GAAAA,SAAAA,SAAAA,CAAAA,KAAAA,EAAiB;AACf,WAAOJ,IAAI,CAAJA,GAAAA,CAAAA,KAAAA,IAAkBA,IAAI,CAA7B,GAAA;AACD,G;;SAEDK,O,GAAAA,SAAAA,OAAAA,CAAAA,MAAAA,EAAAA,SAAAA,EAA2B;AACzB,WAAO,IAAA,KAAA,CACL,KAAA,IAAA,CAAUC,MAAM,CAAhB,GAAA,EADK,SACL,CADK,EAEL,KAAA,IAAA,CAAUA,MAAM,CAAhB,GAAA,EAFF,SAEE,CAFK,CAAP;AAID,G;;SAEDC,S,GAAAA,SAAAA,SAAAA,CAAAA,KAAAA,EAAAA,SAAAA,EAA4B;AAC1B,WAAO,IAAA,MAAA,CACL,KAAA,IAAA,CAAUC,KAAK,CAAf,CAAA,EADK,SACL,CADK,EAEL,KAAA,IAAA,CAAUA,KAAK,CAAf,CAAA,EAFF,SAEE,CAFK,CAAP;AAID,G;;SAeDC,I,GAAAA,SAAAA,IAAAA,CAAAA,GAAAA,EAAAA,SAAAA,EAAqB;AACnB,WAAQ,CAAC,MAAD,GAAA,KAAeC,SAAS,IAAI,KAA7B,SAAC,IAAR,GAAA;AACD,G;;SAGDC,I,GAAAA,SAAAA,IAAAA,CAAAA,GAAAA,EAAAA,SAAAA,EAAqB;AACnB,QAAMhH,CAAC,GACJ,MAAMqG,IAAI,CAAX,EAAC,GAAiBA,IAAI,CAAJA,GAAAA,CAASA,IAAI,CAAJA,GAAAA,CAASA,IAAI,CAAJA,EAAAA,GAAAA,CAAAA,GAAerD,GAAG,GAAGqD,IAAI,CAAX,EAACrD,GADrD,GAC6BqD,CAATA,CADpB;AAEA,WAAQ,CAAC,MAAD,CAAA,KAAaU,SAAS,IAAI,KAA3B,SAAC,IAAR,GAAA;AACD,G;;SAEDE,I,GAAAA,SAAAA,IAAAA,CAAAA,CAAAA,EAAAA,SAAAA,EAAmB;AACjB,WAAQlH,CAAC,GAAF,GAACA,IAAYgH,SAAS,IAAI,KAA1B,SAAChH,IAAR,GAAA;AACD,G;;SAEDmH,I,GAAAA,SAAAA,IAAAA,CAAAA,CAAAA,EAAAA,SAAAA,EAAmB;AACjB,QAAMC,EAAE,GAAG,MAAOnH,CAAC,GAAF,GAACA,IAAY+G,SAAS,IAAI,KAA3C,SAAkB/G,CAAlB;AACA,WAAQ,MAAMqG,IAAI,CAAX,EAAC,GAAiBA,IAAI,CAAJA,IAAAA,CAAUA,IAAI,CAAJA,GAAAA,CAAUc,EAAE,GAAGd,IAAI,CAAV,EAACc,GAAtC,GAA4Bd,CAAVA,CAAjB,GAAR,EAAA;AACD,G;;SAEDe,a,GAAAA,SAAAA,aAAAA,CAAAA,MAAAA,EAAsB;AACpB,QAAMC,CAAC,GAAG,KAAA,OAAA,CAAV,MAAU,CAAV;AACA,WAAO,KAAA,WAAA,CAAA,IAAA,CAAsB,KAAA,KAAA,CAAA,IAAA,CAAA,CAAA,EAAA,OAAA,CAA2B,KAAxD,KAA6B,CAAtB,CAAP;AACD,G;;SAEDC,a,GAAAA,SAAAA,aAAAA,CAAAA,CAAAA,EAAiB;AACf,QAAMC,EAAE,GAAG,KAAA,WAAA,CAAA,IAAA,CAAA,CAAA,EAAA,OAAA,CAAiC,CAAC,KAA7C,KAAW,CAAX;;AACA,WAAO,KAAA,SAAA,CAAe,KAAA,KAAA,CAAA,GAAA,CAAtB,EAAsB,CAAf,CAAP;AACD,G;;;;wBAjHa;AACZ,aAAO,KAAP,QAAA;AACD,K;sBAEWnB,I,EAAM;AAChB,WAAA,QAAA,GAAA,IAAA;AACA,WAAA,IAAA,GAAYC,IAAI,CAAJA,GAAAA,CAAS,KAATA,IAAAA,EAAZ,IAAYA,CAAZ;AACD;;;wBAEa;AACZ,aAAO,KAAP,QAAA;AACD,K;sBAEWD,I,EAAM;AAChB,WAAA,QAAA,GAAA,IAAA;AACA,WAAA,IAAA,GAAYC,IAAI,CAAJA,GAAAA,CAAS,KAATA,IAAAA,EAAZ,IAAYA,CAAZ;AACD;;;wBAEe;AACd,aAAO,KAAA,QAAA,GAAgB,KAAvB,KAAA;AACD;;;wBAEiB;AAChB,aAAO,IAAA,KAAA,CAAA,CAAA,EAAP,CAAO,CAAP;AACD;;;wBAEU;AACT,aAAO,IAAA,KAAA,CAAU,KAAV,KAAA,EAAsB,KAA7B,MAAO,CAAP;AACD;;;wBAEa;AACZ,aAAQ,CAAC,KAAD,KAAA,GAAcA,IAAI,CAAnB,EAAC,GAAR,GAAA;AACD,K;sBAEWC,O,EAAS;AACnB,WAAA,KAAA,GAAc,CAACP,IAAI,CAAA,OAAA,EAAU,CAAV,GAAA,EAAL,GAAK,CAAL,GAA4BM,IAAI,CAAjC,EAAC,GAAd,GAAA;AACD;;;wBAEU;AACT,aAAO,KAAP,KAAA;AACD,K;sBAEQD,I,EAAM;AACb,UAAMG,KAAK,GAAGF,IAAI,CAAJA,GAAAA,CAASA,IAAI,CAAJA,GAAAA,CAAAA,IAAAA,EAAe,KAAxBA,OAASA,CAATA,EAAuC,KAArD,OAAcA,CAAd;AACA,WAAA,KAAA,GAAA,KAAA;AACA,WAAA,KAAA,GAAa,KAAA,SAAA,CAAb,KAAa,CAAb;AACA,WAAA,QAAA,GAAgBA,IAAI,CAAJA,KAAAA,CAAhB,KAAgBA,CAAhB;AACA,WAAA,YAAA,GAAoBE,KAAK,GAAG,KAA5B,QAAA;AACD;;;wBAwBO;AACN,aAAO,KAAA,IAAA,CAAU,KAAA,MAAA,CAAjB,GAAO,CAAP;AACD;;;wBAEO;AACN,aAAO,KAAA,IAAA,CAAU,KAAA,MAAA,CAAjB,GAAO,CAAP;AACD;;;wBAEW;AACV,aAAO,IAAA,KAAA,CAAU,KAAV,CAAA,EAAkB,KAAzB,CAAO,CAAP;AACD;;;;CAlGkBP,E;;ICDAwB,GAAAA,GAAAA,aAAAA,YAAAA;AACnB,WAAA,GAAA,CAAA,QAAA,EAAsB;AAGpB,SAAA,QAAA,GAAA,KAAA;AACA,SAAA,QAAA,GAAA,KAAA;AACA,SAAA,UAAA,GAAkB,IAAA,SAAA,CAAcvB,QAAQ,IAAxC,GAAkB,CAAlB;AACD;;;;SAEDwB,O,GAAAA,SAAAA,OAAAA,CAAAA,MAAAA,EAAAA,IAAAA,EAAAA,OAAAA,EAA+B;AAC7B,SAAA,UAAA,CAAA,MAAA,GAAyB9B,MAAM,CAANA,OAAAA,CAAzB,MAAyBA,CAAzB;AACA,SAAA,UAAA,CAAA,IAAA,GAAuB,CAAvB,IAAA;AACA,SAAA,UAAA,CAAA,OAAA,GAA0B,CAA1B,OAAA;AACA,SAAA,QAAA,GAAA,IAAA;AACD,G;;SAED+B,W,GAAAA,SAAAA,WAAAA,CAAAA,KAAAA,EAAAA,MAAAA,EAA2B;AACzB,SAAA,UAAA,CAAA,KAAA,GAAA,KAAA;AACA,SAAA,UAAA,CAAA,MAAA,GAAA,MAAA;AACA,SAAA,QAAA,GAAA,IAAA;AACD,G;;SAEDC,sB,GAAAA,SAAAA,sBAAAA,CAAAA,IAAAA,EAAAA,mBAAAA,EAAkD;AAChD,SAAA,KAAA,GAAA,IAAA;AACA,SAAA,oBAAA,GAAA,mBAAA;AACD,G;;SAEDC,U,GAAAA,SAAAA,UAAAA,GAAa;AACX,WAAO,KAAA,QAAA,IAAiB,KAAxB,QAAA;AACD,G;;SAEDC,O,GAAAA,SAAAA,OAAAA,GAAU;AACR,WAAO,KAAP,QAAA;AACD,G;;SAGDC,uB,GAAAA,SAAAA,uBAAAA,CAAAA,QAAAA,EAAkC;AAChC,WAAO,KAAA,UAAA,CAAA,aAAA,CAA8BnC,MAAM,CAANA,OAAAA,CAArC,QAAqCA,CAA9B,CAAP;AACD,G;;SAMDoC,oB,GAAAA,SAAAA,oBAAAA,CAAAA,QAAAA,EAA+B;AAC7B,QAAI,KAAJ,oBAAA,EAA+B;AAC7B,UAAMhF,MAAM,GAAG,IAAI,KAAA,KAAA,CAAJ,MAAA,CAAsBiF,QAAQ,CAA9B,GAAA,EAAoCA,QAAQ,CAA3D,GAAe,CAAf;AACA,aAAO,KAAA,oBAAA,CAAA,oBAAA,CAAP,MAAO,CAAP;AACD;;AACD,WAAO,KAAA,uBAAA,CAAP,QAAO,CAAP;AACD,G;;SAGDC,0B,GAAAA,SAAAA,0BAAAA,CAAAA,QAAAA,EAAqC;AACnC,QAAI,KAAJ,oBAAA,EAA+B;AAC7B,UAAMlF,MAAM,GAAG,IAAI,KAAA,KAAA,CAAJ,MAAA,CAAsBiF,QAAQ,CAA9B,GAAA,EAAoCA,QAAQ,CAA3D,GAAe,CAAf;AACA,aAAO,KAAA,oBAAA,CAAA,0BAAA,CAAP,MAAO,CAAP;AACD;;AAED,QAAM9E,EAAE,GAAG,KAAA,uBAAA,CAAX,QAAW,CAAX;AACAA,IAAAA,EAAE,CAAFA,CAAAA,IACE,KAAA,UAAA,CAAA,SAAA,GAA4BmD,IAAI,CAAJA,KAAAA,CAAWnD,EAAE,CAAFA,CAAAA,GAAO,KAAA,UAAA,CADhDA,SAC8BmD,CAD9BnD;AAGAA,IAAAA,EAAE,CAAFA,CAAAA,IAAQ,KAAA,UAAA,CAAA,KAAA,GAARA,CAAAA;AACAA,IAAAA,EAAE,CAAFA,CAAAA,IAAQ,KAAA,UAAA,CAAA,MAAA,GAARA,CAAAA;AAEA,WAAA,EAAA;AACD,G;;SAGDgF,0B,GAAAA,SAAAA,0BAAAA,CAAAA,IAAAA,EAAiC;AAC/B,QAAI,KAAJ,oBAAA,EAA+B;AAC7B,UAAMnF,MAAM,GAAG,KAAA,oBAAA,CAAA,0BAAA,CAAf,IAAe,CAAf;AACA,aAAO;AAAEC,QAAAA,GAAG,EAAED,MAAM,CAAb,GAAOA,EAAP;AAAqBE,QAAAA,GAAG,EAAEF,MAAM,CAANA,GAAAA;AAA1B,OAAP;AACD;;AAED,QAAMoF,IAAI,GAAA,QAAA,CAAA,EAAA,EAAV,IAAU,CAAV;;AACAA,IAAAA,IAAI,CAAJA,CAAAA,IAAU,KAAA,UAAA,CAAA,KAAA,GAAVA,CAAAA;AACAA,IAAAA,IAAI,CAAJA,CAAAA,IAAU,KAAA,UAAA,CAAA,MAAA,GAAVA,CAAAA;AACA,QAAMC,KAAK,GAAG,KAAA,UAAA,CAAA,aAAA,CAA8BC,KAAK,CAALA,OAAAA,CAA5C,IAA4CA,CAA9B,CAAd;AAEAD,IAAAA,KAAK,CAALA,GAAAA,IAAa,MAAM/B,IAAI,CAAJA,KAAAA,CAAW+B,KAAK,CAALA,GAAAA,GAA9BA,GAAmB/B,CAAnB+B;AACA,WAAA,KAAA;AACD,G;;SAEDE,Q,GAAAA,SAAAA,QAAAA,GAAW;AACT,WAAO,KAAA,UAAA,CAAP,KAAA;AACD,G;;SAEDC,S,GAAAA,SAAAA,SAAAA,GAAY;AACV,WAAO,KAAA,UAAA,CAAP,MAAA;AACD,G;;SAEDC,O,GAAAA,SAAAA,OAAAA,GAAU;AACR,WAAO,KAAA,UAAA,CAAP,IAAA;AACD,G;;SAEDC,S,GAAAA,SAAAA,SAAAA,GAAY;AACV,QAAML,KAAK,GAAG,KAAA,UAAA,CAAA,aAAA,CAA8B;AAAErI,MAAAA,CAAC,EAAH,CAAA;AAAQC,MAAAA,CAAC,EAAE;AAAX,KAA9B,CAAd;AAEA,WAAA,KAAA;AACD,G;;SAED0I,S,GAAAA,SAAAA,SAAAA,CAAAA,OAAAA,EAAAA,WAAAA,EAAgC;AAC9B,QAAMC,IAAI,GAAIC,OAAO,IAAIA,OAAO,CAAnB,CAAmB,CAAlBA,IAAd,CAAA;AACA,QAAMC,IAAI,GAAID,OAAO,IAAIA,OAAO,CAAnB,CAAmB,CAAlBA,IAAd,CAAA;AACA,QAAME,IAAI,GAAIF,OAAO,IAAIA,OAAO,CAAnB,CAAmB,CAAlBA,IAAd,CAAA;AACA,QAAMG,IAAI,GAAIH,OAAO,IAAIA,OAAO,CAAnB,CAAmB,CAAlBA,IAAd,CAAA;;AAEA,QACE,KAAA,QAAA,KAAA,IAAA,GAAA,IAAA,GAAA,CAAA,IACA,KAAA,SAAA,KAAA,IAAA,GAAA,IAAA,GAFF,CAAA,EAGE;AACA,UAAMI,aAAa,GAAG,KAAA,UAAA,CAAA,aAAA,CACpB,KAAK,CAAL,OAAA,CAAc;AACZjJ,QAAAA,CAAC,EAAEgJ,IAAI,GAAG,KAAA,QAAA,KADE,CAAA;AAEZ/I,QAAAA,CAAC,EAAE2I,IAAI,GAAG,KAAA,SAAA,KAAmB;AAFjB,OAAd,CADoB,CAAtB;AAMA,UAAMM,iBAAiB,GAAG,KAAA,UAAA,CAAA,aAAA,CACxB,KAAK,CAAL,OAAA,CAAc;AACZlJ,QAAAA,CAAC,EAAE,KAAA,QAAA,KAAA,CAAA,GADS,IAAA;AAEZC,QAAAA,CAAC,EAAE,KAAA,SAAA,KAAA,CAAA,GAAuB8I;AAFd,OAAd,CADwB,CAA1B;AAOA,UAAII,GAAG,GAAG,CACRF,aAAa,CADL,GAAA,EAERA,aAAa,CAFL,GAAA,EAGRC,iBAAiB,CAHT,GAAA,EAIRA,iBAAiB,CAJT,GAAA,EAKRA,iBAAiB,CALT,GAAA,EAMRD,aAAa,CANL,GAAA,EAORA,aAAa,CAPL,GAAA,EAQRC,iBAAiB,CARnB,GAAU,CAAV;;AAWA,UAAA,WAAA,EAAiB;AACfC,QAAAA,GAAG,GAAG,GAAG,CAAH,GAAA,CAAQ,UAAA,CAAA,EAAA;AAAA,iBAAO7C,IAAI,CAAJA,KAAAA,CAAWjB,CAAC,GAAZiB,WAAAA,IAAP,WAAA;AAAd6C,SAAM,CAANA;AACD;;AACD,aAAA,GAAA;AACD;;AAED,WAAO,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,EAAP,CAAO,CAAP;AACD,G;;;CAhJkB1B,E;;ACLN,SAAA,GAAA,CAAA,QAAA,EAAuB;AACpC,MAAI1C,MAAM,CAAV,qBAAA,EAAkC;AAChC,WAAOA,MAAM,CAANA,qBAAAA,CAAP,QAAOA,CAAP;AACD;;AAED,MAAMqE,SAAS,GACbrE,MAAM,CAANA,2BAAAA,IAAsCA,MAAM,CAD9C,wBAAA;AAGA,SAAOqE,SAAS,GACZA,SAAS,CADG,QACH,CADG,GAEZrE,MAAM,CAANA,UAAAA,CAAAA,QAAAA,EAA4B,MAFhC,EAEIA,CAFJ;AAGD;;ACXD,IAAMsE,IAAI,GAAG/C,IAAI,CAAJA,IAAAA,GAAYA,IAAI,CAAhBA,IAAAA,GAAwB,UAAA,CAAA,EAAA;AAAA,SAAOA,IAAI,CAAJA,GAAAA,CAAAA,CAAAA,IAAcA,IAAI,CAAzB,GAAA;AAArC,CAAA;;ACEe,SAAA,IAAA,CAAA,GAAA,EAAA,EAAA,EAAuB;AACpC,SAAO,MAAM,CAAN,IAAA,CAAA,GAAA,EAAA,MAAA,CAAwB,UAAA,MAAA,EAAA,GAAA,EAAiB;AAC9C,QAAIgD,EAAE,CAACC,GAAG,CAAV,GAAU,CAAJ,CAAN,EAAkB;AACdC,MAAAA,MAAM,CAANA,GAAM,CAANA,GAAcD,GAAG,CAAjBC,GAAiB,CAAjBA;AACH;;AACD,WAAA,MAAA;AAJK,GAAA,EAAP,EAAO,CAAP;AAMD;;ACTD,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAAA,GAAA,EAAS;AAEvB,MAAIC,GAAG,KAAHA,IAAAA,IAAgB,OAAA,GAAA,KAApB,QAAA,EAA6C;AAC3C,QAAI3J,MAAM,CAANA,IAAAA,CAAAA,GAAAA,EAAAA,MAAAA,KAAJ,CAAA,EAAmC;AACjC,aAAA,IAAA;AACD;AAHH,GAAA,MAIO,IAAI2J,GAAG,KAAHA,IAAAA,IAAgBA,GAAG,KAAnBA,SAAAA,IAAqCA,GAAG,KAA5C,EAAA,EAAqD;AAE1D,WAAA,IAAA;AACD;;AACD,SAAA,KAAA;AAVF,CAAA;;ACAA,SAAA,YAAA,CAAA,KAAA,EAA6B;AAC3B,SAAO,CAAC,CAAD,KAAA,IAAW,OAAA,KAAA,KAAlB,QAAA;AACD;;AAED,IAAMC,cAAc,GAAG5J,MAAM,CAANA,SAAAA,CAAvB,QAAA;;AAEe,SAAA,QAAA,CAAA,KAAA,EAAyB;AACtC,MAAM6J,SAAS,GAAf,iBAAA;AACA,SACE,OAAA,KAAA,KAAA,QAAA,IACCC,YAAY,CAAZA,KAAY,CAAZA,IAAuBF,cAAc,CAAdA,IAAAA,CAAAA,KAAAA,MAF1B,SAAA;AAID;;ACXD,IAAIG,oBAAoB,GAAxB,IAAA;;AAEe,SAAA,aAAA,GAAyB;AACtC,MAAA,oBAAA,EAA0B;AACxB,WAAA,oBAAA;AACD;;AAED,MAAI,OAAA,SAAA,KAAJ,WAAA,EAAsC;AACpC,QAAMC,UAAU,GAAGC,SAAS,CAATA,SAAAA,CAAAA,OAAAA,CAAAA,MAAAA,IAAsC,CAAzD,CAAA;AACA,QAAMC,SAAS,GAAGD,SAAS,CAATA,SAAAA,CAAAA,OAAAA,CAAAA,SAAAA,IAAyC,CAA3D,CAAA;AACA,QAAME,OAAO,GAAGF,SAAS,CAATA,SAAAA,CAAAA,WAAAA,GAAAA,OAAAA,CAAAA,IAAAA,IAAkD,CAAlE,CAAA;AAEA,QAAIG,QAAQ,GAAGH,SAAS,CAATA,SAAAA,CAAAA,OAAAA,CAAAA,QAAAA,IAAwC,CAAvD,CAAA;AACA,QAAII,QAAQ,GAAGJ,SAAS,CAATA,SAAAA,CAAAA,OAAAA,CAAAA,QAAAA,IAAwC,CAAvD,CAAA;;AAEA,QAAIG,QAAQ,IAAZ,QAAA,EAA0B;AACxBC,MAAAA,QAAQ,GAARA,KAAAA;AACD;;AAED,QAAID,QAAQ,IAAZ,OAAA,EAAyB;AACvBA,MAAAA,QAAQ,GAARA,KAAAA;AACD;;AAEDL,IAAAA,oBAAoB,GAAG;AACrBC,MAAAA,UAAU,EADW,UAAA;AAErBE,MAAAA,SAAS,EAFY,SAAA;AAGrBC,MAAAA,OAAO,EAHc,OAAA;AAIrBC,MAAAA,QAAQ,EAJa,QAAA;AAKrBC,MAAAA,QAAQ,EAARA;AALqB,KAAvBN;AAOA,WAAA,oBAAA;AACD;;AAEDA,EAAAA,oBAAoB,GAAG;AACrBK,IAAAA,QAAQ,EADa,IAAA;AAErBJ,IAAAA,UAAU,EAFW,KAAA;AAGrBE,IAAAA,SAAS,EAHY,KAAA;AAIrBC,IAAAA,OAAO,EAJc,KAAA;AAKrBE,IAAAA,QAAQ,EAAE;AALW,GAAvBN;AAQA,SAAA,oBAAA;AACD;;AC1CD,IAAMO,UAAU,GAAG,SAAbA,UAAa,CAAA,EAAA,EAAA;AAAA,SAAQC,QAAQ,CAARA,SAAAA,CAAAA,QAAAA,CAAAA,IAAAA,CAAR,EAAQA,CAAR;AAAnB,CAAA;;AAMe,SAAA,aAAA,CAAA,GAAA,EAA4B;AACzC,MAAI,CAAA,GAAA,IAAQ,OAAA,GAAA,KAAZ,QAAA,EAAqC;AACnC,WAAA,KAAA;AACD;;AAED,MAAMC,KAAK,GACT,OAAOhB,GAAG,CAAV,WAAA,KAAA,UAAA,GACIxJ,MAAM,CAANA,cAAAA,CADJ,GACIA,CADJ,GAEIA,MAAM,CAHZ,SAAA;;AAKA,MAAIwK,KAAK,KAAT,IAAA,EAAoB;AAClB,WAAA,IAAA;AACD;;AAED,MAAMC,WAAW,GAAGD,KAAK,CAAzB,WAAA;AAEA,SACE,OAAA,WAAA,KAAA,UAAA,IACAC,WAAW,YADX,WAAA,IAEAH,UAAU,CAAVA,WAAU,CAAVA,KAA4BA,UAAU,CAHxC,MAGwC,CAHxC;AAKD;;AC5Bc,SAAA,gBAAA,CAAA,MAAA,EAAA,MAAA,EAAA,GAAA,EAA+C;AAC5D,MAAII,MAAM,IAAV,MAAA,EAAsB;AACpB,SAAK,IAAI9K,CAAC,GAAV,CAAA,EAAgBA,CAAC,KAAK8K,MAAM,CAA5B,MAAA,EAAqC,EAArC,CAAA,EAA0C;AACxC,UAAInE,IAAI,CAAJA,GAAAA,CAASmE,MAAM,CAANA,CAAM,CAANA,GAAYC,MAAM,CAA3BpE,CAA2B,CAA3BA,IAAJ,GAAA,EAA2C;AACzC,eAAA,KAAA;AACD;AACF;;AACD,WAAA,IAAA;AACD;;AACD,SAAA,KAAA;AACD;;ACRD,SAAA,iBAAA,GAA6B;AAC3B,MAAIqE,gBAAgB,GAApB,KAAA;;AAEA,MAAI;AACF,QAAMtG,OAAO,GAAG,MAAM,CAAN,cAAA,CAAA,EAAA,EAAA,SAAA,EAAqC;AACnDuG,MAAAA,GADmD,EAAA,SAAA,GAAA,GAC7C;AACJD,QAAAA,gBAAgB,GAAhBA,IAAAA;AACD;AAHkD,KAArC,CAAhB;AAMA5F,IAAAA,MAAM,CAANA,gBAAAA,CAAAA,MAAAA,EAAAA,OAAAA,EAAAA,OAAAA;AACAA,IAAAA,MAAM,CAANA,mBAAAA,CAAAA,MAAAA,EAAAA,OAAAA,EAAAA,OAAAA;AARF,GAAA,CASE,OAAA,GAAA,EAAY;AACZ4F,IAAAA,gBAAgB,GAAhBA,KAAAA;AACD;;AAED,SAAA,gBAAA;AACD;;AAEc,SAAA,uBAAA,CAAA,OAAA,EAAA,SAAA,EAAA,IAAA,EAAA,OAAA,EAKb;AACAE,EAAAA,OAAO,CAAPA,gBAAAA,CAAAA,SAAAA,EAAAA,IAAAA,EAGEC,iBAAiB,KACb;AACEC,IAAAA,OAAO,EADT,OAAA;AAEEC,IAAAA,OAAO,EAAE;AAFX,GADa,GAHnBH,OAAAA;AAUD;;ACvBD,IAAII,SAAS,GAAG,CAAC,EAAE,OAAA,MAAA,KAAA,WAAA,IACjBlG,MAAM,CADW,QAAA,IAEjBA,MAAM,CAANA,QAAAA,CAFF,aAAiB,CAAjB;;AAKA,IAAA,OAAA;;AACA,IAAA,SAAA,EAAe;AACbmG,EAAAA,OAAO,GAAPA,MAAAA;AADF,CAAA,MAEO,IAAI,OAAA,IAAA,KAAJ,WAAA,EAAiC;AACtCA,EAAAA,OAAO,GAAPA,IAAAA;AADK,CAAA,MAEA;AACLA,EAAAA,OAAO,GAAPA,SAAAA;AACD;;AAED,IAAIC,WAAW,GAAG,OAAA,QAAA,KAAA,WAAA,IAAmCC,QAAQ,CAA7D,WAAA;AACA,IAAIC,aAAa,GAAjB,KAAA;;AAEA,IAAIJ,SAAS,IAAI,CAAjB,WAAA,EAA+B;AAC7B,MAAIK,YAAY,GAAI,YAAY;AAC9B,QAAIC,GAAG,GAAGL,OAAO,CAAPA,qBAAAA,IACRA,OAAO,CADCA,wBAAAA,IAERA,OAAO,CAFCA,2BAAAA,IAGR,UAAA,EAAA,EAAc;AACZ,aAAOA,OAAO,CAAPA,UAAAA,CAAAA,EAAAA,EAAP,EAAOA,CAAP;AAJJ,KAAA;;AAMA,WAAO,UAAA,EAAA,EAAc;AACnB,aAAOK,GAAG,CAAV,EAAU,CAAV;AADF,KAAA;AAPF,GAAoB,EAApB;;AAYA,MAAIC,WAAW,GAAI,YAAY;AAC7B,QAAIC,MAAM,GAAGP,OAAO,CAAPA,oBAAAA,IACXA,OAAO,CADIA,uBAAAA,IAEXA,OAAO,CAFIA,0BAAAA,IAGXA,OAAO,CAHT,YAAA;AAIA,WAAO,UAAA,EAAA,EAAc;AACnB,aAAOO,MAAM,CAAb,EAAa,CAAb;AADF,KAAA;AALF,GAAmB,EAAnB;;AAUA,MAAIC,aAAa,GAAG,SAAhBA,aAAgB,CAAA,OAAA,EAAmB;AACrC,QAAIC,QAAQ,GAAGd,OAAO,CAAtB,kBAAA;AAAA,QACEe,MAAM,GAAGD,QAAQ,CADnB,iBAAA;AAAA,QAEEE,QAAQ,GAAGF,QAAQ,CAFrB,gBAAA;AAAA,QAGEG,WAAW,GAAGF,MAAM,CAHtB,iBAAA;AAIAC,IAAAA,QAAQ,CAARA,UAAAA,GAAsBA,QAAQ,CAA9BA,WAAAA;AACAA,IAAAA,QAAQ,CAARA,SAAAA,GAAqBA,QAAQ,CAA7BA,YAAAA;AACAC,IAAAA,WAAW,CAAXA,KAAAA,CAAAA,KAAAA,GAA0BF,MAAM,CAANA,WAAAA,GAAAA,CAAAA,GAA1BE,IAAAA;AACAA,IAAAA,WAAW,CAAXA,KAAAA,CAAAA,MAAAA,GAA2BF,MAAM,CAANA,YAAAA,GAAAA,CAAAA,GAA3BE,IAAAA;AACAF,IAAAA,MAAM,CAANA,UAAAA,GAAoBA,MAAM,CAA1BA,WAAAA;AACAA,IAAAA,MAAM,CAANA,SAAAA,GAAmBA,MAAM,CAAzBA,YAAAA;AAVF,GAAA;;AAaA,MAAIG,aAAa,GAAG,SAAhBA,aAAgB,CAAA,OAAA,EAAmB;AACrC,WAAOlB,OAAO,CAAPA,WAAAA,IAAuBA,OAAO,CAAPA,cAAAA,CAAvBA,KAAAA,IACLA,OAAO,CAAPA,YAAAA,IAAwBA,OAAO,CAAPA,cAAAA,CAD1B,MAAA;AADF,GAAA;;AAKA,MAAImB,cAAc,GAAG,SAAjBA,cAAiB,CAAA,CAAA,EAAa;AAChC,QAAInB,OAAO,GAAX,IAAA;AACAa,IAAAA,aAAa,CAAbA,IAAa,CAAbA;AACA,QAAI,KAAJ,aAAA,EAAwBF,WAAW,CAAC,KAAZA,aAAW,CAAXA;AACxB,SAAA,aAAA,GAAqBF,YAAY,CAAC,YAAY;AAC5C,UAAIS,aAAa,CAAjB,OAAiB,CAAjB,EAA4B;AAC1BlB,QAAAA,OAAO,CAAPA,cAAAA,CAAAA,KAAAA,GAA+BA,OAAO,CAAtCA,WAAAA;AACAA,QAAAA,OAAO,CAAPA,cAAAA,CAAAA,MAAAA,GAAgCA,OAAO,CAAvCA,YAAAA;;AACAA,QAAAA,OAAO,CAAPA,mBAAAA,CAAAA,OAAAA,CAAoC,UAAA,EAAA,EAAc;AAChDvB,UAAAA,EAAE,CAAFA,IAAAA,CAAAA,OAAAA,EAAAA,CAAAA;AADFuB,SAAAA;AAGD;AAPH,KAAiC,CAAjC;AAJF,GAAA;;AAgBA,MAAIoB,SAAS,GAAb,KAAA;AAAA,MAEEC,cAAc,GAFhB,EAAA;AAAA,MAGEC,mBAAmB,GAHrB,gBAAA;AAAA,MAIEC,WAAW,GAAG,kBAAA,KAAA,CAJhB,GAIgB,CAJhB;AAAA,MAKEC,WAAW,GAAG,uEAAA,KAAA,CALhB,GAKgB,CALhB;AAAA,MAQEC,GAAG,GARL,EAAA;;AAUA,MAAA,SAAA,EAAe;AACb,QAAIC,GAAG,GAAGnB,QAAQ,CAARA,aAAAA,CAAV,aAAUA,CAAV;;AACA,QAAImB,GAAG,CAAHA,KAAAA,CAAAA,aAAAA,KAAJ,SAAA,EAA2C;AACzCN,MAAAA,SAAS,GAATA,IAAAA;AACD;;AAED,QAAIA,SAAS,KAAb,KAAA,EAAyB;AACvB,WAAK,IAAItM,CAAC,GAAV,CAAA,EAAgBA,CAAC,GAAGyM,WAAW,CAA/B,MAAA,EAAwCzM,CAAxC,EAAA,EAA6C;AAC3C,YAAI4M,GAAG,CAAHA,KAAAA,CAAUH,WAAW,CAAXA,CAAW,CAAXA,GAAVG,eAAAA,MAAJ,SAAA,EAA+D;AAC7DD,UAAAA,GAAG,GAAGF,WAAW,CAAjBE,CAAiB,CAAjBA;AAEAJ,UAAAA,cAAc,GAAG,MAAMI,GAAG,CAAT,WAAMA,EAAN,GAAjBJ,GAAAA;AACAC,UAAAA,mBAAmB,GAAGE,WAAW,CAAjCF,CAAiC,CAAjCA;AACAF,UAAAA,SAAS,GAATA,IAAAA;AACA;AACD;AACF;AACF;AACF;;AAED,MAAIO,aAAa,GAAjB,YAAA;AACA,MAAIC,kBAAkB,GAAG,MAAA,cAAA,GAAA,YAAA,GAAA,aAAA,GAAzB,+CAAA;AAKA,MAAIC,cAAc,GAAGR,cAAc,GAAdA,iBAAAA,GAAAA,aAAAA,GAArB,IAAA;AAID;;AAED,IAAIS,YAAY,GAAG,SAAfA,YAAe,GAAY;AAC7B,MAAI,CAAJ,aAAA,EAAoB;AAElB,QAAIC,GAAG,GAAG,CAACH,kBAAkB,GAAA,kBAAA,GAAnB,EAAA,IAAA,qBAAA,IAEPC,cAAc,GAAA,cAAA,GAFP,EAAA,IAAA,oCAAA,GAAV,6SAAA;AAAA,QAKEG,IAAI,GAAGzB,QAAQ,CAARA,IAAAA,IAAiBA,QAAQ,CAARA,oBAAAA,CAAAA,MAAAA,EAL1B,CAK0BA,CAL1B;AAAA,QAME9M,KAAK,GAAG8M,QAAQ,CAARA,aAAAA,CANV,OAMUA,CANV;AAQA9M,IAAAA,KAAK,CAALA,IAAAA,GAAAA,UAAAA;;AACA,QAAIA,KAAK,CAAT,UAAA,EAAsB;AACpBA,MAAAA,KAAK,CAALA,UAAAA,CAAAA,OAAAA,GAAAA,GAAAA;AADF,KAAA,MAEO;AACLA,MAAAA,KAAK,CAALA,WAAAA,CAAkB8M,QAAQ,CAARA,cAAAA,CAAlB9M,GAAkB8M,CAAlB9M;AACD;;AAEDuO,IAAAA,IAAI,CAAJA,WAAAA,CAAAA,KAAAA;AACAxB,IAAAA,aAAa,GAAbA,IAAAA;AACD;AApBH,CAAA;;AAuBA,IAAIyB,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA,OAAA,EAAA,EAAA,EAAuB;AAC7C,MAAIjC,OAAO,CAAPA,UAAAA,KAAJ,SAAA,EAAsC;AACpC,QAAIkC,aAAa,GAAG3B,QAAQ,CAARA,aAAAA,CAApB,KAAoBA,CAApB;AACAP,IAAAA,OAAO,CAAPA,UAAAA,GAAAA,aAAAA;AACD;;AACDA,EAAAA,OAAO,GAAGA,OAAO,CAAjBA,UAAAA;AACA,MAAA,WAAA,EACEA,OAAO,CAAPA,WAAAA,CAAAA,UAAAA,EADF,EACEA,EADF,KAEK;AACH,QAAI,CAACA,OAAO,CAAZ,kBAAA,EAAiC;AAC/B,UAAImC,gBAAgB,CAAhBA,OAAgB,CAAhBA,CAAAA,QAAAA,IAAJ,QAAA,EACEnC,OAAO,CAAPA,KAAAA,CAAAA,QAAAA,GAAAA,UAAAA;AACF8B,MAAAA,YAAY;AACZ9B,MAAAA,OAAO,CAAPA,cAAAA,GAAAA,EAAAA;AACAA,MAAAA,OAAO,CAAPA,mBAAAA,GAAAA,EAAAA;AACA,OAACA,OAAO,CAAPA,kBAAAA,GAA6BO,QAAQ,CAARA,aAAAA,CAA9B,KAA8BA,CAA9B,EAAA,SAAA,GAAA,iBAAA;AAGAP,MAAAA,OAAO,CAAPA,kBAAAA,CAAAA,SAAAA,GAAuC,kDAAvCA,sCAAAA;AAEAA,MAAAA,OAAO,CAAPA,WAAAA,CAAoBA,OAAO,CAA3BA,kBAAAA;AACAa,MAAAA,aAAa,CAAbA,OAAa,CAAbA;AAEAuB,MAAAA,uBAAuB,CAAA,OAAA,EAAA,QAAA,EAAA,cAAA,EAAvBA,IAAuB,CAAvBA;AAGAd,MAAAA,mBAAmB,IACjB,OAAO,CAAP,kBAAA,CAAA,gBAAA,CAAA,mBAAA,EAEE,UAAA,CAAA,EAAa;AACX,YAAIe,CAAC,CAADA,aAAAA,IAAJ,aAAA,EAAsCxB,aAAa,CAAbA,OAAa,CAAbA;AAJ5CS,OACE,CADFA;AAOD;;AACDtB,IAAAA,OAAO,CAAPA,mBAAAA,CAAAA,IAAAA,CAAAA,EAAAA;AACD;AAnCH,CAAA;;AAsCA,IAAIsC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAA,OAAA,EAAA,EAAA,EAAuB;AAChDtC,EAAAA,OAAO,GAAGA,OAAO,CAAjBA,UAAAA;AACA,MAAA,WAAA,EACEA,OAAO,CAAPA,WAAAA,CAAAA,UAAAA,EADF,EACEA,EADF,KAEK;AACHA,IAAAA,OAAO,CAAPA,mBAAAA,CAAAA,MAAAA,CACEA,OAAO,CAAPA,mBAAAA,CAAAA,OAAAA,CADFA,EACEA,CADFA,EAAAA,CAAAA;;AAIA,QAAI,CAACA,OAAO,CAAPA,mBAAAA,CAAL,MAAA,EAAyC;AACvCA,MAAAA,OAAO,CAAPA,mBAAAA,CAAAA,QAAAA,EAAAA,cAAAA;AACAA,MAAAA,OAAO,CAAPA,kBAAAA,GAA6B,CAACA,OAAO,CAAPA,WAAAA,CAC5BA,OAAO,CADTA,kBAA8BA,CAA9BA;AAGD;AACF;AAfH,CAAA;;AC3JA,IAAMuC,IAAI,GAAV,OAAA;AACA,IAAMC,kBAAkB,GAAxB,GAAA;AAEA,IAAMC,cAAc,GAApB,GAAA;AACA,IAAMC,oBAAoB,GAA1B,GAAA;AACA,IAAMC,gBAAgB,GAAtB,CAAA;AAGA,IAAMC,oCAAoC,GAA1C,EAAA;AACA,IAAMC,WAAW,GAAGC,QAAQ,CAARA,YAAAA,KAApB,SAAA;AAEA,IAAMC,YAAY,GAAGF,WAAW,GAC5BC,QAAQ,CADoB,YAAA,GAE5BA,QAAQ,CAFZ,mCAAA;;AAIA,SAAA,eAAA,GAAqC;AACnC,SAAO;AACLE,IAAAA,kBAAkB,EADb,KAAA;AAELC,IAAAA,iBAAiB,EAFZ,KAAA;AAGLC,IAAAA,aAAa,EAHR,IAAA;AAILC,IAAAA,cAAc,EAJT,KAAA;AAMLC,IAAAA,MAAM,EAAE,CACN;AACEC,MAAAA,WAAW,EADb,KAAA;AAEEC,MAAAA,WAAW,EAFb,QAAA;AAGEC,MAAAA,OAAO,EAAE,CAAC;AAAEC,QAAAA,UAAU,EAAE;AAAd,OAAD;AAHX,KADM,CANH;AAaLlI,IAAAA,OAAO,EAAEqH;AAbJ,GAAP;AAeD;;AAED,IAAMc,UAAU,GAAG,SAAbA,UAAa,CAAA,MAAA,EAAA;AAAA,SACjBC,aAAa,CAAbA,MAAa,CAAbA,GAAAA,MAAAA,GAAiC;AAAEtL,IAAAA,GAAG,EAAED,MAAM,CAAb,CAAa,CAAb;AAAkBE,IAAAA,GAAG,EAAEF,MAAM,CAAA,CAAA;AAA7B,GADhB;AAAnB,CAAA;;AAGA,IAAMwL,aAAa,GAAG,SAAhBA,aAAgB,CAAA,IAAA,EAAA,OAAA,EAAmB;AACvC,MAAIvJ,OAAO,CAAPA,GAAAA,CAAAA,QAAAA,KAAJ,YAAA,EAA2C;AACzC,QAAIoB,IAAI,GAAR,OAAA,EAAoB;AAClBlB,MAAAA,OAAO,CAAPA,IAAAA,CACE,gBAAA,0CAAA,GAAA,sCAAA,GAAA,qBAAA,GADFA,OAAAA;AAOD;AACF;;AAED,MAAIgB,OAAO,GAAX,IAAA,EAAoB;AAClB,WAAA,IAAA;AACD;;AACD,SAAA,OAAA;AAhBF,CAAA;;AAmBA,IAAMsI,YAAY,GAAG,SAAfA,YAAe,GAAA;AAAA,SACnBrD,QAAQ,CAARA,UAAAA,IACAA,QAAQ,CADRA,kBAAAA,IAEAA,QAAQ,CAFRA,aAAAA,IAGAA,QAAQ,CAJW,mBAAA;AAArB,CAAA;;IAMMsD,SAAAA,GAAAA,aAAAA,UAAAA,UAAAA,EAAAA;;;AA8EJ,WAAA,SAAA,CAAA,KAAA,EAAmB;AAAA,QAAA,KAAA;;AACjB,IAAA,KAAA,GAAA,UAAA,CAAA,IAAA,CAAA,IAAA,EAAA,KAAA,KAAA,IAAA;;AADiB,IAAA,KAAA,CAAA,WAAA,GAgTL,YAAM;AAClB,UAAI,KAAA,CAAA,WAAA,CAAA,QAAA,KAAA,CAAA,IAAmC,KAAA,CAAA,WAAA,CAAA,SAAA,KAAvC,CAAA,EAAyE;AACvE,YAAM2C,aAAa,GACjB/K,IAAI,CAAJA,IAAAA,CAAU,KAAA,CAAA,WAAA,CAAA,QAAA,KAAVA,kBAAAA,IADF,CAAA;AAEA,YAAMgL,cAAc,GAClBhL,IAAI,CAAJA,IAAAA,CAAU,KAAA,CAAA,WAAA,CAAA,SAAA,KAAVA,kBAAAA,IADF,CAAA;AAEA,YAAMiL,cAAc,GAAGjL,IAAI,CAAJA,GAAAA,CAAAA,aAAAA,EAAvB,cAAuBA,CAAvB;AACA,eAAOA,IAAI,CAAJA,IAAAA,CAAU+C,IAAI,CAArB,cAAqB,CAAd/C,CAAP;AACD;;AACD,aAAA,gBAAA;AAzTiB,KAAA;;AAAA,IAAA,KAAA,CAAA,eAAA,GA4TD,UAAA,OAAA,EAAa;AAC7B,UAAI,CAACmD,OAAO,CAAZ,OAAY,CAAZ,EAAuB;AACrB,eAAA,OAAA;AACD;;AACD,aAAO,KAAA,CAAP,WAAO,EAAP;AAhUiB,KAAA;;AAAA,IAAA,KAAA,CAAA,qBAAA,GAmUK,YAAM;AAC5B,MAAA,KAAA,CAAA,gBAAA,GAAA,IAAA;;AACA,UAAI,KAAA,CAAJ,KAAA,EAAgB;AACd,YAAM+H,cAAc,GAAG,KAAA,CAAA,KAAA,CAAA,MAAA,IAAqB,KAAA,CAAA,KAAA,CAA5C,aAAA;;AACA,YAAMC,aAAa,GAAG,KAAA,CAAA,IAAA,CAAtB,SAAsB,EAAtB;;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,KAAA,CAAA,OAAA,CAAyB,KAAA,CAAzB,IAAA,EAAA,QAAA;;AACA,QAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CACE,KAAA,CAAA,KAAA,CAAA,mBAAA,GAAA,cAAA,GADF,aAAA;AAGD;AA5UgB,KAAA;;AAAA,IAAA,KAAA,CAAA,UAAA,GA+UN,UAAA,UAAA,EAAgB;AAC3BxB,MAAAA,UAAU,CAAVA,OAAAA,CAAmB,UAAA,SAAA,EAAe;AAChC,QAAA,KAAA,CAAA,OAAA,CAAA,SAAA,IAA0B,IAAI,KAAA,CAAA,KAAA,CAA9B,SAA8B,CAAJ,EAA1B;;AACA,QAAA,KAAA,CAAA,OAAA,CAAA,SAAA,EAAA,MAAA,CAA+B,KAAA,CAA/B,IAAA;AAFFA,OAAAA;AAhViB,KAAA;;AAAA,IAAA,KAAA,CAAA,aAAA,GAsVH,YAAA;AAAA,aAAA,aACd,KAAA,CAAA,aAAA,CAAA,gBAAA,EAAA;AACE,QAAA,YAAY,EAAE,KAAA,CAAA,KAAA,CADhB,YAAA;AAEE,QAAA,YAAY,EAAE,KAAA,CAFhB,aAAA;AAGE,QAAA,gBAAgB,EAAE,KAAA,CAHpB,iBAAA;AAIE,QAAA,iBAAiB,EAAE,KAAA,CAJrB,kBAAA;AAKE,QAAA,iBAAiB,EAAE,KAAA,CALrB,kBAAA;AAME,QAAA,UAAU,EAAE,KAAA,CANd,WAAA;AAOE,QAAA,cAAc,EAPhB,IAAA;AAQE,QAAA,eAAe,EAAE,KAAA,CAAA,KAAA,CARnB,eAAA;AASE,QAAA,gBAAgB,EAAE,KAAA,CATpB,iBAAA;AAUE,QAAA,UAAU,EAAE,KAAA,CAAKyB;AAVnB,OAAA,CADc;AAtVG,KAAA;;AAAA,IAAA,KAAA,CAAA,QAAA,GAqWR,YAAM;AAEf,UAAI,KAAA,CAAJ,YAAA,EAAuB;AACrB;AACD;;AACD,MAAA,KAAA,CAAA,YAAA,GAAA,IAAA;AAEA,UAAMrB,WAAW,GAAG/B,UAAU,CAC5B,KAAA,CAAA,KAAA,CAAA,MAAA,IAAqB,KAAA,CAAA,KAAA,CADvB,aAA8B,CAA9B;;AAGA,MAAA,KAAA,CAAA,WAAA,CAAA,OAAA,CAAA,WAAA,EAEE,KAAA,CAAA,KAAA,CAAA,IAAA,IAAmB,KAAA,CAAA,KAAA,CAFrB,WAAA,EAAA,CAAA;;AAMA,MAAA,KAAA,CAAA,gBAAA;;AAEA,UAAMhJ,gBAAgB,GAAA,QAAA,CAAA,EAAA,EAChB,KAAA,CAAA,KAAA,CAAA,MAAA,IAAqB;AAAEzF,QAAAA,GAAG,EAAE,KAAA,CAAA,KAAA,CAAW8O;AAAlB,OADL,EAEjB,KAAA,CAAA,KAAA,CAFL,gBAAsB,CAAtB;;AAKA,MAAA,KAAA,CAAA,KAAA,CAAA,eAAA,CAAA,gBAAA,EACqC,KAAA,CAAA,KAAA,CADrC,cAAA,EAAA,IAAA,CAEQ,UAAA,IAAA,EAAU;AACd,YAAI,CAAC,KAAA,CAAL,QAAA,EAAoB;AAClB;AACD;;AAED,YAAMiC,YAAY,GAAG,KAAA,CAAA,WAAA,CAArB,SAAqB,EAArB;;AAEA,YAAMe,YAAY,GAAG;AACnBtL,UAAAA,IAAI,EAAE,KAAA,CAAA,KAAA,CAAA,IAAA,IAAmB,KAAA,CAAA,KAAA,CADN,WAAA;AAEnByI,UAAAA,MAAM,EAAE,IAAI8C,IAAI,CAAR,MAAA,CAAgBhB,YAAY,CAA5B,GAAA,EAAkCA,YAAY,CAA9C,GAAA;AAFW,SAArB;;AAMA,YAAI,KAAA,CAAA,KAAA,CAAA,OAAA,CAAJ,SAAA,EAAkC;AAChC7Q,UAAAA,MAAM,CAANA,MAAAA,CAAAA,sBAAAA,CAAAA,KAAAA,CAAAA,EAAoB;AAClBqQ,YAAAA,OAAO,EAAEvM,eAAe,CAAA,IAAA,EAAO,KAAA,CAAA,KAAA,CAAP,OAAA;AADN,WAApB9D;AAGAqE,UAAAA,cAAc,CAAC,KAAA,CAAD,OAAA,EAAe,KAAA,CAAA,KAAA,CAA7BA,OAAc,CAAdA;AACD;;AAcD,YAAM4M,eAAe,GAAGC,IAAI,CAAA,IAAA,EAA5B,aAA4B,CAA5B;AACA,YAAM5M,OAAO,GACX,OAAO,KAAA,CAAA,KAAA,CAAP,OAAA,KAAA,UAAA,GACI,KAAA,CAAA,KAAA,CAAA,OAAA,CADJ,eACI,CADJ,GAEI,KAAA,CAAA,KAAA,CAHN,OAAA;AAIA,YAAMwN,cAAc,GAAGC,eAAvB,EAAA;AAEA,YAAMC,gBAAgB,GAAG,CAACtI,OAAO,CAAC,KAAA,CAAA,KAAA,CAAT,SAAQ,CAAR,IAAkC;AACzDsG,UAAAA,SAAS,EAAE,KAAA,CAAA,KAAA,CAAWA;AADmC,SAA3D;;AAIA,YAAM5J,OAAO,GAAG,KAAA,CAAA,eAAA,CAAqB9B,OAAO,CAA5C,OAAgB,CAAhB;;AACA,QAAA,KAAA,CAAA,QAAA,GAAA,OAAA;;AAEA,YAAM2N,aAAa,GAAA,QAAA,CAAA,EAAA,EAAA,cAAA,EAAA;AAEjB7L,UAAAA,OAAO,EAAPA;AAFiB,SAAA,EAAA,OAAA,EAAnB,YAAmB,CAAnB;;AAOA,QAAA,KAAA,CAAA,uBAAA,GAA+B,CAACsD,OAAO,CAACuI,aAAa,CAAtB,SAAQ,CAAR,GAC3BA,aAAa,CADc,SAAA,GAE3B,KAAA,CAFJ,uBAAA;;AAIA,YAAMC,UAAU,GAAA,QAAA,CAAA,EAAA,EAAA,aAAA,EAAhB,gBAAgB,CAAhB;;AAKAA,QAAAA,UAAU,CAAVA,OAAAA,GAAqBzD,aAAa,CAACyD,UAAU,CAAX,OAAA,EAAlCA,OAAkC,CAAlCA;AAEA,YAAMC,GAAG,GAAG,IAAIN,IAAI,CAAR,GAAA,CACVjE,QAAQ,CAARA,WAAAA,CAAqB,KAAA,CADX,aACVA,CADU,EAAZ,UAAY,CAAZ;AAKA,QAAA,KAAA,CAAA,IAAA,GAAA,GAAA;AACA,QAAA,KAAA,CAAA,KAAA,GAAA,IAAA;;AAEA,QAAA,KAAA,CAAA,UAAA,CAAgB,KAAA,CAAA,KAAA,CAAhB,UAAA;;AAGA,YAAMwE,YAAY,GAAGP,IAAI,CAAJA,OAAAA,CAAAA,KAAAA,CAArB,aAAqBA,CAArB;AAEA,YAAMQ,WAAW,GAAGD,YAAY,IAAIE,MAAM,CAACF,YAAY,CAAvD,CAAuD,CAAb,CAA1C;;AAGA,YAAMG,KAAK,GAAA,sBAAA,CAAX,KAAW,CAAX;;AACA,YAAMhC,OAAO,GAAG,MAAM,CAAN,MAAA,CAAc,IAAIsB,IAAI,CAAtB,WAAc,EAAd,EAAsC;AACpDW,UAAAA,KADoD,EAAA,SAAA,KAAA,GAC5C;AACN,gBAAMC,WAAW,GACf,OAAA,MAAA,KAAA,WAAA,GAAmCC,MAAM,CAAzC,KAAmCA,GAAnC,IAAA,GADF,QAAA;AAEA,gBAAMC,YAAY,GAChB,OAAA,MAAA,KAAA,WAAA,GAAmCD,MAAM,CAAzC,MAAmCA,GAAnC,IAAA,GADF,QAAA;AAGA,gBAAME,GAAG,GAAGvH,QAAQ,CAARA,aAAAA,CAAZ,KAAYA,CAAZ;AACAuH,YAAAA,GAAG,CAAHA,KAAAA,CAAAA,eAAAA,GAAAA,aAAAA;AACAA,YAAAA,GAAG,CAAHA,KAAAA,CAAAA,QAAAA,GAAAA,UAAAA;AACAA,YAAAA,GAAG,CAAHA,KAAAA,CAAAA,IAAAA,GAAAA,KAAAA;AACAA,YAAAA,GAAG,CAAHA,KAAAA,CAAAA,GAAAA,GAAAA,KAAAA;AACAA,YAAAA,GAAG,CAAHA,KAAAA,CAAAA,KAAAA,GAAAA,WAAAA;AACAA,YAAAA,GAAG,CAAHA,KAAAA,CAAAA,MAAAA,GAAAA,YAAAA;;AAEA,gBAAIL,KAAK,CAALA,KAAAA,CAAJ,mBAAA,EAAqC;AAAA,kBAC3BM,mBAD2B,GACHN,KAAK,CADF,KACHA,CADG,mBAAA;;AAEnC,kBAAI,OAAA,mBAAA,KAAJ,QAAA,EAA6C;AAC3CvS,gBAAAA,MAAM,CAANA,IAAAA,CAAAA,mBAAAA,EAAAA,OAAAA,CAAyC,UAAA,QAAA,EAAc;AACrD4S,kBAAAA,GAAG,CAAHA,KAAAA,CAAAA,QAAAA,IAAsBC,mBAAmB,CAAzCD,QAAyC,CAAzCA;AADF5S,iBAAAA;AAGD;AACF;;AAED,gBAAM8S,KAAK,GAAG,KAAd,QAAc,EAAd;AACAA,YAAAA,KAAK,CAALA,kBAAAA,CAAAA,WAAAA,CAAAA,GAAAA;AACAP,YAAAA,KAAK,CAALA,WAAAA,CAAAA,sBAAAA,CAAAA,IAAAA,EAEEhC,OAAO,CAFTgC,aAEEhC,EAFFgC;;AAKA,gBAAI,CAAJ,WAAA,EAAkB;AAChB1E,cAAAA,YAAY,CAAA,KAAA,EAEV0E,KAAK,CAFK,aAEVA,EAFU,EAAA,GAAA,EAKV,YAAA;AAAA,uBAAM,KAAK,CAAL,QAAA,CAAe;AAAEhC,kBAAAA,OAAO,EAAEqC;AAAX,iBAAf,CAAN;AALF/E,eAAY,CAAZA;AADF,aAAA,MAQO;AACL0E,cAAAA,KAAK,CAALA,QAAAA,CAAe;AAAEhC,gBAAAA,OAAO,EAAEqC;AAAX,eAAfL;AACD;AAzCiD,WAAA;AA4CpDQ,UAAAA,QA5CoD,EAAA,SAAA,QAAA,GA4CzC;AACT,gBAAMC,eAAe,GAAGT,KAAK,CAALA,KAAAA,CAAxB,OAAA;;AACA,gBAAIS,eAAe,IAAI,CAAvB,WAAA,EAAqC;AACnCpF,cAAAA,QAAQ,CAARA,sBAAAA,CAAAA,eAAAA;AACD;;AACD2E,YAAAA,KAAK,CAALA,QAAAA,CAAe;AAAEhC,cAAAA,OAAO,EAAE;AAAX,aAAfgC;AAjDkD,WAAA;AAoDpDU,UAAAA,IApDoD,EAAA,SAAA,IAAA,GAoD7C;AACLV,YAAAA,KAAK,CAALA,cAAAA;;AACAA,YAAAA,KAAK,CAALA,gBAAAA,CAAAA,GAAAA,EAAAA,IAAAA,EAAkC,CAACA,KAAK,CAALA,KAAAA,CAAnCA,SAAAA;;AAEA,gBAAI,CAACA,KAAK,CAAV,sBAAA,EAAmC;AACjCA,cAAAA,KAAK,CAALA,kBAAAA,CAAyB;AAAEJ,gBAAAA,GAAG,EAAL,GAAA;AAAON,gBAAAA,IAAI,EAAX,IAAA;AAAaqB,gBAAAA,GAAG,EAAEX,KAAK,CAACY;AAAxB,eAAzBZ;;AACAA,cAAAA,KAAK,CAALA,sBAAAA,GAAAA,IAAAA;AACD;;AAED,gBAAIA,KAAK,CAAT,MAAA,EAAkB;AAChB,kBAAMtP,MAAM,GAAGsP,KAAK,CAALA,WAAAA,CAAAA,0BAAAA,CACbA,KAAK,CADP,MAAeA,CAAf;AAGAA,cAAAA,KAAK,CAALA,MAAAA,CAAAA,GAAAA,GAAmBtP,MAAM,CAAzBsP,GAAAA;AACAA,cAAAA,KAAK,CAALA,MAAAA,CAAAA,GAAAA,GAAmBtP,MAAM,CAAzBsP,GAAAA;AACD;;AAEDA,YAAAA,KAAK,CAALA,iBAAAA;;AAEA,gBAAIA,KAAK,CAAT,kBAAA,EAA8B;AAC5BA,cAAAA,KAAK,CAALA,kBAAAA,CAAAA,IAAAA,CAAAA,YAAAA;;AACA,kBAAIA,KAAK,CAAT,qBAAA,EAAiC;AAC/BA,gBAAAA,KAAK,CAALA,kBAAAA,CAAAA,IAAAA,CAAAA,2BAAAA;AACD;AACF;AACF;AA7EmD,SAAtC,CAAhB;AAgFA,QAAA,KAAA,CAAA,QAAA,GAAA,OAAA;AAEAhC,QAAAA,OAAO,CAAPA,MAAAA,CAAAA,GAAAA;;AACA,YAAI,KAAA,CAAA,KAAA,CAAA,OAAA,CAAJ,SAAA,EAAkC;AAChC,UAAA,KAAA,CAAA,OAAA,CAAA,MAAA,CAAA,GAAA;AACD;;AAED,YAAI,KAAA,CAAA,KAAA,CAAJ,aAAA,EAA8B;AAC5BsB,UAAAA,IAAI,CAAJA,KAAAA,CAAAA,WAAAA,CAAAA,GAAAA,EAAAA,aAAAA,EAA2C,YAAM;AAC/CU,YAAAA,KAAK,CAALA,cAAAA;AADFV,WAAAA;AAGD;;AAEDA,QAAAA,IAAI,CAAJA,KAAAA,CAAAA,WAAAA,CAAAA,GAAAA,EAAAA,cAAAA,EAA4C,YAAM;AAEhD,cAAIU,KAAK,CAALA,WAAAA,CAAAA,OAAAA,OAAgCJ,GAAG,CAAvC,OAAoCA,EAApC,EAAmD;AACjD,gBAAI,CAACI,KAAK,CAAV,wBAAA,EAAqC;AACnCA,cAAAA,KAAK,CAALA,wBAAAA,GAAAA,IAAAA;;AACAA,cAAAA,KAAK,CAALA,qBAAAA,CAA4BJ,GAAG,CAA/BI,IAAAA;AACD;;AAID,gBAAIF,WAAW,GAAf,oCAAA,EAAwD;AACtD,kBAAMe,YAAY,GAAlB,GAAA;;AAEA,kBACE,IAAA,IAAA,GAAA,OAAA,KAAuB,KAAA,CAAvB,qBAAA,GADF,YAAA,EAGE;AAOA5H,gBAAAA,GAAG,CAAC,YAAA;AAAA,yBACFA,GAAG,CAAC,YAAM;AACR+G,oBAAAA,KAAK,CAALA,cAAAA;;AACAA,oBAAAA,KAAK,CAALA,gBAAAA,CAAAA,GAAAA,EAAAA,IAAAA;AAHA,mBACC,CADD;AAAJ/G,iBAAG,CAAHA;AAVF,eAAA,MAgBO;AACL+G,gBAAAA,KAAK,CAALA,cAAAA;;AACAA,gBAAAA,KAAK,CAALA,gBAAAA,CAAAA,GAAAA,EAAAA,IAAAA;AACD;AACF;AACF;AAlCHV,SAAAA;AAqCAA,QAAAA,IAAI,CAAJA,KAAAA,CAAAA,WAAAA,CAAAA,GAAAA,EAAAA,MAAAA,EAAoC,YAAM;AACxC,cAAI,KAAA,CAAJ,gBAAA,EAA2B;AACzB,YAAA,KAAA,CAAA,YAAA;;AACA,gBAAMwB,WAAW,GAAG,KAAA,CAAA,eAAA,CAAqB/O,OAAO,CAAhD,OAAoB,CAApB;;AAEA,gBAAI+O,WAAW,KAAK,KAAA,CAApB,QAAA,EAAmC;AACjC,cAAA,KAAA,CAAA,QAAA,GAAA,WAAA;AACAlB,cAAAA,GAAG,CAAHA,UAAAA,CAAe;AAAE/L,gBAAAA,OAAO,EAAEiN;AAAX,eAAflB;AACD;;AAED,YAAA,KAAA,CAAA,gBAAA,GAAA,KAAA;AACD;;AAED,cAAII,KAAK,CAAT,wBAAA,EAAoC;AAClCA,YAAAA,KAAK,CAALA,wBAAAA,GAAAA,KAAAA;;AACAA,YAAAA,KAAK,CAALA,mBAAAA,CAA0BJ,GAAG,CAA7BI,IAAAA;AACD;;AAEDA,UAAAA,KAAK,CAALA,cAAAA;;AACAA,UAAAA,KAAK,CAALA,gBAAAA,CAAAA,GAAAA,EAAAA,IAAAA;;AAEAA,UAAAA,KAAK,CAALA,SAAAA,GAAAA,CAAAA;;AAEA,cAAIA,KAAK,CAAT,kBAAA,EAA8B;AAC5BA,YAAAA,KAAK,CAALA,kBAAAA,CAAAA,IAAAA,CAAAA,YAAAA;AACD;AAzBHV,SAAAA;AA4BAA,QAAAA,IAAI,CAAJA,KAAAA,CAAAA,WAAAA,CAAAA,GAAAA,EAAAA,WAAAA,EAAyC,YAAM;AAE7CU,UAAAA,KAAK,CAALA,WAAAA,GAAAA,IAAAA;AAFFV,SAAAA;AASAA,QAAAA,IAAI,CAAJA,KAAAA,CAAAA,WAAAA,CAAAA,GAAAA,EAAAA,OAAAA,EAAqC,YAAM;AACzCU,UAAAA,KAAK,CAALA,WAAAA,GAAAA,IAAAA;AADFV,SAAAA;AAIAA,QAAAA,IAAI,CAAJA,KAAAA,CAAAA,WAAAA,CAAAA,GAAAA,EAAAA,UAAAA,EAAwC,YAAM;AAE5CU,UAAAA,KAAK,CAALA,WAAAA,GAAAA,KAAAA;AACAA,UAAAA,KAAK,CAALA,MAAAA,GAAAA,IAAAA;AACAA,UAAAA,KAAK,CAALA,kBAAAA,CAAAA,IAAAA,CAAAA,2BAAAA;AAJFV,SAAAA;AAOAA,QAAAA,IAAI,CAAJA,KAAAA,CAAAA,WAAAA,CAAAA,GAAAA,EAAAA,MAAAA,EAAoC,YAAM;AACxCU,UAAAA,KAAK,CAALA,SAAAA,GAAkB,IAAA,IAAA,GAAlBA,OAAkB,EAAlBA;;AACAA,UAAAA,KAAK,CAALA,OAAAA,CAAAA,GAAAA;AAFFV,SAAAA;AAKAA,QAAAA,IAAI,CAAJA,KAAAA,CAAAA,WAAAA,CAAAA,GAAAA,EAAAA,SAAAA,EAAuC,YAAM;AAG3C,cAAMyB,YAAY,GAAG,IAAI,CAAJ,KAAA,CAAA,WAAA,CAAA,GAAA,EAAA,MAAA,EAAoC,YAAM;AAC7DzB,YAAAA,IAAI,CAAJA,KAAAA,CAAAA,cAAAA,CAAAA,YAAAA;;AACAU,YAAAA,KAAK,CAALA,UAAAA,CAAAA,GAAAA;AAFF,WAAqB,CAArB;AAHFV,SAAAA;AASAA,QAAAA,IAAI,CAAJA,KAAAA,CAAAA,WAAAA,CAAAA,GAAAA,EAAAA,mBAAAA,EAAiD,YAAM;AACrDU,UAAAA,KAAK,CAALA,kBAAAA,CAAyBJ,GAAG,CAA5BI,YAAyBJ,EAAzBI;AADFV,SAAAA;AAnRJ,OAAA,EAAA,OAAA,EAuRS,UAAA,CAAA,EAAO;AAEZ,QAAA,KAAA,CAAA,kBAAA,CAAwB;AACtBM,UAAAA,GAAG,EADmB,IAAA;AAEtBN,UAAAA,IAAI,EAFkB,IAAA;AAGtBqB,UAAAA,GAAG,EAAE,KAAA,CAAKC;AAHY,SAAxB;;AAKA/N,QAAAA,OAAO,CAAPA,KAAAA,CAAAA,CAAAA;AACA,cAAA,CAAA;AA/RJ,OAAA;AA5XiB,KAAA;;AAAA,IAAA,KAAA,CAAA,kBAAA,GA+pBE,YAAa;AAChC,UAAI,KAAA,CAAA,KAAA,CAAJ,iBAAA,EAAkC;AAAA,YAAA,WAAA;;AAChC,YACEF,OAAO,CAAPA,GAAAA,CAAAA,QAAAA,KAAAA,YAAAA,IACA,KAAA,CAAA,KAAA,CAAA,kCAAA,KAFF,IAAA,EAGE;AACAE,UAAAA,OAAO,CAAPA,IAAAA,CACE,gBAAA,6CAAA,GAAA,kCAAA,GAAA,qEAAA,GADFA,wBAAAA;AAOD;;AAED,SAAA,WAAA,GAAA,KAAA,CAAA,KAAA,EAAA,iBAAA,CAAA,KAAA,CAAA,WAAA,EAAA,SAAA;AACD;AA/qBgB,KAAA;;AAAA,IAAA,KAAA,CAAA,iBAAA,GAkrBC,YAAA;AAAA,aAAM,KAAA,CAAA,KAAA,CAAN,aAAA;AAlrBD,KAAA;;AAAA,IAAA,KAAA,CAAA,OAAA,GAorBT,YAAA;AAAA,UAAA,YAAA;;AAAA,aAAa,KAAA,CAAA,KAAA,CAAA,MAAA,IAAqB,CAAA,YAAA,GAAA,KAAA,CAAA,KAAA,EAAA,MAAA,CAAA,KAAA,CAAA,YAAA,EAAlC,SAAkC,CAAlC;AAprBS,KAAA;;AAAA,IAAA,KAAA,CAAA,UAAA,GAsrBN,YAAA;AAAA,UAAA,YAAA;;AAAA,aACX,KAAA,CAAA,KAAA,CAAA,SAAA,IAAwB,CAAA,YAAA,GAAA,KAAA,CAAA,KAAA,EAAA,SAAA,CAAA,KAAA,CAAA,YAAA,EADb,SACa,CADb;AAtrBM,KAAA;;AAAA,IAAA,KAAA,CAAA,kBAAA,GAyrBE,YAAA;AAAA,UAAA,YAAA;;AAAA,aACnB,KAAA,CAAA,KAAA,CAAA,iBAAA,IAAgC,CAAA,YAAA,GAAA,KAAA,CAAA,KAAA,EAAA,iBAAA,CAAA,KAAA,CAAA,YAAA,EADb,SACa,CADb;AAzrBF,KAAA;;AAAA,IAAA,KAAA,CAAA,qBAAA,GA4rBK,YAAA;AAAA,UAAA,YAAA;;AAAA,aACtB,KAAA,CAAA,KAAA,CAAA,oBAAA,IAAmC,CAAA,YAAA,GAAA,KAAA,CAAA,KAAA,EAAA,oBAAA,CAAA,KAAA,CAAA,YAAA,EADb,SACa,CADb;AA5rBL,KAAA;;AAAA,IAAA,KAAA,CAAA,mBAAA,GA+rBG,YAAA;AAAA,UAAA,YAAA;;AAAA,aACpB,KAAA,CAAA,KAAA,CAAA,kBAAA,IAAiC,CAAA,YAAA,GAAA,KAAA,CAAA,KAAA,EAAA,kBAAA,CAAA,KAAA,CAAA,YAAA,EADb,SACa,CADb;AA/rBH,KAAA;;AAAA,IAAA,KAAA,CAAA,cAAA,GAksBF,YAAA;AAAA,aAAM,KAAA,CAAA,KAAA,CAAA,aAAA,IAA4B,KAAA,CAAA,KAAA,CAAlC,aAAkC,EAAlC;AAlsBE,KAAA;;AAAA,IAAA,KAAA,CAAA,aAAA,GAosBH,YAAa;AAC3B,UAAI,KAAA,CAAA,KAAA,CAAJ,YAAA,EAA6B;AAAA,YAAA,YAAA;;AAC3B,eAAO,CAAA,YAAA,GAAA,KAAA,CAAA,KAAA,EAAA,YAAA,CAAA,KAAA,CAAA,YAAA,EAAP,SAAO,CAAP;AACD;;AACD,aAAA,SAAA;AAxsBiB,KAAA;;AAAA,IAAA,KAAA,CAAA,iBAAA,GA2sBC,UAAA,QAAA,EAAA,UAAA,EAA0B;AAC5C,MAAA,KAAA,CAAA,mBAAA,GAA2B,CAAA,QAAA,EAA3B,UAA2B,CAA3B;;AACA,UAAI,KAAA,CAAA,KAAA,CAAJ,gBAAA,EAAiC;AAC/B,QAAA,KAAA,CAAA,KAAA,CAAA,gBAAA,CAAA,QAAA,EAAA,UAAA,EAAA,QAAA,CAAA,EAAA,EAAuD,KAAA,CAAvD,MAAA,CAAA;AACD;AA/sBgB,KAAA;;AAAA,IAAA,KAAA,CAAA,eAAA,GAmtBD,YAAM;AACtB,UAAI,KAAA,CAAJ,mBAAA,EAA8B;AAC5B,YAAI,KAAA,CAAA,KAAA,CAAJ,cAAA,EAA+B;AAAA,cAAA,YAAA;;AAC7B,WAAA,YAAA,GAAA,KAAA,CAAA,KAAA,EAAA,cAAA,CAAA,KAAA,CAAA,YAAA,EAA6B,KAAA,CAA7B,mBAA6B,CAA7B,MAA6B,CAA7B,CAAA,QAAA,CAAA,EAAA,EACK,KAAA,CADL,MAAA,CAAA,CAA6B,CAA7B;AAGD;;AACD,QAAA,KAAA,CAAA,mBAAA,GAAA,IAAA;AACA,QAAA,KAAA,CAAA,iBAAA,GAAyB,IAAA,IAAA,GAAzB,OAAyB,EAAzB;AACD;AA5tBgB,KAAA;;AAAA,IAAA,KAAA,CAAA,iBAAA,GAguBC,YAAM;AACxB,UAAI,KAAA,CAAJ,mBAAA,EAA8B;AAC5B,YAAI,KAAA,CAAA,KAAA,CAAJ,gBAAA,EAAiC;AAAA,cAAA,YAAA;;AAC/B,WAAA,YAAA,GAAA,KAAA,CAAA,KAAA,EAAA,gBAAA,CAAA,KAAA,CAAA,YAAA,EAA+B,KAAA,CAA/B,mBAA+B,CAA/B,MAA+B,CAA/B,CAAA,QAAA,CAAA,EAAA,EACK,KAAA,CADL,MAAA,CAAA,CAA+B,CAA/B;AAGD;AACF;AAvuBgB,KAAA;;AAAA,IAAA,KAAA,CAAA,kBAAA,GA0uBE,YAAa;AAChC,UAAI,KAAA,CAAA,KAAA,CAAJ,iBAAA,EAAkC;AAAA,YAAA,aAAA;;AAChC,eAAO,CAAA,aAAA,GAAA,KAAA,CAAA,KAAA,EAAA,iBAAA,CAAA,KAAA,CAAA,aAAA,EAAP,SAAO,CAAP;AACD;;AACD,aAAA,SAAA;AA9uBiB,KAAA;;AAAA,IAAA,KAAA,CAAA,kBAAA,GAivBE,YAAa;AAChC,UAAI,KAAA,CAAA,KAAA,CAAJ,iBAAA,EAAkC;AAAA,YAAA,aAAA;;AAChC,eAAO,CAAA,aAAA,GAAA,KAAA,CAAA,KAAA,EAAA,iBAAA,CAAA,KAAA,CAAA,aAAA,EAAP,SAAO,CAAP;AACD;;AACD,aAAA,SAAA;AArvBiB,KAAA;;AAAA,IAAA,KAAA,CAAA,YAAA,GAwvBJ,YAAM;AACnB,UAAI,CAAC,KAAA,CAAL,QAAA,EAAoB;;AACpB,UAAIsJ,YAAJ,EAAA,EAAoB;AAClB,QAAA,KAAA,CAAA,WAAA,CAAA,WAAA,CAA6B1J,MAAM,CAAnC,UAAA,EAAgDA,MAAM,CAAtD,WAAA;AADF,OAAA,MAEO;AACL,YAAMwL,MAAM,GAAG5C,QAAQ,CAARA,WAAAA,CAAqB,KAAA,CAApC,aAAeA,CAAf;;AACA,QAAA,KAAA,CAAA,WAAA,CAAA,WAAA,CAA6B4C,MAAM,CAAnC,WAAA,EAAiDA,MAAM,CAAvD,YAAA;AACD;;AACD,MAAA,KAAA,CAAA,gBAAA;AAhwBiB,KAAA;;AAAA,IAAA,KAAA,CAAA,eAAA,GAmwBD,YAAM;AACtB,MAAA,KAAA,CAAA,gBAAA,GAAA,IAAA;AApwBiB,KAAA;;AAAA,IAAA,KAAA,CAAA,eAAA,GAuwBD,UAAA,CAAA,EAAO;AACvB,UAAI,CAAC,KAAA,CAAL,WAAA,EAAuB;AAEvB,UAAM+C,QAAQ,GAAG,IAAA,IAAA,GAAjB,OAAiB,EAAjB;AACA,UAAMC,uBAAuB,GAA7B,EAAA;;AAEA,UAAID,QAAQ,GAAG,KAAA,CAAXA,cAAAA,GAAJ,uBAAA,EAA8D;AAC5D,QAAA,KAAA,CAAA,aAAA,GAAqBpG,CAAC,CAADA,aAAAA,CAArB,qBAAqBA,EAArB;AACD;;AACD,MAAA,KAAA,CAAA,cAAA,GAAA,QAAA;AAEA,UAAMsG,SAAS,GAAGtG,CAAC,CAADA,OAAAA,GAAY,KAAA,CAAA,aAAA,CAA9B,IAAA;AACA,UAAMuG,SAAS,GAAGvG,CAAC,CAADA,OAAAA,GAAY,KAAA,CAAA,aAAA,CAA9B,GAAA;;AAEA,UAAI,CAAC,KAAA,CAAL,MAAA,EAAkB;AAChB,QAAA,KAAA,CAAA,MAAA,GAAc;AAAElN,UAAAA,CAAC,EAAH,CAAA;AAAQC,UAAAA,CAAC,EAAT,CAAA;AAAcgD,UAAAA,GAAG,EAAjB,CAAA;AAAsBC,UAAAA,GAAG,EAAE;AAA3B,SAAd;AACD;;AAED,MAAA,KAAA,CAAA,MAAA,CAAA,CAAA,GAAA,SAAA;AACA,MAAA,KAAA,CAAA,MAAA,CAAA,CAAA,GAAA,SAAA;;AAEA,UAAMF,MAAM,GAAG,KAAA,CAAA,WAAA,CAAA,0BAAA,CAA4C,KAAA,CAA3D,MAAe,CAAf;;AACA,MAAA,KAAA,CAAA,MAAA,CAAA,GAAA,GAAkBA,MAAM,CAAxB,GAAA;AACA,MAAA,KAAA,CAAA,MAAA,CAAA,GAAA,GAAkBA,MAAM,CAAxB,GAAA;;AAEA,MAAA,KAAA,CAAA,iBAAA;;AAEA,UAAIsQ,QAAQ,GAAG,KAAA,CAAXA,SAAAA,GAAJ,cAAA,EAAgD;AAC9C,QAAA,KAAA,CAAA,qBAAA,GAAA,IAAA;AADF,OAAA,MAEO;AACL,QAAA,KAAA,CAAA,kBAAA,CAAA,IAAA,CAAA,2BAAA;;AACA,QAAA,KAAA,CAAA,qBAAA,GAAA,KAAA;AACD;AAvyBgB,KAAA;;AAAA,IAAA,KAAA,CAAA,QAAA,GA2yBR,YAAA;AAAA,UAAA,aAAA;;AAAA,aACT,KAAA,CAAA,KAAA,CAAA,OAAA,IACA,CAAC,KAAA,CADD,mBAAA,IAEA,IAAA,IAAA,GAAA,OAAA,KAAuB,KAAA,CAAvB,iBAAA,GAFA,oBAAA,IAGA,KAAA,CAAA,SAAA,KAHA,CAAA,IAIA,CAAA,aAAA,GAAA,KAAA,CAAA,KAAA,EAAA,OAAA,CAAA,KAAA,CAAA,aAAA,EALS,SAKT,CALS;AA3yBQ,KAAA;;AAAA,IAAA,KAAA,CAAA,WAAA,GAkzBL,UAAA,KAAA,EAAW;AACvB,UAAI,KAAA,CAAJ,kBAAA,EAA6B;AAE3B,QAAA,KAAA,CAAA,eAAA,CAAA,KAAA;;AACA,YAAMA,QAAQ,GAAG,IAAA,IAAA,GAAjB,OAAiB,EAAjB;;AACA,YAAIA,QAAQ,GAAG,KAAA,CAAXA,SAAAA,GAAJ,cAAA,EAAgD;AAC9C,cAAI,KAAA,CAAJ,MAAA,EAAiB;AACf,YAAA,KAAA,CAAA,QAAA,CAAA,QAAA,CAAA,EAAA,EACK,KAAA,CADL,MAAA,EAAA;AAEEI,cAAAA,KAAK,EAALA;AAFF,aAAA,CAAA;AAID;;AAED,UAAA,KAAA,CAAA,kBAAA,CAAA,IAAA,CAAA,WAAA,EAAA,KAAA;AACD;AACF;AAj0BgB,KAAA;;AAAA,IAAA,KAAA,CAAA,qBAAA,GAs0BK,UAAA,KAAA,EAAW;AACjC,UAAI,CAAC,KAAA,CAAL,WAAA,EAAuB;;AAEvB,MAAA,KAAA,CAAA,eAAA,CAAA,KAAA;AAz0BiB,KAAA;;AAAA,IAAA,KAAA,CAAA,eAAA,GA40BD,UAAA,KAAA,EAAW;AAC3B,UAAI,KAAA,CAAJ,kBAAA,EAA6B;AAC3B,YAAMJ,QAAQ,GAAG,IAAA,IAAA,GAAjB,OAAiB,EAAjB;;AACA,YAAIA,QAAQ,GAAG,KAAA,CAAXA,SAAAA,GAAJ,cAAA,EAAgD;AAG9C,UAAA,KAAA,CAAA,eAAA,CAAA,KAAA;;AACA,UAAA,KAAA,CAAA,kBAAA,CAAA,IAAA,CAAA,WAAA,EAAA,KAAA;AACD;AACF;AAr1BgB,KAAA;;AAAA,IAAA,KAAA,CAAA,sBAAA,GAw1BM,YAAM;AAC7B,UAAIK,aAAa,GAAjB,QAAA,EAA8B;AAE5B,QAAA,KAAA,CAAA,qBAAA,GAA6B,IAAA,IAAA,GAA7B,OAA6B,EAA7B;AACD;AA51BgB,KAAA;;AAAA,IAAA,KAAA,CAAA,iBAAA,GA+1BC,YAAM;AACxB,UAAIA,aAAa,GAAjB,QAAA,EAA8B;AAC5B,QAAA,KAAA,CAAA,qBAAA,GAA6B,IAAA,IAAA,GAA7B,OAA6B,EAA7B;AACD;AAl2BgB,KAAA;;AAAA,IAAA,KAAA,CAAA,gBAAA,GAq2BA,UAAA,MAAA,EAAA;AAAA,aACjB7E,MAAM,KACJP,aAAa,CAAbA,MAAa,CAAbA,IAAyBqF,QAAQ,CAAC9E,MAAM,CAAxCP,GAAiC,CAAjCA,IAAiDqF,QAAQ,CAAC9E,MAAM,CAAjE,GAA0D,CAAzDP,IACCO,MAAM,CAANA,MAAAA,KAAAA,CAAAA,IAAuB8E,QAAQ,CAAC9E,MAAM,CAAtCA,CAAsC,CAAP,CAA/BA,IAA8C8E,QAAQ,CAAC9E,MAAM,CAH/C,CAG+C,CAAP,CAFnD,CADW;AAr2BA,KAAA;;AAAA,IAAA,KAAA,CAAA,gBAAA,GA02BA,UAAA,GAAA,EAAA,IAAA,EAAA,mBAAA,EAAoC;AACrD,UAAA,GAAA,EAAS;AACP,YAAM+E,GAAG,GAAG3B,GAAG,CAAf,SAAYA,EAAZ;;AACA,QAAA,KAAA,CAAA,WAAA,CAAA,OAAA,CAAyB,CAAC2B,GAAG,CAAJ,GAACA,EAAD,EAAYA,GAAG,CAAxC,GAAqCA,EAAZ,CAAzB,EAAiD3B,GAAG,CAApD,OAAiDA,EAAjD,EAAA,CAAA;AACD;;AAED,UACE,CAAC,KAAA,CAAA,KAAA,CAAA,QAAA,IAAuB,KAAA,CAAA,KAAA,CAAxB,cAAA,KACA,KAAA,CAAA,WAAA,CAFF,UAEE,EAFF,EAGE;AACA,YAAM7L,IAAI,GAAG,KAAA,CAAA,WAAA,CAAb,OAAa,EAAb;;AACA,YAAMyN,MAAM,GAAG,KAAA,CAAA,WAAA,CAAf,SAAe,EAAf;;AACA,YAAMlD,YAAY,GAAG,KAAA,CAAA,WAAA,CAArB,SAAqB,EAArB;;AAEA,YAAI,CAACmD,gBAAgB,CAAA,MAAA,EAAS,KAAA,CAAT,WAAA,EAArB,IAAqB,CAArB,EAAuD;AACrD,cAAIC,mBAAmB,KAAvB,KAAA,EAAmC;AACjC,gBAAMC,YAAY,GAAG,KAAA,CAAA,WAAA,CAAA,SAAA,CAA2B,KAAA,CAAA,KAAA,CAAhD,MAAqB,CAArB;;AACA,gBAAI,KAAA,CAAA,KAAA,CAAJ,cAAA,EAA+B;AAC7B,cAAA,KAAA,CAAA,KAAA,CAAA,cAAA,CACE,KAAA,CAAA,eAAA,GAAA,QAAA,CAAA,EAAA,EAAA,YAAA,CAAA,GAEI,CAACrD,YAAY,CAAb,GAAA,EAAmBA,YAAY,CAHrC,GAGM,CAHN,EAAA,IAAA,EAAA,MAAA,EAAA,YAAA;AAQD;;AAED,gBAAI,KAAA,CAAA,KAAA,CAAJ,QAAA,EAAyB;AACvB,cAAA,KAAA,CAAA,KAAA,CAAA,QAAA,CAAoB;AAClB9B,gBAAAA,MAAM,EAAA,QAAA,CAAA,EAAA,EADY,YACZ,CADY;AAElBzI,gBAAAA,IAAI,EAFc,IAAA;AAGlByN,gBAAAA,MAAM,EAAE;AACNI,kBAAAA,EAAE,EAAE;AACFjR,oBAAAA,GAAG,EAAE6Q,MAAM,CADT,CACS,CADT;AAEF5Q,oBAAAA,GAAG,EAAE4Q,MAAM,CAAA,CAAA;AAFT,mBADE;AAKNK,kBAAAA,EAAE,EAAE;AACFlR,oBAAAA,GAAG,EAAE6Q,MAAM,CADT,CACS,CADT;AAEF5Q,oBAAAA,GAAG,EAAE4Q,MAAM,CAAA,CAAA;AAFT,mBALE;AASNM,kBAAAA,EAAE,EAAE;AACFnR,oBAAAA,GAAG,EAAE6Q,MAAM,CADT,CACS,CADT;AAEF5Q,oBAAAA,GAAG,EAAE4Q,MAAM,CAAA,CAAA;AAFT,mBATE;AAaNO,kBAAAA,EAAE,EAAE;AACFpR,oBAAAA,GAAG,EAAE6Q,MAAM,CADT,CACS,CADT;AAEF5Q,oBAAAA,GAAG,EAAE4Q,MAAM,CAAA,CAAA;AAFT;AAbE,iBAHU;AAqBlBG,gBAAAA,YAAY,EAAE;AACZC,kBAAAA,EAAE,EAAE;AACFjR,oBAAAA,GAAG,EAAEgR,YAAY,CADf,CACe,CADf;AAEF/Q,oBAAAA,GAAG,EAAE+Q,YAAY,CAAA,CAAA;AAFf,mBADQ;AAKZE,kBAAAA,EAAE,EAAE;AACFlR,oBAAAA,GAAG,EAAEgR,YAAY,CADf,CACe,CADf;AAEF/Q,oBAAAA,GAAG,EAAE+Q,YAAY,CAAA,CAAA;AAFf,mBALQ;AASZG,kBAAAA,EAAE,EAAE;AACFnR,oBAAAA,GAAG,EAAEgR,YAAY,CADf,CACe,CADf;AAEF/Q,oBAAAA,GAAG,EAAE+Q,YAAY,CAAA,CAAA;AAFf,mBATQ;AAaZI,kBAAAA,EAAE,EAAE;AACFpR,oBAAAA,GAAG,EAAEgR,YAAY,CADf,CACe,CADf;AAEF/Q,oBAAAA,GAAG,EAAE+Q,YAAY,CAAA,CAAA;AAFf;AAbQ,iBArBI;AAwClBK,gBAAAA,IAAI,EAAE,KAAA,CAAA,WAAA,CAAA,OAAA,KACF;AACE/V,kBAAAA,KAAK,EAAE,KAAA,CAAA,WAAA,CADT,QACS,EADT;AAEEC,kBAAAA,MAAM,EAAE,KAAA,CAAA,WAAA,CAAA,SAAA;AAFV,iBADE,GAKF;AACED,kBAAAA,KAAK,EADP,CAAA;AAEEC,kBAAAA,MAAM,EAAE;AAFV;AA7Cc,eAApB;AAkDD;;AAED,YAAA,KAAA,CAAA,WAAA,GAAA,MAAA;AACD;AACF;AACF;AA97BgB,KAAA;;AAAA,IAAA,KAAA,CAAA,cAAA,GAi8BF,UAAA,GAAA,EAAS;AACxB,MAAA,KAAA,CAAA,aAAA,GAAA,GAAA;AAl8BiB,KAAA;;AAEjB,IAAA,KAAA,CAAA,QAAA,GAAA,KAAA;AACA,IAAA,KAAA,CAAA,YAAA,GAAA,KAAA;AACA,IAAA,KAAA,CAAA,sBAAA,GAAA,KAAA;AAEA,IAAA,KAAA,CAAA,IAAA,GAAA,IAAA;AACA,IAAA,KAAA,CAAA,KAAA,GAAA,IAAA;AACA,IAAA,KAAA,CAAA,WAAA,GAAA,IAAA;AACA,IAAA,KAAA,CAAA,OAAA,GAAA,IAAA;AAEA,IAAA,KAAA,CAAA,OAAA,GAAA,EAAA;AAEA,IAAA,KAAA,CAAA,MAAA,GAAA,IAAA;AACA,IAAA,KAAA,CAAA,cAAA,GAAA,CAAA;AACA,IAAA,KAAA,CAAA,aAAA,GAAA,IAAA;AACA,IAAA,KAAA,CAAA,WAAA,GAAA,IAAA;AAEA,IAAA,KAAA,CAAA,SAAA,GAAA,CAAA;AACA,IAAA,KAAA,CAAA,qBAAA,GAAA,KAAA;AACA,IAAA,KAAA,CAAA,cAAA,GAAA,CAAA;AAEA,IAAA,KAAA,CAAA,kBAAA,GAA0B,IAAA,gBAAA,CAAA,sBAAA,CAA1B,KAA0B,CAAA,CAA1B;AACA,IAAA,KAAA,CAAA,WAAA,GAAmB,IAAA,GAAA,CAAnB,kBAAmB,CAAnB;AACA,IAAA,KAAA,CAAA,eAAA,GAAuB+P,aAAa,CAAC,KAAA,CAAA,KAAA,CAArC,MAAoC,CAApC;AAEA,IAAA,KAAA,CAAA,QAAA,GAAA,gBAAA;AACA,IAAA,KAAA,CAAA,uBAAA,GAAA,IAAA;AAEA,IAAA,KAAA,CAAA,qBAAA,GAAA,CAAA;AAEA,IAAA,KAAA,CAAA,mBAAA,GAAA,IAAA;AACA,IAAA,KAAA,CAAA,iBAAA,GAAA,CAAA;AAEA,IAAA,KAAA,CAAA,aAAA,GAAA,IAAA;;AAEA,QAAItJ,OAAO,CAAPA,GAAAA,CAAAA,QAAAA,KAAJ,YAAA,EAA2C;AACzC,UAAI,KAAA,CAAA,KAAA,CAAJ,MAAA,EAAuB;AACrBE,QAAAA,OAAO,CAAPA,IAAAA,CACE,gBAAA,4BAAA,GADFA,iDAAAA;AAKD;;AAED,UAAI,KAAA,CAAA,KAAA,CAAJ,cAAA,EAA+B;AAC7BA,QAAAA,OAAO,CAAPA,IAAAA,CACE,gBAAA,oCAAA,GADFA,qDAAAA;AAKD;;AAED,UAAIsE,OAAO,CAAC,KAAA,CAAA,KAAA,CAARA,MAAO,CAAPA,IAA8BA,OAAO,CAAC,KAAA,CAAA,KAAA,CAA1C,aAAyC,CAAzC,EAAqE;AACnEtE,QAAAA,OAAO,CAAPA,IAAAA,CAAAA,6DAAAA;AAGD;;AAED,UAAIsE,OAAO,CAAC,KAAA,CAAA,KAAA,CAARA,IAAO,CAAPA,IAA4BA,OAAO,CAAC,KAAA,CAAA,KAAA,CAAxC,WAAuC,CAAvC,EAAiE;AAC/DtE,QAAAA,OAAO,CAAPA,IAAAA,CAAAA,yDAAAA;AAGD;AACF;;AAED,QAAI,KAAA,CAAA,gBAAA,CAAsB,KAAA,CAAA,KAAA,CAAA,MAAA,IAAqB,KAAA,CAAA,KAAA,CAA/C,aAAI,CAAJ,EAA0E;AACxE,UAAMkL,WAAW,GAAG/B,UAAU,CAC5B,KAAA,CAAA,KAAA,CAAA,MAAA,IAAqB,KAAA,CAAA,KAAA,CADvB,aAA8B,CAA9B;;AAGA,MAAA,KAAA,CAAA,WAAA,CAAA,OAAA,CAAA,WAAA,EAEE,KAAA,CAAA,KAAA,CAAA,IAAA,IAAmB,KAAA,CAAA,KAAA,CAFrB,WAAA,EAAA,CAAA;AAKD;;AAED,IAAA,KAAA,CAAA,wBAAA,GAAA,KAAA;AAEA,IAAA,KAAA,CAAA,KAAA,GAAa;AACXgC,MAAAA,OAAO,EAAE;AADE,KAAb;AA/EiB,WAAA,KAAA;AAkFlB;;;;SAED7O,iB,GAAAA,SAAAA,iBAAAA,GAAoB;AAAA,QAAA,MAAA,GAAA,IAAA;;AAClB,SAAA,QAAA,GAAA,IAAA;AACAwL,IAAAA,uBAAuB,CAAA,MAAA,EAAA,QAAA,EAAmB,KAAnB,eAAA,EAAvBA,KAAuB,CAAvBA;AACAA,IAAAA,uBAAuB,CAAA,MAAA,EAAA,SAAA,EAAoB,KAApB,iBAAA,EAAvBA,IAAuB,CAAvBA;AACA,QAAMsD,MAAM,GAAG5C,QAAQ,CAARA,WAAAA,CAAqB,KAApC,aAAeA,CAAf;;AAIA,QAAA,MAAA,EAAY;AACVV,MAAAA,uBAAuB,CAAA,MAAA,EAAA,WAAA,EAGrB,KAHqB,qBAAA,EAAvBA,IAAuB,CAAvBA;AAMD;;AAEDA,IAAAA,uBAAuB,CAAA,MAAA,EAAA,SAAA,EAAoB,KAApB,eAAA,EAAvBA,KAAuB,CAAvBA;;AACA,QAAM3H,gBAAgB,GAAA,QAAA,CAAA,EAAA,EAChB,KAAA,KAAA,CAAA,MAAA,IAAqB;AAAEzF,MAAAA,GAAG,EAAE,KAAA,KAAA,CAAW8O;AAAlB,KADL,EAEjB,KAAA,KAAA,CAFL,gBAAsB,CAAtB;;AAKA,SAAA,KAAA,CAAA,eAAA,CAAA,gBAAA,EAA6C,KAAA,KAAA,CAA7C,cAAA;AAEA6B,IAAAA,UAAU,CACR,YAAM;AAEJ,MAAA,MAAI,CAAJ,YAAA;;AACA,UACE,MAAI,CAAJ,gBAAA,CAAsB,MAAI,CAAJ,KAAA,CAAA,MAAA,IAAqB,MAAI,CAAJ,KAAA,CAD7C,aACE,CADF,EAEE;AACA,QAAA,MAAI,CAAJ,QAAA;AACD;AARK,KAAA,EAAA,CAAA,EAAVA,IAAU,CAAVA;;AAaA,QAAI,KAAA,KAAA,CAAJ,mBAAA,EAAoC;AAClC,UAAMC,IAAI,GAAV,IAAA;AACA3D,MAAAA,iBAAiB,CAAA,MAAA,EAAS2D,IAAI,CAA9B3D,qBAAiB,CAAjBA;AACD;AACF,G;;SAGD4D,gC,GAAAA,SAAAA,gCAAAA,CAAAA,SAAAA,EAA4C;AAAA,QAAA,MAAA,GAAA,IAAA;;AAC1C,QAAIzL,OAAO,CAAPA,GAAAA,CAAAA,QAAAA,KAAJ,YAAA,EAA2C;AACzC,UAAI,CAACvD,YAAY,CAAC,KAAA,KAAA,CAAD,aAAA,EAA2BiP,SAAS,CAArD,aAAiB,CAAjB,EAAsE;AACpExL,QAAAA,OAAO,CAAPA,IAAAA,CAAAA,wEAAAA;AAGD;;AAED,UAAI,CAACzD,YAAY,CAAC,KAAA,KAAA,CAAD,WAAA,EAAyBiP,SAAS,CAAnD,WAAiB,CAAjB,EAAkE;AAChExL,QAAAA,OAAO,CAAPA,IAAAA,CAAAA,sEAAAA;AAGD;AACF;;AAED,QACE,CAAC,KAAA,gBAAA,CAAsB,KAAA,KAAA,CAAvB,MAAC,CAAD,IACA,KAAA,gBAAA,CAAsBwL,SAAS,CAFjC,MAEE,CAFF,EAGE;AACAH,MAAAA,UAAU,CAAC,YAAA;AAAA,eAAM,MAAI,CAAV,QAAM,EAAN;AAAD,OAAA,EAAVA,CAAU,CAAVA;AACD;;AAED,QAAI,KAAJ,IAAA,EAAe;AACb,UAAMI,YAAY,GAAG,KAAA,WAAA,CAArB,SAAqB,EAArB;;AACA,UAAI,KAAA,gBAAA,CAAsBD,SAAS,CAAnC,MAAI,CAAJ,EAA6C;AAC3C,YAAME,eAAe,GAAGvC,UAAU,CAACqC,SAAS,CAA5C,MAAkC,CAAlC;AACA,YAAMG,UAAU,GAAG,KAAA,gBAAA,CAAsB,KAAA,KAAA,CAAtB,MAAA,IACfxC,UAAU,CAAC,KAAA,KAAA,CADI,MACL,CADK,GAAnB,IAAA;;AAIA,YACE,CAAA,UAAA,IACAhI,IAAI,CAAJA,GAAAA,CAASuK,eAAe,CAAfA,GAAAA,GAAsBC,UAAU,CAAzCxK,GAAAA,IACEA,IAAI,CAAJA,GAAAA,CAASuK,eAAe,CAAfA,GAAAA,GAAsBC,UAAU,CAD3CxK,GACEA,CADFA,GAFF,IAAA,EAKE;AACA,cACEA,IAAI,CAAJA,GAAAA,CAASuK,eAAe,CAAfA,GAAAA,GAAsBD,YAAY,CAA3CtK,GAAAA,IACEA,IAAI,CAAJA,GAAAA,CAASuK,eAAe,CAAfA,GAAAA,GAAsBD,YAAY,CAD7CtK,GACEA,CADFA,GADF,IAAA,EAIE;AACA,iBAAA,IAAA,CAAA,KAAA,CAAgB;AACdrD,cAAAA,GAAG,EAAE4N,eAAe,CADN,GAAA;AAEd3N,cAAAA,GAAG,EAAE2N,eAAe,CAAC3N;AAFP,aAAhB;AAID;AACF;AACF;;AAED,UAAI,CAACuG,OAAO,CAACkH,SAAS,CAAtB,IAAY,CAAZ,EAA8B;AAE5B,YAAIrK,IAAI,CAAJA,GAAAA,CAASqK,SAAS,CAATA,IAAAA,GAAiB,KAAA,KAAA,CAA1BrK,IAAAA,IAAJ,CAAA,EAAoD;AAClD,eAAA,IAAA,CAAA,OAAA,CAAkBqK,SAAS,CAA3B,IAAA;AACD;AACF;;AAED,UAAI,CAAClH,OAAO,CAAC,KAAA,KAAA,CAAT,SAAQ,CAAR,IAAkCA,OAAO,CAACkH,SAAS,CAAvD,SAA6C,CAA7C,EAAoE;AAElE,aAAA,IAAA,CAAA,UAAA,CAAqB;AAAEZ,UAAAA,SAAS,EAAE,KAAKgB;AAAlB,SAArB;AAFF,OAAA,MAGO,IAAI,CAACrP,YAAY,CAAC,KAAA,KAAA,CAAD,SAAA,EAAuBiP,SAAS,CAAjD,SAAiB,CAAjB,EAA8D;AAEnE,aAAA,IAAA,CAAA,UAAA,CAAqB;AAAEZ,UAAAA,SAAS,EAAEY,SAAS,CAACZ;AAAvB,SAArB;AACD;;AAGD,UACE,CAACtG,OAAO,CAACkH,SAAS,CAAlB,OAAQ,CAAR,IACA,CAACjP,YAAY,CAAC,KAAA,KAAA,CAAD,OAAA,EAAqBiP,SAAS,CAF7C,OAEe,CAFf,EAGE;AACA,YAAMK,eAAe,GAAGC,IAAI,CAAC,KAAD,KAAA,EAA5B,aAA4B,CAA5B;AACA,YAAI5M,OAAO,GACT,OAAOsM,SAAS,CAAhB,OAAA,KAAA,UAAA,GACIA,SAAS,CAATA,OAAAA,CADJ,eACIA,CADJ,GAEIA,SAAS,CAHf,OAAA;AAKAtM,QAAAA,OAAO,GAAG5E,IAAI,CAAA,OAAA,EAAU,CAAA,MAAA,EAAA,QAAA,EAAxB4E,WAAwB,CAAV,CAAdA;;AAEA,YAAI,aAAJ,OAAA,EAA0B;AACxB,cAAM8B,OAAO,GAAG,KAAA,eAAA,CAAqB9B,OAAO,CAA5C,OAAgB,CAAhB;;AACAA,UAAAA,OAAO,CAAPA,OAAAA,GAAkBmK,aAAa,CAACnK,OAAO,CAAR,OAAA,EAA/BA,OAA+B,CAA/BA;AACD;;AAED,aAAA,IAAA,CAAA,UAAA,CAAA,OAAA;AACD;;AAED,UAAI,CAAC3C,YAAY,CAACiP,SAAS,CAAV,UAAA,EAAuB,KAAA,KAAA,CAAxC,UAAiB,CAAjB,EAAgE;AAC9D5Q,QAAAA,MAAM,CAANA,IAAAA,CAAY,KAAZA,OAAAA,EAAAA,OAAAA,CAAkC,UAAA,QAAA,EAAc;AAC9C,UAAA,MAAI,CAAJ,OAAA,CAAA,QAAA,EAAA,MAAA,CAAA,IAAA;;AACA,iBAAO,MAAI,CAAJ,OAAA,CAAP,QAAO,CAAP;AAFFA,SAAAA;;AAIA,aAAA,UAAA,CAAgB4Q,SAAS,CAAzB,UAAA;AACD;;AAED,UACE,KAAA,OAAA,IACA,CAACjP,YAAY,CAACiP,SAAS,CAATA,OAAAA,CAAD,SAAA,EAA8B,KAAA,KAAA,CAAA,OAAA,CAF7C,SAEe,CAFf,EAGE;AACA,aAAA,OAAA,CAAA,OAAA,CACE,SAAS,CAAT,OAAA,CAAA,SAAA,CAAA,GAAA,CAAgC,UAAA,CAAA,EAAA;AAAA,iBAAQ;AACtCxM,YAAAA,QAAQ,EAAE,IAAI,MAAI,CAAJ,KAAA,CAAJ,MAAA,CAAsBmD,CAAC,CAAvB,GAAA,EAA6BA,CAAC,CADF,GAC5B,CAD4B;AAEtCrD,YAAAA,MAAM,EAAEqD,CAAC,CAACrD;AAF4B,WAAR;AADlC,SACE,CADF;AAMD;;AACD,UACE,KAAA,OAAA,IACA,CAACvC,YAAY,CAACiP,SAAS,CAATA,OAAAA,CAAD,OAAA,EAA4B,KAAA,KAAA,CAAA,OAAA,CAF3C,OAEe,CAFf,EAGE;AACA5Q,QAAAA,MAAM,CAANA,IAAAA,CAAY4Q,SAAS,CAATA,OAAAA,CAAZ5Q,OAAAA,EAAAA,OAAAA,CAA+C,UAAA,MAAA,EAAY;AACzD,UAAA,MAAI,CAAJ,OAAA,CAAA,GAAA,CAAA,MAAA,EAAyB4Q,SAAS,CAATA,OAAAA,CAAAA,OAAAA,CAAzB,MAAyBA,CAAzB;AADF5Q,SAAAA;AAGD;AACF;AACF,G;;SAEDf,qB,GAAAA,SAAAA,qBAAAA,CAAAA,SAAAA,EAAAA,SAAAA,EAA4C;AAE1C,WACE,CAAC0C,YAAY,CACXjC,IAAI,CAAC,KAAD,KAAA,EAAa,CADN,WACM,CAAb,CADO,EAEXA,IAAI,CAAA,SAAA,EAAY,CAFlB,WAEkB,CAAZ,CAFO,CAAb,IAGK,CAACiC,YAAY,CAAC,KAAD,KAAA,EAJpB,SAIoB,CAJpB;AAMD,G;;SAEDwP,kB,GAAAA,SAAAA,kBAAAA,CAAAA,SAAAA,EAA8B;AAC5B,SAAA,kBAAA,CAAA,IAAA,CAAA,YAAA;;AAEA,QAAI,CAACxP,YAAY,CAAC,KAAA,KAAA,CAAD,aAAA,EAA2ByP,SAAS,CAArD,aAAiB,CAAjB,EAAsE;AACpE,WAAA,kBAAA,CAAA,IAAA,CAAA,2BAAA;AACD;AACF,G;;SAEDxP,oB,GAAAA,SAAAA,oBAAAA,GAAuB;AACrB,SAAA,QAAA,GAAA,KAAA;AACA,QAAM4O,MAAM,GAAG5C,QAAQ,CAARA,WAAAA,CAAqB,KAApC,aAAeA,CAAf;;AACA,QAAA,MAAA,EAAY;AACV4C,MAAAA,MAAM,CAANA,mBAAAA,CAAAA,WAAAA,EAAwC,KAAxCA,qBAAAA,EAAAA,IAAAA;AACD;;AACDxL,IAAAA,MAAM,CAANA,mBAAAA,CAAAA,QAAAA,EAAqC,KAArCA,eAAAA;AACAA,IAAAA,MAAM,CAANA,mBAAAA,CAAAA,SAAAA,EAAsC,KAAtCA,iBAAAA;AACAA,IAAAA,MAAM,CAANA,mBAAAA,CAAAA,SAAAA,EAAsC,KAAtCA,eAAAA,EAAAA,KAAAA;;AACA,QAAI,KAAA,KAAA,CAAJ,mBAAA,EAAoC;AAClCoI,MAAAA,oBAAoB,CAAA,MAAA,EAAS,KAA7BA,qBAAoB,CAApBA;AACD;;AAED,QAAI,KAAJ,QAAA,EAAmB;AAEjB,WAAA,QAAA,CAAA,MAAA,CAAA,IAAA;AACD;;AAED,QAAI,KAAA,KAAA,IAAc,KAAd,IAAA,IAA2B,KAAA,KAAA,CAA/B,4BAAA,EAAwE;AAEtE,WAAA,IAAA,CAAA,UAAA,CAAqB;AAAEiE,QAAAA,WAAW,EAAE;AAAf,OAArB;AACA,WAAA,KAAA,CAAA,KAAA,CAAA,sBAAA,CAAwC,KAAxC,IAAA;AACD;;AAED,QAAI,KAAA,KAAA,CAAJ,4BAAA,EAA6C;AAC3C,WAAA,IAAA,GAAA,IAAA;AACA,WAAA,KAAA,GAAA,IAAA;AACD;;AACD,SAAA,kBAAA,CAAA,OAAA;AAEA,SAAA,gBAAA,GAAA,KAAA;;AAEA,QAAI,KAAA,KAAA,CAAJ,4BAAA,EAA6C;AAC3C,aAAO,KAAP,IAAA;AACA,aAAO,KAAP,kBAAA;AACD;AACF,G;;SA2pBDnS,M,GAAAA,SAAAA,MAAAA,GAAS;AACP,QAAMqR,OAAO,GAAG,KAAA,KAAA,CAAhB,OAAA;AACA,QAAMiE,kBAAkB,GAAG,CAAA,OAAA,GAAA,aACzB,KAAA,CAAA,aAAA,CAAA,yBAAA,EAAA;AACE,MAAA,YAAY,EAAE,KAAA,KAAA,CADhB,YAAA;AAEE,MAAA,YAAY,EAAE,KAFhB,aAAA;AAGE,MAAA,gBAAgB,EAAE,KAHpB,iBAAA;AAIE,MAAA,iBAAiB,EAAE,KAJrB,kBAAA;AAKE,MAAA,iBAAiB,EAAE,KALrB,kBAAA;AAME,MAAA,UAAU,EAAE,KANd,WAAA;AAOE,MAAA,cAAc,EAPhB,KAAA;AAQE,MAAA,eAAe,EAAE,KAAA,KAAA,CARnB,eAAA;AASE,MAAA,gBAAgB,EAAE,KATpB,iBAAA;AAUE,MAAA,UAAU,EAAE,KAAK7C;AAVnB,KAAA,CADyB,GAA3B,IAAA;AAeA,WAAA,aACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,MAAA,KAAK,EAAE,KAAA,KAAA,CADT,KAAA;AAEE,MAAA,WAAW,EAAE,KAFf,eAAA;AAGE,MAAA,kBAAkB,EAAE,KAHtB,sBAAA;AAIE,MAAA,OAAO,EAAE,KAAK8C;AAJhB,KAAA,EAAA,aAME,KAAA,CAAA,aAAA,CAAA,YAAA,EAAA;AAAc,MAAA,aAAa,EAAE,KAAKC;AAAlC,KAAA,CANF,EAOG/G,WAAW,IAAXA,OAAAA,IAA0BE,YAAY,CAAC,KAAD,aAAC,EAAD,EAPzC,OAOyC,CAPzC,EADF,kBACE,CADF;AAcD,G;;;CAljCGc,CAAkB3P,SAAlB2P,C;;AAAAA,SAAAA,CACGhO,SADHgO,GACe;AACjBC,EAAAA,MAAM,EAAE/N,SAAS,CADA,MAAA;AAEjB0E,EAAAA,gBAAgB,EAAE1E,SAAS,CAFV,GAAA;AAIjBgO,EAAAA,aAAa,EAAE,SAAS,CAAT,SAAA,CAAoB,CACjChO,SAAS,CADwB,KAAA,EAEjC,SAAS,CAAT,KAAA,CAAgB;AACdqC,IAAAA,GAAG,EAAErC,SAAS,CADA,MAAA;AAEdsC,IAAAA,GAAG,EAAEtC,SAAS,CAACiO;AAFD,GAAhB,CAFiC,CAApB,CAJE;AAWjBC,EAAAA,MAAM,EAAE,SAAS,CAAT,SAAA,CAAoB,CAC1BlO,SAAS,CADiB,KAAA,EAE1B,SAAS,CAAT,KAAA,CAAgB;AACdqC,IAAAA,GAAG,EAAErC,SAAS,CADA,MAAA;AAEdsC,IAAAA,GAAG,EAAEtC,SAAS,CAACiO;AAFD,GAAhB,CAF0B,CAApB,CAXS;AAkBjBE,EAAAA,WAAW,EAAEnO,SAAS,CAlBL,MAAA;AAmBjByF,EAAAA,IAAI,EAAEzF,SAAS,CAnBE,MAAA;AAoBjBoO,EAAAA,cAAc,EAAEpO,SAAS,CApBR,IAAA;AAqBjBqO,EAAAA,QAAQ,EAAErO,SAAS,CArBF,IAAA;AAsBjBsO,EAAAA,OAAO,EAAEtO,SAAS,CAtBD,IAAA;AAuBjBG,EAAAA,YAAY,EAAEH,SAAS,CAvBN,IAAA;AAwBjBI,EAAAA,gBAAgB,EAAEJ,SAAS,CAxBV,IAAA;AAyBjBuO,EAAAA,cAAc,EAAEvO,SAAS,CAzBR,IAAA;AA0BjBwO,EAAAA,gBAAgB,EAAExO,SAAS,CA1BV,IAAA;AA2BjBM,EAAAA,iBAAiB,EAAEN,SAAS,CA3BX,IAAA;AA4BjBK,EAAAA,iBAAiB,EAAEL,SAAS,CA5BX,IAAA;AA6BjByO,EAAAA,oBAAoB,EAAEzO,SAAS,CA7Bd,IAAA;AA8BjB0O,EAAAA,kBAAkB,EAAE1O,SAAS,CA9BZ,IAAA;AA+BjB2O,EAAAA,MAAM,EAAE3O,SAAS,CA/BA,IAAA;AAgCjB4O,EAAAA,SAAS,EAAE5O,SAAS,CAhCH,IAAA;AAiCjB6O,EAAAA,iBAAiB,EAAE7O,SAAS,CAjCX,IAAA;AAkCjB8O,EAAAA,aAAa,EAAE9O,SAAS,CAlCP,IAAA;AAmCjByD,EAAAA,OAAO,EAAEzD,SAAS,CAnCD,GAAA;AAoCjBC,EAAAA,eAAe,EAAED,SAAS,CApCT,IAAA;AAqCjBuB,EAAAA,aAAa,EAAEvB,SAAS,CArCP,MAAA;AAsCjB+O,EAAAA,SAAS,EAAE/O,SAAS,CAtCH,IAAA;AAuCjBjC,EAAAA,MAAM,EAAEiC,SAAS,CAvCA,KAAA;AAwCjBgP,EAAAA,eAAe,EAAEhP,SAAS,CAxCT,GAAA;AAyCjBiP,EAAAA,iBAAiB,EAAEjP,SAAS,CAzCX,IAAA;AA0CjBkP,EAAAA,kCAAkC,EAAElP,SAAS,CA1C5B,IAAA;AA2CjBmP,EAAAA,SAAS,EAAEnP,SAAS,CA3CH,IAAA;AA4CjBtC,EAAAA,KAAK,EAAEsC,SAAS,CA5CC,GAAA;AA6CjBoP,EAAAA,mBAAmB,EAAEpP,SAAS,CA7Cb,IAAA;AA8CjBqP,EAAAA,UAAU,EAAErP,SAAS,CAATA,OAAAA,CAAkBA,SAAS,CA9CtB,MA8CLA,CA9CK;AA+CjBsP,EAAAA,4BAA4B,EAAEtP,SAAS,CAACU;AA/CvB,CADfoN;AAAAA,SAAAA,CAmDGnN,YAnDHmN,GAmDkB;AACpB7N,EAAAA,eADoB,EAAA,SAAA,eAAA,CAAA,EAAA,EAAA,QAAA,EAC8B;AAChD,WAAOyF,IAAI,CAAJA,IAAAA,CACL,CAACnD,EAAE,CAAFA,CAAAA,GAAOgN,QAAQ,CAAhB,CAAA,KAAuBhN,EAAE,CAAFA,CAAAA,GAAOgN,QAAQ,CAAtC,CAAA,IACE,CAAChN,EAAE,CAAFA,CAAAA,GAAOgN,QAAQ,CAAhB,CAAA,KAAuBhN,EAAE,CAAFA,CAAAA,GAAOgN,QAAQ,CAF1C,CAEI,CAFG7J,CAAP;AAFkB,GAAA;AAOpBnE,EAAAA,aAAa,EAPO,EAAA;AAQpBwN,EAAAA,SAAS,EARW,IAAA;AASpBtL,EAAAA,OAAO,EATa,eAAA;AAUpBuL,EAAAA,eAAe,EAVK,eAAA;AAWpBE,EAAAA,kCAAkC,EAXd,KAAA;AAYpBxR,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EADA,MAAA;AAELC,IAAAA,MAAM,EAFD,MAAA;AAGLG,IAAAA,MAAM,EAHD,CAAA;AAILC,IAAAA,OAAO,EAJF,CAAA;AAKLC,IAAAA,QAAQ,EAAE;AALL,GAZa;AAmBpBoR,EAAAA,UAAU,EAnBU,EAAA;AAoBpBG,EAAAA,OAAO,EApBa,EAAA;AAqBpB5K,EAAAA,cAAc,EArBM,KAAA;AAsBpB0K,EAAAA,4BAA4B,EAAE;AAtBV,CAnDlBxB;AAAAA,SAAAA,CA4EGkB,eA5EHlB,GA4EqBkB,eA5ErBlB","sourcesContent":["import React, { Component } from 'react';\n\nconst style = {\n  width: '100%',\n  height: '100%',\n  left: 0,\n  top: 0,\n  margin: 0,\n  padding: 0,\n  position: 'absolute',\n};\n\nexport default class GoogleMapMap extends Component {\n  shouldComponentUpdate() {\n    return false; // disable react on this div\n  }\n\n  render() {\n    const { registerChild } = this.props;\n    return <div ref={registerChild} style={style} />;\n  }\n}\n","import EventEmitter from 'eventemitter3';\n\nexport default class MarkerDispatcher extends EventEmitter {\n  constructor(gmapInstance) {\n    super();\n    this.gmapInstance = gmapInstance;\n  }\n\n  getChildren() {\n    return this.gmapInstance.props.children;\n  }\n\n  getMousePosition() {\n    return this.gmapInstance.mouse_;\n  }\n\n  getUpdateCounter() {\n    return this.gmapInstance.updateCounter_;\n  }\n\n  dispose() {\n    this.gmapInstance = null;\n    this.removeAllListeners();\n  }\n}\n","// https://github.com/acdlite/recompose/blob/master/src/packages/recompose/utils/omit.js\nconst omit = (obj, keys) => {\n  const { ...rest } = obj;\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    if (key in rest) {\n      delete rest[key];\n    }\n  }\n  return rest;\n};\n\nexport default omit;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @providesModule shallowEqual\n * @typechecks\n * @flow\n */\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * inlined Object.is polyfill to avoid requiring consumers ship their own\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n */\nfunction is(x, y) {\n  // SameValue algorithm\n  if (x === y) {\n    // Steps 1-5, 7-10\n    // Steps 6.b-6.e: +0 != -0\n    // Added the nonzero y check to make Flow happy, but it is redundant\n    return x !== 0 || y !== 0 || 1 / x === 1 / y;\n  }\n  // Step 6.a: NaN == NaN\n  // eslint-disable-next-line no-self-compare\n  return x !== x && y !== y;\n}\n\n/**\n * Performs equality by iterating through keys on an object and returning false\n * when any key has values which are not strictly equal between the arguments.\n * Returns true when the values of all keys are strictly equal.\n */\nfunction shallowEqual(objA, objB) {\n  if (is(objA, objB)) {\n    return true;\n  }\n\n  if (\n    typeof objA !== 'object' ||\n    objA === null ||\n    typeof objB !== 'object' ||\n    objB === null\n  ) {\n    return false;\n  }\n\n  const keysA = Object.keys(objA);\n  const keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  // Test for A's keys different from B.\n  for (let i = 0; i < keysA.length; i++) {\n    if (\n      !hasOwnProperty.call(objB, keysA[i]) ||\n      !is(objA[keysA[i]], objB[keysA[i]])\n    ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport default shallowEqual;\n/* src: https://github.com/facebook/fbjs/blob/master/packages/fbjs/src/core/shallowEqual.js */\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n// utils\nimport omit from './utils/omit';\nimport shallowEqual from './utils/shallowEqual';\n\nconst mainStyle = {\n  width: '100%',\n  height: '100%',\n  left: 0,\n  top: 0,\n  margin: 0,\n  padding: 0,\n  position: 'absolute',\n};\n\nconst style = {\n  width: 0,\n  height: 0,\n  left: 0,\n  top: 0,\n  backgroundColor: 'transparent',\n  position: 'absolute',\n};\n\nexport default class GoogleMapMarkers extends Component {\n  /* eslint-disable react/forbid-prop-types */\n  static propTypes = {\n    geoService: PropTypes.any,\n    style: PropTypes.any,\n    distanceToMouse: PropTypes.func,\n    dispatcher: PropTypes.any,\n    onChildClick: PropTypes.func,\n    onChildMouseDown: PropTypes.func,\n    onChildMouseLeave: PropTypes.func,\n    onChildMouseEnter: PropTypes.func,\n    getHoverDistance: PropTypes.func,\n    insideMapPanes: PropTypes.bool,\n    prerender: PropTypes.bool,\n  };\n  /* eslint-enable react/forbid-prop-types */\n\n  static defaultProps = {\n    insideMapPanes: false,\n    prerender: false,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.dimensionsCache_ = {};\n    this.hoverKey_ = null;\n    this.hoverChildProps_ = null;\n    this.allowMouse_ = true;\n\n    this.state = { ...this._getState(), hoverKey: null };\n  }\n\n  componentDidMount() {\n    this.props.dispatcher.on('kON_CHANGE', this._onChangeHandler);\n    this.props.dispatcher.on(\n      'kON_MOUSE_POSITION_CHANGE',\n      this._onMouseChangeHandler\n    );\n    this.props.dispatcher.on('kON_CLICK', this._onChildClick);\n    this.props.dispatcher.on('kON_MDOWN', this._onChildMouseDown);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.props.experimental === true) {\n      return (\n        !shallowEqual(this.props, nextProps) ||\n        !shallowEqual(\n          omit(this.state, ['hoverKey']),\n          omit(nextState, ['hoverKey'])\n        )\n      );\n    }\n\n    return (\n      !shallowEqual(this.props, nextProps) ||\n      !shallowEqual(this.state, nextState)\n    );\n  }\n\n  componentWillUnmount() {\n    this.props.dispatcher.removeListener('kON_CHANGE', this._onChangeHandler);\n    this.props.dispatcher.removeListener(\n      'kON_MOUSE_POSITION_CHANGE',\n      this._onMouseChangeHandler\n    );\n    this.props.dispatcher.removeListener('kON_CLICK', this._onChildClick);\n    this.props.dispatcher.removeListener('kON_MDOWN', this._onChildMouseDown);\n\n    this.dimensionsCache_ = null;\n  }\n\n  _getState = () => ({\n    children: this.props.dispatcher.getChildren(),\n    updateCounter: this.props.dispatcher.getUpdateCounter(),\n  });\n\n  _onChangeHandler = () => {\n    if (!this.dimensionsCache_) {\n      return;\n    }\n\n    const prevChildCount = (this.state.children || []).length;\n    const state = this._getState();\n\n    this.setState(\n      state,\n      () =>\n        (state.children || []).length !== prevChildCount &&\n        this._onMouseChangeHandler()\n    );\n  };\n\n  _onChildClick = () => {\n    if (this.props.onChildClick) {\n      if (this.hoverChildProps_) {\n        const hoverKey = this.hoverKey_;\n        const childProps = this.hoverChildProps_;\n        // click works only on hovered item\n        this.props.onChildClick(hoverKey, childProps);\n      }\n    }\n  };\n\n  _onChildMouseDown = () => {\n    if (this.props.onChildMouseDown) {\n      if (this.hoverChildProps_) {\n        const hoverKey = this.hoverKey_;\n        const childProps = this.hoverChildProps_;\n        // works only on hovered item\n        this.props.onChildMouseDown(hoverKey, childProps);\n      }\n    }\n  };\n\n  _onChildMouseEnter = (hoverKey, childProps) => {\n    if (!this.dimensionsCache_) {\n      return;\n    }\n\n    if (this.props.onChildMouseEnter) {\n      this.props.onChildMouseEnter(hoverKey, childProps);\n    }\n\n    this.hoverChildProps_ = childProps;\n    this.hoverKey_ = hoverKey;\n    this.setState({ hoverKey });\n  };\n\n  _onChildMouseLeave = () => {\n    if (!this.dimensionsCache_) {\n      return;\n    }\n\n    const hoverKey = this.hoverKey_;\n    const childProps = this.hoverChildProps_;\n\n    if (hoverKey !== undefined && hoverKey !== null) {\n      if (this.props.onChildMouseLeave) {\n        this.props.onChildMouseLeave(hoverKey, childProps);\n      }\n\n      this.hoverKey_ = null;\n      this.hoverChildProps_ = null;\n      this.setState({ hoverKey: null });\n    }\n  };\n\n  _onMouseAllow = (value) => {\n    if (!value) {\n      this._onChildMouseLeave();\n    }\n\n    this.allowMouse_ = value;\n  };\n\n  _onMouseChangeHandler = () => {\n    if (this.allowMouse_) {\n      this._onMouseChangeHandlerRaf();\n    }\n  };\n\n  _onMouseChangeHandlerRaf = () => {\n    if (!this.dimensionsCache_) {\n      return;\n    }\n\n    const mp = this.props.dispatcher.getMousePosition();\n\n    if (mp) {\n      const distances = [];\n      const hoverDistance = this.props.getHoverDistance();\n\n      React.Children.forEach(this.state.children, (child, childIndex) => {\n        if (!child) return;\n        // layers\n        if (\n          child.props.latLng === undefined &&\n          child.props.lat === undefined &&\n          child.props.lng === undefined\n        ) {\n          return;\n        }\n\n        const childKey =\n          child.key !== undefined && child.key !== null\n            ? child.key\n            : childIndex;\n        const dist = this.props.distanceToMouse(\n          this.dimensionsCache_[childKey],\n          mp,\n          child.props\n        );\n        if (dist < hoverDistance) {\n          distances.push({\n            key: childKey,\n            dist,\n            props: child.props,\n          });\n        }\n      });\n\n      if (distances.length) {\n        distances.sort((a, b) => a.dist - b.dist);\n        const hoverKey = distances[0].key;\n        const childProps = distances[0].props;\n\n        if (this.hoverKey_ !== hoverKey) {\n          this._onChildMouseLeave();\n\n          this._onChildMouseEnter(hoverKey, childProps);\n        }\n      } else {\n        this._onChildMouseLeave();\n      }\n    } else {\n      this._onChildMouseLeave();\n    }\n  };\n\n  _getDimensions = (key) => {\n    const childKey = key;\n    return this.dimensionsCache_[childKey];\n  };\n\n  render() {\n    const mainElementStyle = this.props.style || mainStyle;\n    this.dimensionsCache_ = {};\n\n    const markers = React.Children.map(\n      this.state.children,\n      (child, childIndex) => {\n        if (!child) return undefined;\n        if (\n          child.props.latLng === undefined &&\n          child.props.lat === undefined &&\n          child.props.lng === undefined\n        ) {\n          return React.cloneElement(child, {\n            $geoService: this.props.geoService,\n            $onMouseAllow: this._onMouseAllow,\n            $prerender: this.props.prerender,\n          });\n        }\n\n        const latLng =\n          child.props.latLng !== undefined\n            ? child.props.latLng\n            : { lat: child.props.lat, lng: child.props.lng };\n\n        const pt = this.props.insideMapPanes\n          ? this.props.geoService.fromLatLngToDivPixel(latLng)\n          : this.props.geoService.fromLatLngToCenterPixel(latLng);\n\n        const stylePtPos = {\n          left: pt.x,\n          top: pt.y,\n        };\n\n        // If the component has a southeast corner defined (either as a LatLng, or a separate\n        // lat and lng pair), set the width and height based on the distance between the northwest\n        // and the southeast corner to lock the overlay to the correct geographic bounds.\n        if (\n          child.props.seLatLng !== undefined ||\n          (child.props.seLat !== undefined && child.props.seLng !== undefined)\n        ) {\n          const seLatLng =\n            child.props.seLatLng !== undefined\n              ? child.props.seLatLng\n              : { lat: child.props.seLat, lng: child.props.seLng };\n\n          const sePt = this.props.insideMapPanes\n            ? this.props.geoService.fromLatLngToDivPixel(seLatLng)\n            : this.props.geoService.fromLatLngToCenterPixel(seLatLng);\n\n          stylePtPos.width = sePt.x - pt.x;\n          stylePtPos.height = sePt.y - pt.y;\n        }\n\n        const containerPt = this.props.geoService.fromLatLngToContainerPixel(\n          latLng\n        );\n\n        // to prevent rerender on child element i need to pass\n        // const params $getDimensions and $dimensionKey instead of dimension object\n        const childKey =\n          child.key !== undefined && child.key !== null\n            ? child.key\n            : childIndex;\n\n        this.dimensionsCache_[childKey] = {\n          x: containerPt.x,\n          y: containerPt.y,\n          ...latLng,\n        };\n\n        return (\n          <div\n            key={childKey}\n            style={{ ...style, ...stylePtPos }}\n            className={child.props.$markerHolderClassName}\n          >\n            {React.cloneElement(child, {\n              $hover: childKey === this.state.hoverKey,\n              $getDimensions: this._getDimensions,\n              $dimensionKey: childKey,\n              $geoService: this.props.geoService,\n              $onMouseAllow: this._onMouseAllow,\n              $prerender: this.props.prerender,\n            })}\n          </div>\n        );\n      }\n    );\n\n    return <div style={mainElementStyle}>{markers}</div>;\n  }\n}\n","import React from 'react';\nimport GoogleMapMarkers from './google_map_markers';\n\nconst style = {\n  width: '50%',\n  height: '50%',\n  left: '50%',\n  top: '50%',\n  // backgroundColor: 'red',\n  margin: 0,\n  padding: 0,\n  position: 'absolute',\n  // opacity: 0.3\n};\n\nexport default function (props) {\n  return (\n    <div style={style}>\n      <GoogleMapMarkers {...props} prerender />\n    </div>\n  );\n}\n","export const generateHeatmap = (instance, { positions }) =>\n  new instance.visualization.HeatmapLayer({\n    data: positions.reduce((acc, { lat, lng, weight = 1 }) => {\n      acc.push({\n        location: new instance.LatLng(lat, lng),\n        weight,\n      });\n      return acc;\n    }, []),\n  });\n\nexport const optionsHeatmap = (instance, { options = {} }) =>\n  Object.keys(options).map((option) => instance.set(option, options[option]));\n","const BASE_URL = 'https://maps';\nconst DEFAULT_URL = `${BASE_URL}.googleapis.com`;\nconst API_PATH = '/maps/api/js?callback=_$_google_map_initialize_$_';\n\nlet $script_ = null;\n\nlet loadPromise_;\n\nlet resolveCustomPromise_;\n\nconst _customPromise = new Promise((resolve) => {\n  resolveCustomPromise_ = resolve;\n});\n\n// TODO add libraries language and other map options\nexport default (bootstrapURLKeys, heatmapLibrary) => {\n  if (!$script_) {\n    $script_ = require('scriptjs'); // eslint-disable-line\n  }\n\n  // call from outside google-map-react\n  // will be as soon as loadPromise_ resolved\n  if (!bootstrapURLKeys) {\n    return _customPromise;\n  }\n\n  if (loadPromise_) {\n    return loadPromise_;\n  }\n\n  loadPromise_ = new Promise((resolve, reject) => {\n    if (typeof window === 'undefined') {\n      reject(new Error('google map cannot be loaded outside browser env'));\n      return;\n    }\n\n    if (window.google && window.google.maps) {\n      resolve(window.google.maps);\n      return;\n    }\n\n    if (typeof window._$_google_map_initialize_$_ !== 'undefined') {\n      reject(new Error('google map initialization error'));\n    }\n\n    window._$_google_map_initialize_$_ = () => {\n      delete window._$_google_map_initialize_$_;\n      resolve(window.google.maps);\n    };\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (Object.keys(bootstrapURLKeys).indexOf('callback') > -1) {\n        const message = `\"callback\" key in bootstrapURLKeys is not allowed,\n                          use onGoogleApiLoaded property instead`;\n        // eslint-disable-next-line no-console\n        console.error(message);\n        throw new Error(message);\n      }\n    }\n\n    const params = Object.keys(bootstrapURLKeys).reduce(\n      (r, key) => `${r}&${key}=${bootstrapURLKeys[key]}`,\n      ''\n    );\n\n    const libraries = heatmapLibrary ? '&libraries=visualization' : '';\n\n    $script_(\n      `${DEFAULT_URL}${API_PATH}${params}${libraries}`,\n      () =>\n        typeof window.google === 'undefined' &&\n        reject(new Error('google map initialization error (not loaded)'))\n    );\n  });\n\n  resolveCustomPromise_(loadPromise_);\n\n  return loadPromise_;\n};\n","/* eslint-disable import/prefer-default-export */\n\nexport function wrap(n, min, max) {\n  const d = max - min;\n  return n === max ? n : ((((n - min) % d) + d) % d) + min;\n}\n","import { wrap } from './wrap';\n\nexport default class LatLng {\n  static convert = (a) => {\n    if (a instanceof LatLng) {\n      return a;\n    }\n\n    if (Array.isArray(a)) {\n      return new LatLng(a[0], a[1]);\n    }\n\n    if ('lng' in a && 'lat' in a) {\n      return new LatLng(a.lat, a.lng);\n    }\n\n    return a;\n  };\n\n  constructor(lat, lng) {\n    if (isNaN(lat) || isNaN(lng)) {\n      throw new Error(`Invalid LatLng object: (${lat}, ${lng})`);\n    }\n    this.lat = +lat;\n    this.lng = +lng;\n  }\n\n  wrap() {\n    return new LatLng(this.lat, wrap(this.lng, -180, 180));\n  }\n}\n","/* eslint-disable class-methods-use-this */\nimport Point from '@mapbox/point-geometry';\nimport LatLng from './lat_lng';\nimport { wrap } from './wrap';\n\n// A single transform, generally used for a single tile to be scaled, rotated, and zoomed.\nexport default class Transform {\n  constructor(tileSize, minZoom, maxZoom) {\n    this.tileSize = tileSize || 512; // constant\n\n    this._minZoom = minZoom || 0;\n    this._maxZoom = maxZoom || 52;\n\n    this.latRange = [-85.05113, 85.05113];\n\n    this.width = 0;\n    this.height = 0;\n    this.zoom = 0;\n    this.center = new LatLng(0, 0);\n    this.angle = 0;\n  }\n\n  get minZoom() {\n    return this._minZoom;\n  }\n\n  set minZoom(zoom) {\n    this._minZoom = zoom;\n    this.zoom = Math.max(this.zoom, zoom);\n  }\n\n  get maxZoom() {\n    return this._maxZoom;\n  }\n\n  set maxZoom(zoom) {\n    this._maxZoom = zoom;\n    this.zoom = Math.min(this.zoom, zoom);\n  }\n\n  get worldSize() {\n    return this.tileSize * this.scale;\n  }\n\n  get centerPoint() {\n    return new Point(0, 0); // this.size._div(2);\n  }\n\n  get size() {\n    return new Point(this.width, this.height);\n  }\n\n  get bearing() {\n    return (-this.angle / Math.PI) * 180;\n  }\n\n  set bearing(bearing) {\n    this.angle = (-wrap(bearing, -180, 180) * Math.PI) / 180;\n  }\n\n  get zoom() {\n    return this._zoom;\n  }\n\n  set zoom(zoom) {\n    const zoomV = Math.min(Math.max(zoom, this.minZoom), this.maxZoom);\n    this._zoom = zoomV;\n    this.scale = this.zoomScale(zoomV);\n    this.tileZoom = Math.floor(zoomV);\n    this.zoomFraction = zoomV - this.tileZoom;\n  }\n\n  zoomScale(zoom) {\n    return Math.pow(2, zoom);\n  }\n\n  scaleZoom(scale) {\n    return Math.log(scale) / Math.LN2;\n  }\n\n  project(latlng, worldSize) {\n    return new Point(\n      this.lngX(latlng.lng, worldSize),\n      this.latY(latlng.lat, worldSize)\n    );\n  }\n\n  unproject(point, worldSize) {\n    return new LatLng(\n      this.yLat(point.y, worldSize),\n      this.xLng(point.x, worldSize)\n    );\n  }\n\n  get x() {\n    return this.lngX(this.center.lng);\n  }\n\n  get y() {\n    return this.latY(this.center.lat);\n  }\n\n  get point() {\n    return new Point(this.x, this.y);\n  }\n\n  // lat/lon <-> absolute pixel coords convertion\n  lngX(lon, worldSize) {\n    return ((180 + lon) * (worldSize || this.worldSize)) / 360;\n  }\n\n  // latitude to absolute y coord\n  latY(lat, worldSize) {\n    const y =\n      (180 / Math.PI) * Math.log(Math.tan(Math.PI / 4 + (lat * Math.PI) / 360));\n    return ((180 - y) * (worldSize || this.worldSize)) / 360;\n  }\n\n  xLng(x, worldSize) {\n    return (x * 360) / (worldSize || this.worldSize) - 180;\n  }\n\n  yLat(y, worldSize) {\n    const y2 = 180 - (y * 360) / (worldSize || this.worldSize);\n    return (360 / Math.PI) * Math.atan(Math.exp((y2 * Math.PI) / 180)) - 90;\n  }\n\n  locationPoint(latlng) {\n    const p = this.project(latlng);\n    return this.centerPoint._sub(this.point._sub(p)._rotate(this.angle));\n  }\n\n  pointLocation(p) {\n    const p2 = this.centerPoint._sub(p)._rotate(-this.angle);\n    return this.unproject(this.point.sub(p2));\n  }\n}\n","import Point from '@mapbox/point-geometry';\n\nimport LatLng from './lat_lng';\nimport Transform from './transform';\n\nexport default class Geo {\n  constructor(tileSize) {\n    // left_top view  \n    // super();\n    this.hasSize_ = false;\n    this.hasView_ = false;\n    this.transform_ = new Transform(tileSize || 512);\n  }\n\n  setView(center, zoom, bearing) {\n    this.transform_.center = LatLng.convert(center);\n    this.transform_.zoom = +zoom;\n    this.transform_.bearing = +bearing;\n    this.hasView_ = true;\n  }\n\n  setViewSize(width, height) {\n    this.transform_.width = width;\n    this.transform_.height = height;\n    this.hasSize_ = true;\n  }\n\n  setMapCanvasProjection(maps, mapCanvasProjection) {\n    this.maps_ = maps;\n    this.mapCanvasProjection_ = mapCanvasProjection;\n  }\n\n  canProject() {\n    return this.hasSize_ && this.hasView_;\n  }\n\n  hasSize() {\n    return this.hasSize_;\n  }\n\n  /** Returns the pixel position relative to the map center. */\n  fromLatLngToCenterPixel(ptLatLng) {\n    return this.transform_.locationPoint(LatLng.convert(ptLatLng));\n  }\n\n  /**\n   * Returns the pixel position relative to the map panes,\n   * or relative to the map center if there are no panes.\n   */\n  fromLatLngToDivPixel(ptLatLng) {\n    if (this.mapCanvasProjection_) {\n      const latLng = new this.maps_.LatLng(ptLatLng.lat, ptLatLng.lng);\n      return this.mapCanvasProjection_.fromLatLngToDivPixel(latLng);\n    }\n    return this.fromLatLngToCenterPixel(ptLatLng);\n  }\n\n  /** Returns the pixel position relative to the map top-left. */\n  fromLatLngToContainerPixel(ptLatLng) {\n    if (this.mapCanvasProjection_) {\n      const latLng = new this.maps_.LatLng(ptLatLng.lat, ptLatLng.lng);\n      return this.mapCanvasProjection_.fromLatLngToContainerPixel(latLng);\n    }\n\n    const pt = this.fromLatLngToCenterPixel(ptLatLng);\n    pt.x -=\n      this.transform_.worldSize * Math.round(pt.x / this.transform_.worldSize);\n\n    pt.x += this.transform_.width / 2;\n    pt.y += this.transform_.height / 2;\n\n    return pt;\n  }\n\n  /** Returns the LatLng for the given offset from the map top-left. */\n  fromContainerPixelToLatLng(ptXY) {\n    if (this.mapCanvasProjection_) {\n      const latLng = this.mapCanvasProjection_.fromContainerPixelToLatLng(ptXY);\n      return { lat: latLng.lat(), lng: latLng.lng() };\n    }\n\n    const ptxy = { ...ptXY };\n    ptxy.x -= this.transform_.width / 2;\n    ptxy.y -= this.transform_.height / 2;\n    const ptRes = this.transform_.pointLocation(Point.convert(ptxy));\n\n    ptRes.lng -= 360 * Math.round(ptRes.lng / 360); // convert 2 google format\n    return ptRes;\n  }\n\n  getWidth() {\n    return this.transform_.width;\n  }\n\n  getHeight() {\n    return this.transform_.height;\n  }\n\n  getZoom() {\n    return this.transform_.zoom;\n  }\n\n  getCenter() {\n    const ptRes = this.transform_.pointLocation({ x: 0, y: 0 });\n\n    return ptRes;\n  }\n\n  getBounds(margins, roundFactor) {\n    const bndT = (margins && margins[0]) || 0;\n    const bndR = (margins && margins[1]) || 0;\n    const bndB = (margins && margins[2]) || 0;\n    const bndL = (margins && margins[3]) || 0;\n\n    if (\n      this.getWidth() - bndR - bndL > 0 &&\n      this.getHeight() - bndT - bndB > 0\n    ) {\n      const topLeftCorner = this.transform_.pointLocation(\n        Point.convert({\n          x: bndL - this.getWidth() / 2,\n          y: bndT - this.getHeight() / 2,\n        })\n      );\n      const bottomRightCorner = this.transform_.pointLocation(\n        Point.convert({\n          x: this.getWidth() / 2 - bndR,\n          y: this.getHeight() / 2 - bndB,\n        })\n      );\n\n      let res = [\n        topLeftCorner.lat,\n        topLeftCorner.lng, // NW\n        bottomRightCorner.lat,\n        bottomRightCorner.lng, // SE\n        bottomRightCorner.lat,\n        topLeftCorner.lng, // SW\n        topLeftCorner.lat,\n        bottomRightCorner.lng, // NE\n      ];\n\n      if (roundFactor) {\n        res = res.map((r) => Math.round(r * roundFactor) / roundFactor);\n      }\n      return res;\n    }\n\n    return [0, 0, 0, 0];\n  }\n}\n","export default function raf(callback) {\n  if (window.requestAnimationFrame) {\n    return window.requestAnimationFrame(callback);\n  }\n\n  const nativeRaf =\n    window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame;\n\n  return nativeRaf\n    ? nativeRaf(callback)\n    : window.setTimeout(callback, 1e3 / 60);\n}\n","const log2 = Math.log2 ? Math.log2 : (x) => Math.log(x) / Math.LN2;\n\nexport default log2;\n","// source taken from https://github.com/rackt/redux/blob/master/src/utils/pick.js\n\nexport default function pick(obj, fn) {\n  return Object.keys(obj).reduce((result, key) => {\n    if (fn(obj[key])) {\n        result[key] = obj[key]; // eslint-disable-line\n    }\n    return result;\n  }, {});\n}\n","const isEmpty = (val) => {\n  // check for empty object {}, array []\n  if (val !== null && typeof val === 'object') {\n    if (Object.keys(val).length === 0) {\n      return true;\n    }\n  } else if (val === null || val === undefined || val === '') {\n    // check for undefined, null and \"\"\n    return true;\n  }\n  return false;\n};\n\nexport default isEmpty;\n","function isObjectLike(value) {\n  return !!value && typeof value === 'object';\n}\n\nconst objectToString = Object.prototype.toString;\n\nexport default function isNumber(value) {\n  const numberTag = '[object Number]';\n  return (\n    typeof value === 'number' ||\n    (isObjectLike(value) && objectToString.call(value) === numberTag)\n  );\n}\n","// http://stackoverflow.com/questions/5899783/detect-safari-chrome-ie-firefox-opera-with-user-agent\nlet detectBrowserResult_ = null;\n\nexport default function detectBrowser() {\n  if (detectBrowserResult_) {\n    return detectBrowserResult_;\n  }\n\n  if (typeof navigator !== 'undefined') {\n    const isExplorer = navigator.userAgent.indexOf('MSIE') > -1;\n    const isFirefox = navigator.userAgent.indexOf('Firefox') > -1;\n    const isOpera = navigator.userAgent.toLowerCase().indexOf('op') > -1;\n\n    let isChrome = navigator.userAgent.indexOf('Chrome') > -1;\n    let isSafari = navigator.userAgent.indexOf('Safari') > -1;\n\n    if (isChrome && isSafari) {\n      isSafari = false;\n    }\n\n    if (isChrome && isOpera) {\n      isChrome = false;\n    }\n\n    detectBrowserResult_ = {\n      isExplorer,\n      isFirefox,\n      isOpera,\n      isChrome,\n      isSafari,\n    };\n    return detectBrowserResult_;\n  }\n\n  detectBrowserResult_ = {\n    isChrome: true,\n    isExplorer: false,\n    isFirefox: false,\n    isOpera: false,\n    isSafari: false,\n  };\n\n  return detectBrowserResult_;\n}\n","// source taken from https://github.com/rackt/redux/blob/master/src/utils/isPlainObject.js\nconst fnToString = (fn) => Function.prototype.toString.call(fn);\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nexport default function isPlainObject(obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  const proto =\n    typeof obj.constructor === 'function'\n      ? Object.getPrototypeOf(obj)\n      : Object.prototype;\n\n  if (proto === null) {\n    return true;\n  }\n\n  const constructor = proto.constructor;\n\n  return (\n    typeof constructor === 'function' &&\n    constructor instanceof constructor &&\n    fnToString(constructor) === fnToString(Object)\n  );\n}\n","export default function isArraysEqualEps(arrayA, arrayB, eps) {\n  if (arrayA && arrayB) {\n    for (let i = 0; i !== arrayA.length; ++i) {\n      if (Math.abs(arrayA[i] - arrayB[i]) > eps) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\n","// feature detection for passive support\n// see: https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\nfunction hasPassiveSupport() {\n  let passiveSupported = false;\n\n  try {\n    const options = Object.defineProperty({}, 'passive', {\n      get() {\n        passiveSupported = true;\n      },\n    });\n\n    window.addEventListener('test', options, options);\n    window.removeEventListener('test', options, options);\n  } catch (err) {\n    passiveSupported = false;\n  }\n\n  return passiveSupported;\n}\n\nexport default function addPassiveEventListener(\n  element,\n  eventName,\n  func,\n  capture\n) {\n  element.addEventListener(\n    eventName,\n    func,\n    hasPassiveSupport()\n      ? {\n          capture,\n          passive: true,\n        }\n      : capture\n  );\n}\n","/* eslint-disable */\n/**\n* Detect Element Resize.\n* Forked in order to guard against unsafe 'window' and 'document' references.\n*\n* https://github.com/sdecima/javascript-detect-element-resize\n* Sebastian Decima\n*\n* version: 0.5.3\n**/\n\nimport addPassiveEventListener from './passiveEvents';\n\n// Reliable `window` and `document` detection\nvar canUseDOM = !!(typeof window !== 'undefined' &&\n  window.document &&\n  window.document.createElement);\n\n// Check `document` and `window` in case of server-side rendering\nvar _window;\nif (canUseDOM) {\n  _window = window;\n} else if (typeof self !== 'undefined') {\n  _window = self;\n} else {\n  _window = this;\n}\n\nvar attachEvent = typeof document !== 'undefined' && document.attachEvent;\nvar stylesCreated = false;\n\nif (canUseDOM && !attachEvent) {\n  var requestFrame = (function () {\n    var raf = _window.requestAnimationFrame ||\n      _window.mozRequestAnimationFrame ||\n      _window.webkitRequestAnimationFrame ||\n      function (fn) {\n        return _window.setTimeout(fn, 20);\n      };\n    return function (fn) {\n      return raf(fn);\n    };\n  })();\n\n  var cancelFrame = (function () {\n    var cancel = _window.cancelAnimationFrame ||\n      _window.mozCancelAnimationFrame ||\n      _window.webkitCancelAnimationFrame ||\n      _window.clearTimeout;\n    return function (id) {\n      return cancel(id);\n    };\n  })();\n\n  var resetTriggers = function (element) {\n    var triggers = element.__resizeTriggers__,\n      expand = triggers.firstElementChild,\n      contract = triggers.lastElementChild,\n      expandChild = expand.firstElementChild;\n    contract.scrollLeft = contract.scrollWidth;\n    contract.scrollTop = contract.scrollHeight;\n    expandChild.style.width = expand.offsetWidth + 1 + 'px';\n    expandChild.style.height = expand.offsetHeight + 1 + 'px';\n    expand.scrollLeft = expand.scrollWidth;\n    expand.scrollTop = expand.scrollHeight;\n  };\n\n  var checkTriggers = function (element) {\n    return element.offsetWidth != element.__resizeLast__.width ||\n      element.offsetHeight != element.__resizeLast__.height;\n  };\n\n  var scrollListener = function (e) {\n    var element = this;\n    resetTriggers(this);\n    if (this.__resizeRAF__) cancelFrame(this.__resizeRAF__);\n    this.__resizeRAF__ = requestFrame(function () {\n      if (checkTriggers(element)) {\n        element.__resizeLast__.width = element.offsetWidth;\n        element.__resizeLast__.height = element.offsetHeight;\n        element.__resizeListeners__.forEach(function (fn) {\n          fn.call(element, e);\n        });\n      }\n    });\n  };\n\n  /* Detect CSS Animations support to detect element display/re-attach */\n  var animation = false,\n    animationstring = 'animation',\n    keyframeprefix = '',\n    animationstartevent = 'animationstart',\n    domPrefixes = 'Webkit Moz O ms'.split(' '),\n    startEvents = 'webkitAnimationStart animationstart oAnimationStart MSAnimationStart'.split(\n      ' '\n    ),\n    pfx = '';\n\n  if (canUseDOM) {\n    var elm = document.createElement('fakeelement');\n    if (elm.style.animationName !== undefined) {\n      animation = true;\n    }\n\n    if (animation === false) {\n      for (var i = 0; i < domPrefixes.length; i++) {\n        if (elm.style[domPrefixes[i] + 'AnimationName'] !== undefined) {\n          pfx = domPrefixes[i];\n          animationstring = pfx + 'Animation';\n          keyframeprefix = '-' + pfx.toLowerCase() + '-';\n          animationstartevent = startEvents[i];\n          animation = true;\n          break;\n        }\n      }\n    }\n  }\n\n  var animationName = 'resizeanim';\n  var animationKeyframes = '@' +\n    keyframeprefix +\n    'keyframes ' +\n    animationName +\n    ' { from { opacity: 0; } to { opacity: 0; } } ';\n  var animationStyle = keyframeprefix +\n    'animation: 1ms ' +\n    animationName +\n    '; ';\n}\n\nvar createStyles = function () {\n  if (!stylesCreated) {\n    //opacity:0 works around a chrome bug https://code.google.com/p/chromium/issues/detail?id=286360\n    var css = (animationKeyframes ? animationKeyframes : '') +\n      '.resize-triggers { ' +\n      (animationStyle ? animationStyle : '') +\n      'visibility: hidden; opacity: 0; } ' +\n      '.resize-triggers, .resize-triggers > div, .contract-trigger:before { content: \" \"; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',\n      head = document.head || document.getElementsByTagName('head')[0],\n      style = document.createElement('style');\n\n    style.type = 'text/css';\n    if (style.styleSheet) {\n      style.styleSheet.cssText = css;\n    } else {\n      style.appendChild(document.createTextNode(css));\n    }\n\n    head.appendChild(style);\n    stylesCreated = true;\n  }\n};\n\nvar addResizeListener = function (element, fn) {\n  if (element.parentNode === undefined) {\n    var tempParentDiv = document.createElement('div');\n    element.parentNode = tempParentDiv;\n  }\n  element = element.parentNode;\n  if (attachEvent)\n    element.attachEvent('onresize', fn);\n  else {\n    if (!element.__resizeTriggers__) {\n      if (getComputedStyle(element).position == 'static')\n        element.style.position = 'relative';\n      createStyles();\n      element.__resizeLast__ = {};\n      element.__resizeListeners__ = [];\n      (element.__resizeTriggers__ = document.createElement(\n        'div'\n      )).className = 'resize-triggers';\n      element.__resizeTriggers__.innerHTML = '<div class=\"expand-trigger\"><div></div></div>' +\n        '<div class=\"contract-trigger\"></div>';\n      element.appendChild(element.__resizeTriggers__);\n      resetTriggers(element);\n\n      addPassiveEventListener(element, 'scroll', scrollListener, true);\n\n      /* Listen for a css animation to detect element display/re-attach */\n      animationstartevent &&\n        element.__resizeTriggers__.addEventListener(\n          animationstartevent,\n          function (e) {\n            if (e.animationName == animationName) resetTriggers(element);\n          }\n        );\n    }\n    element.__resizeListeners__.push(fn);\n  }\n};\n\nvar removeResizeListener = function (element, fn) {\n  element = element.parentNode;\n  if (attachEvent)\n    element.detachEvent('onresize', fn);\n  else {\n    element.__resizeListeners__.splice(\n      element.__resizeListeners__.indexOf(fn),\n      1\n    );\n    if (!element.__resizeListeners__.length) {\n      element.removeEventListener('scroll', scrollListener);\n      element.__resizeTriggers__ = !element.removeChild(\n        element.__resizeTriggers__\n      );\n    }\n  }\n};\n\nexport {\n  addResizeListener,\n  removeResizeListener,\n};\n","/* eslint-disable import/no-extraneous-dependencies, react/forbid-prop-types, react/no-find-dom-node, no-console, no-undef */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\n\n// helpers\nimport GoogleMapMap from './google_map_map';\nimport MarkerDispatcher from './marker_dispatcher';\nimport GoogleMapMarkers from './google_map_markers';\nimport GoogleMapMarkersPrerender from './google_map_markers_prerender';\nimport { generateHeatmap, optionsHeatmap } from './google_heatmap';\n\n// loaders\nimport googleMapLoader from './loaders/google_map_loader';\n\n// lib\nimport Geo from './lib/geo';\n\n// tools\nimport raf from './utils/raf';\nimport log2 from './utils/log2';\nimport omit from './utils/omit';\nimport pick from './utils/pick';\nimport isEmpty from './utils/isEmpty';\nimport isNumber from './utils/isNumber';\nimport detectBrowser from './utils/detect';\nimport shallowEqual from './utils/shallowEqual';\nimport isPlainObject from './utils/isPlainObject';\nimport isArraysEqualEps from './utils/isArraysEqualEps';\nimport {\n  addResizeListener,\n  removeResizeListener,\n} from './utils/detectElementResize';\nimport addPassiveEventListener from './utils/passiveEvents';\n\n// consts\nconst kEPS = 0.00001;\nconst K_GOOGLE_TILE_SIZE = 256;\n// real minZoom calculated here _getMinZoom\nconst K_IDLE_TIMEOUT = 100;\nconst K_IDLE_CLICK_TIMEOUT = 300;\nconst DEFAULT_MIN_ZOOM = 3;\n// Starting with version 3.32, the maps API calls `draw()` each frame during\n// a zoom animation.\nconst DRAW_CALLED_DURING_ANIMATION_VERSION = 32;\nconst IS_REACT_16 = ReactDOM.createPortal !== undefined;\n\nconst createPortal = IS_REACT_16\n  ? ReactDOM.createPortal\n  : ReactDOM.unstable_renderSubtreeIntoContainer;\n\nfunction defaultOptions_(/* maps */) {\n  return {\n    overviewMapControl: false,\n    streetViewControl: false,\n    rotateControl: true,\n    mapTypeControl: false,\n    // disable poi\n    styles: [\n      {\n        featureType: 'poi',\n        elementType: 'labels',\n        stylers: [{ visibility: 'off' }],\n      },\n    ],\n    minZoom: DEFAULT_MIN_ZOOM, // dynamically recalculted if possible during init\n  };\n}\n\nconst latLng2Obj = (latLng) =>\n  isPlainObject(latLng) ? latLng : { lat: latLng[0], lng: latLng[1] };\n\nconst _checkMinZoom = (zoom, minZoom) => {\n  if (process.env.NODE_ENV !== 'production') {\n    if (zoom < minZoom) {\n      console.warn(\n        'GoogleMap: ' + // eslint-disable-line\n          'minZoom option is less than recommended ' +\n          'minZoom option for your map sizes.\\n' +\n          'overrided to value ' +\n          minZoom\n      );\n    }\n  }\n\n  if (minZoom < zoom) {\n    return zoom;\n  }\n  return minZoom;\n};\n\nconst isFullScreen = () =>\n  document.fullscreen ||\n  document.webkitIsFullScreen ||\n  document.mozFullScreen ||\n  document.msFullscreenElement;\n\nclass GoogleMap extends Component {\n  static propTypes = {\n    apiKey: PropTypes.string,\n    bootstrapURLKeys: PropTypes.any,\n\n    defaultCenter: PropTypes.oneOfType([\n      PropTypes.array,\n      PropTypes.shape({\n        lat: PropTypes.number,\n        lng: PropTypes.number,\n      }),\n    ]),\n    center: PropTypes.oneOfType([\n      PropTypes.array,\n      PropTypes.shape({\n        lat: PropTypes.number,\n        lng: PropTypes.number,\n      }),\n    ]),\n    defaultZoom: PropTypes.number,\n    zoom: PropTypes.number,\n    onBoundsChange: PropTypes.func,\n    onChange: PropTypes.func,\n    onClick: PropTypes.func,\n    onChildClick: PropTypes.func,\n    onChildMouseDown: PropTypes.func,\n    onChildMouseUp: PropTypes.func,\n    onChildMouseMove: PropTypes.func,\n    onChildMouseEnter: PropTypes.func,\n    onChildMouseLeave: PropTypes.func,\n    onZoomAnimationStart: PropTypes.func,\n    onZoomAnimationEnd: PropTypes.func,\n    onDrag: PropTypes.func,\n    onDragEnd: PropTypes.func,\n    onMapTypeIdChange: PropTypes.func,\n    onTilesLoaded: PropTypes.func,\n    options: PropTypes.any,\n    distanceToMouse: PropTypes.func,\n    hoverDistance: PropTypes.number,\n    debounced: PropTypes.bool,\n    margin: PropTypes.array,\n    googleMapLoader: PropTypes.any,\n    onGoogleApiLoaded: PropTypes.func,\n    yesIWantToUseGoogleMapApiInternals: PropTypes.bool,\n    draggable: PropTypes.bool,\n    style: PropTypes.any,\n    resetBoundsOnResize: PropTypes.bool,\n    layerTypes: PropTypes.arrayOf(PropTypes.string), // ['TransitLayer', 'TrafficLayer']\n    shouldUnregisterMapOnUnmount: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    distanceToMouse(pt, mousePos /* , markerProps */) {\n      return Math.sqrt(\n        (pt.x - mousePos.x) * (pt.x - mousePos.x) +\n          (pt.y - mousePos.y) * (pt.y - mousePos.y)\n      );\n    },\n    hoverDistance: 30,\n    debounced: true,\n    options: defaultOptions_,\n    googleMapLoader,\n    yesIWantToUseGoogleMapApiInternals: false,\n    style: {\n      width: '100%',\n      height: '100%',\n      margin: 0,\n      padding: 0,\n      position: 'relative',\n    },\n    layerTypes: [],\n    heatmap: {},\n    heatmapLibrary: false,\n    shouldUnregisterMapOnUnmount: true,\n  };\n\n  static googleMapLoader = googleMapLoader; // eslint-disable-line\n\n  constructor(props) {\n    super(props);\n    this.mounted_ = false;\n    this.initialized_ = false;\n    this.googleApiLoadedCalled_ = false;\n\n    this.map_ = null;\n    this.maps_ = null;\n    this.prevBounds_ = null;\n    this.heatmap = null;\n\n    this.layers_ = {};\n\n    this.mouse_ = null;\n    this.mouseMoveTime_ = 0;\n    this.boundingRect_ = null;\n    this.mouseInMap_ = true;\n\n    this.dragTime_ = 0;\n    this.fireMouseEventOnIdle_ = false;\n    this.updateCounter_ = 0;\n\n    this.markersDispatcher_ = new MarkerDispatcher(this);\n    this.geoService_ = new Geo(K_GOOGLE_TILE_SIZE);\n    this.centerIsObject_ = isPlainObject(this.props.center);\n\n    this.minZoom_ = DEFAULT_MIN_ZOOM;\n    this.defaultDraggableOption_ = true;\n\n    this.zoomControlClickTime_ = 0;\n\n    this.childMouseDownArgs_ = null;\n    this.childMouseUpTime_ = 0;\n\n    this.googleMapDom_ = null;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.props.apiKey) {\n        console.warn(\n          'GoogleMap: ' + // eslint-disable-line no-console\n            'apiKey is deprecated, use ' +\n            'bootstrapURLKeys={{key: YOUR_API_KEY}} instead.'\n        );\n      }\n\n      if (this.props.onBoundsChange) {\n        console.warn(\n          'GoogleMap: ' + // eslint-disable-line no-console\n            'onBoundsChange is deprecated, use ' +\n            'onChange({center, zoom, bounds, ...other}) instead.'\n        );\n      }\n\n      if (isEmpty(this.props.center) && isEmpty(this.props.defaultCenter)) {\n        console.warn(\n          'GoogleMap: center or defaultCenter property must be defined' // eslint-disable-line no-console\n        );\n      }\n\n      if (isEmpty(this.props.zoom) && isEmpty(this.props.defaultZoom)) {\n        console.warn(\n          'GoogleMap: zoom or defaultZoom property must be defined' // eslint-disable-line no-console\n        );\n      }\n    }\n\n    if (this._isCenterDefined(this.props.center || this.props.defaultCenter)) {\n      const propsCenter = latLng2Obj(\n        this.props.center || this.props.defaultCenter\n      );\n      this.geoService_.setView(\n        propsCenter,\n        this.props.zoom || this.props.defaultZoom,\n        0\n      );\n    }\n\n    this.zoomAnimationInProgress_ = false;\n\n    this.state = {\n      overlay: null,\n    };\n  }\n\n  componentDidMount() {\n    this.mounted_ = true;\n    addPassiveEventListener(window, 'resize', this._onWindowResize, false);\n    addPassiveEventListener(window, 'keydown', this._onKeyDownCapture, true);\n    const mapDom = ReactDOM.findDOMNode(this.googleMapDom_);\n    // gmap can't prevent map drag if mousedown event already occured\n    // the only workaround I find is prevent mousedown native browser event\n\n    if (mapDom) {\n      addPassiveEventListener(\n        mapDom,\n        'mousedown',\n        this._onMapMouseDownNative,\n        true\n      );\n    }\n\n    addPassiveEventListener(window, 'mouseup', this._onChildMouseUp, false);\n    const bootstrapURLKeys = {\n      ...(this.props.apiKey && { key: this.props.apiKey }),\n      ...this.props.bootstrapURLKeys,\n    };\n\n    this.props.googleMapLoader(bootstrapURLKeys, this.props.heatmapLibrary); // we can start load immediatly\n\n    setTimeout(\n      () => {\n        // to detect size\n        this._setViewSize();\n        if (\n          this._isCenterDefined(this.props.center || this.props.defaultCenter)\n        ) {\n          this._initMap();\n        }\n      },\n      0,\n      this\n    );\n    if (this.props.resetBoundsOnResize) {\n      const that = this;\n      addResizeListener(mapDom, that._mapDomResizeCallback);\n    }\n  }\n\n  // eslint-disable-next-line camelcase\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!shallowEqual(this.props.defaultCenter, nextProps.defaultCenter)) {\n        console.warn(\n          \"GoogleMap: defaultCenter prop changed. You can't change default props.\"\n        );\n      }\n\n      if (!shallowEqual(this.props.defaultZoom, nextProps.defaultZoom)) {\n        console.warn(\n          \"GoogleMap: defaultZoom prop changed. You can't change default props.\"\n        );\n      }\n    }\n\n    if (\n      !this._isCenterDefined(this.props.center) &&\n      this._isCenterDefined(nextProps.center)\n    ) {\n      setTimeout(() => this._initMap(), 0);\n    }\n\n    if (this.map_) {\n      const centerLatLng = this.geoService_.getCenter();\n      if (this._isCenterDefined(nextProps.center)) {\n        const nextPropsCenter = latLng2Obj(nextProps.center);\n        const currCenter = this._isCenterDefined(this.props.center)\n          ? latLng2Obj(this.props.center)\n          : null;\n\n        if (\n          !currCenter ||\n          Math.abs(nextPropsCenter.lat - currCenter.lat) +\n            Math.abs(nextPropsCenter.lng - currCenter.lng) >\n            kEPS\n        ) {\n          if (\n            Math.abs(nextPropsCenter.lat - centerLatLng.lat) +\n              Math.abs(nextPropsCenter.lng - centerLatLng.lng) >\n            kEPS\n          ) {\n            this.map_.panTo({\n              lat: nextPropsCenter.lat,\n              lng: nextPropsCenter.lng,\n            });\n          }\n        }\n      }\n\n      if (!isEmpty(nextProps.zoom)) {\n        // if zoom chaged by user\n        if (Math.abs(nextProps.zoom - this.props.zoom) > 0) {\n          this.map_.setZoom(nextProps.zoom);\n        }\n      }\n\n      if (!isEmpty(this.props.draggable) && isEmpty(nextProps.draggable)) {\n        // reset to default\n        this.map_.setOptions({ draggable: this.defaultDraggableOption_ });\n      } else if (!shallowEqual(this.props.draggable, nextProps.draggable)) {\n        // also prevent this on window 'mousedown' event to prevent map move\n        this.map_.setOptions({ draggable: nextProps.draggable });\n      }\n\n      // use shallowEqual to try avoid calling map._setOptions if only the ref changes\n      if (\n        !isEmpty(nextProps.options) &&\n        !shallowEqual(this.props.options, nextProps.options)\n      ) {\n        const mapPlainObjects = pick(this.maps_, isPlainObject);\n        let options =\n          typeof nextProps.options === 'function'\n            ? nextProps.options(mapPlainObjects)\n            : nextProps.options;\n        // remove zoom, center and draggable options as these are managed by google-maps-react\n        options = omit(options, ['zoom', 'center', 'draggable']);\n\n        if ('minZoom' in options) {\n          const minZoom = this._computeMinZoom(options.minZoom);\n          options.minZoom = _checkMinZoom(options.minZoom, minZoom);\n        }\n\n        this.map_.setOptions(options);\n      }\n\n      if (!shallowEqual(nextProps.layerTypes, this.props.layerTypes)) {\n        Object.keys(this.layers_).forEach((layerKey) => {\n          this.layers_[layerKey].setMap(null);\n          delete this.layers_[layerKey];\n        });\n        this._setLayers(nextProps.layerTypes);\n      }\n\n      if (\n        this.heatmap &&\n        !shallowEqual(nextProps.heatmap.positions, this.props.heatmap.positions)\n      ) {\n        this.heatmap.setData(\n          nextProps.heatmap.positions.map((p) => ({\n            location: new this.maps_.LatLng(p.lat, p.lng),\n            weight: p.weight,\n          }))\n        );\n      }\n      if (\n        this.heatmap &&\n        !shallowEqual(nextProps.heatmap.options, this.props.heatmap.options)\n      ) {\n        Object.keys(nextProps.heatmap.options).forEach((option) => {\n          this.heatmap.set(option, nextProps.heatmap.options[option]);\n        });\n      }\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    // draggable does not affect inner components\n    return (\n      !shallowEqual(\n        omit(this.props, ['draggable']),\n        omit(nextProps, ['draggable'])\n      ) || !shallowEqual(this.state, nextState)\n    );\n  }\n\n  componentDidUpdate(prevProps) {\n    this.markersDispatcher_.emit('kON_CHANGE');\n\n    if (!shallowEqual(this.props.hoverDistance, prevProps.hoverDistance)) {\n      this.markersDispatcher_.emit('kON_MOUSE_POSITION_CHANGE');\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted_ = false;\n    const mapDom = ReactDOM.findDOMNode(this.googleMapDom_);\n    if (mapDom) {\n      mapDom.removeEventListener('mousedown', this._onMapMouseDownNative, true);\n    }\n    window.removeEventListener('resize', this._onWindowResize);\n    window.removeEventListener('keydown', this._onKeyDownCapture);\n    window.removeEventListener('mouseup', this._onChildMouseUp, false);\n    if (this.props.resetBoundsOnResize) {\n      removeResizeListener(mapDom, this._mapDomResizeCallback);\n    }\n\n    if (this.overlay_) {\n      // this triggers overlay_.onRemove(), which will unmount the <GoogleMapMarkers/>\n      this.overlay_.setMap(null);\n    }\n\n    if (this.maps_ && this.map_ && this.props.shouldUnregisterMapOnUnmount) {\n      // fix google, as otherwise listeners works even without map\n      this.map_.setOptions({ scrollwheel: false });\n      this.maps_.event.clearInstanceListeners(this.map_);\n    }\n\n    if (this.props.shouldUnregisterMapOnUnmount) {\n      this.map_ = null;\n      this.maps_ = null;\n    }\n    this.markersDispatcher_.dispose();\n\n    this.resetSizeOnIdle_ = false;\n\n    if (this.props.shouldUnregisterMapOnUnmount) {\n      delete this.map_;\n      delete this.markersDispatcher_;\n    }\n  }\n\n  // calc minZoom if map size available\n  // it's better to not set minZoom less than this calculation gives\n  // otherwise there is no homeomorphism between screen coordinates and map\n  // (one map coordinate can have different screen coordinates)\n  _getMinZoom = () => {\n    if (this.geoService_.getWidth() > 0 || this.geoService_.getHeight() > 0) {\n      const tilesPerWidth =\n        Math.ceil(this.geoService_.getWidth() / K_GOOGLE_TILE_SIZE) + 2;\n      const tilesPerHeight =\n        Math.ceil(this.geoService_.getHeight() / K_GOOGLE_TILE_SIZE) + 2;\n      const maxTilesPerDim = Math.max(tilesPerWidth, tilesPerHeight);\n      return Math.ceil(log2(maxTilesPerDim));\n    }\n    return DEFAULT_MIN_ZOOM;\n  };\n\n  _computeMinZoom = (minZoom) => {\n    if (!isEmpty(minZoom)) {\n      return minZoom;\n    }\n    return this._getMinZoom();\n  };\n\n  _mapDomResizeCallback = () => {\n    this.resetSizeOnIdle_ = true;\n    if (this.maps_) {\n      const originalCenter = this.props.center || this.props.defaultCenter;\n      const currentCenter = this.map_.getCenter();\n      this.maps_.event.trigger(this.map_, 'resize');\n      this.map_.setCenter(\n        this.props.resetBoundsOnResize ? originalCenter : currentCenter\n      );\n    }\n  };\n\n  _setLayers = (layerTypes) => {\n    layerTypes.forEach((layerType) => {\n      this.layers_[layerType] = new this.maps_[layerType]();\n      this.layers_[layerType].setMap(this.map_);\n    });\n  };\n\n  _renderPortal = () => (\n    <GoogleMapMarkers\n      experimental={this.props.experimental}\n      onChildClick={this._onChildClick}\n      onChildMouseDown={this._onChildMouseDown}\n      onChildMouseEnter={this._onChildMouseEnter}\n      onChildMouseLeave={this._onChildMouseLeave}\n      geoService={this.geoService_}\n      insideMapPanes\n      distanceToMouse={this.props.distanceToMouse}\n      getHoverDistance={this._getHoverDistance}\n      dispatcher={this.markersDispatcher_}\n    />\n  );\n\n  _initMap = () => {\n    // only initialize the map once\n    if (this.initialized_) {\n      return;\n    }\n    this.initialized_ = true;\n\n    const propsCenter = latLng2Obj(\n      this.props.center || this.props.defaultCenter\n    );\n    this.geoService_.setView(\n      propsCenter,\n      this.props.zoom || this.props.defaultZoom,\n      0\n    );\n\n    this._onBoundsChanged(); // now we can calculate map bounds center etc...\n\n    const bootstrapURLKeys = {\n      ...(this.props.apiKey && { key: this.props.apiKey }),\n      ...this.props.bootstrapURLKeys,\n    };\n\n    this.props\n      .googleMapLoader(bootstrapURLKeys, this.props.heatmapLibrary)\n      .then((maps) => {\n        if (!this.mounted_) {\n          return;\n        }\n\n        const centerLatLng = this.geoService_.getCenter();\n\n        const propsOptions = {\n          zoom: this.props.zoom || this.props.defaultZoom,\n          center: new maps.LatLng(centerLatLng.lat, centerLatLng.lng),\n        };\n\n        // Start Heatmap\n        if (this.props.heatmap.positions) {\n          Object.assign(this, {\n            heatmap: generateHeatmap(maps, this.props.heatmap),\n          });\n          optionsHeatmap(this.heatmap, this.props.heatmap);\n        }\n        // End Heatmap\n\n        // prevent to exapose full api\n        // next props must be exposed (console.log(Object.keys(pick(maps, isPlainObject))))\n        // \"Animation\", \"ControlPosition\", \"MapTypeControlStyle\", \"MapTypeId\",\n        // \"NavigationControlStyle\", \"ScaleControlStyle\", \"StrokePosition\",\n        // \"SymbolPath\", \"ZoomControlStyle\",\n        // \"event\", \"DirectionsStatus\", \"DirectionsTravelMode\", \"DirectionsUnitSystem\",\n        // \"DistanceMatrixStatus\",\n        // \"DistanceMatrixElementStatus\", \"ElevationStatus\", \"GeocoderLocationType\",\n        // \"GeocoderStatus\", \"KmlLayerStatus\",\n        // \"MaxZoomStatus\", \"StreetViewStatus\", \"TransitMode\", \"TransitRoutePreference\",\n        // \"TravelMode\", \"UnitSystem\"\n        const mapPlainObjects = pick(maps, isPlainObject);\n        const options =\n          typeof this.props.options === 'function'\n            ? this.props.options(mapPlainObjects)\n            : this.props.options;\n        const defaultOptions = defaultOptions_(mapPlainObjects);\n\n        const draggableOptions = !isEmpty(this.props.draggable) && {\n          draggable: this.props.draggable,\n        };\n\n        const minZoom = this._computeMinZoom(options.minZoom);\n        this.minZoom_ = minZoom;\n\n        const preMapOptions = {\n          ...defaultOptions,\n          minZoom,\n          ...options,\n          ...propsOptions,\n        };\n\n        this.defaultDraggableOption_ = !isEmpty(preMapOptions.draggable)\n          ? preMapOptions.draggable\n          : this.defaultDraggableOption_;\n\n        const mapOptions = {\n          ...preMapOptions,\n          ...draggableOptions,\n        };\n\n        mapOptions.minZoom = _checkMinZoom(mapOptions.minZoom, minZoom);\n\n        const map = new maps.Map(\n          ReactDOM.findDOMNode(this.googleMapDom_),\n          mapOptions\n        );\n\n        this.map_ = map;\n        this.maps_ = maps;\n\n        this._setLayers(this.props.layerTypes);\n\n        // Parse `google.maps.version` to capture the major version number.\n        const versionMatch = maps.version.match(/^3\\.(\\d+)\\./);\n        // The major version is the first (and only) captured group.\n        const mapsVersion = versionMatch && Number(versionMatch[1]);\n\n        // render in overlay\n        const this_ = this;\n        const overlay = Object.assign(new maps.OverlayView(), {\n          onAdd() {\n            const K_MAX_WIDTH =\n              typeof screen !== 'undefined' ? `${screen.width}px` : '2000px';\n            const K_MAX_HEIGHT =\n              typeof screen !== 'undefined' ? `${screen.height}px` : '2000px';\n\n            const div = document.createElement('div');\n            div.style.backgroundColor = 'transparent';\n            div.style.position = 'absolute';\n            div.style.left = '0px';\n            div.style.top = '0px';\n            div.style.width = K_MAX_WIDTH; // prevents some chrome draw defects\n            div.style.height = K_MAX_HEIGHT;\n\n            if (this_.props.overlayViewDivStyle) {\n              const { overlayViewDivStyle } = this_.props;\n              if (typeof overlayViewDivStyle === 'object') {\n                Object.keys(overlayViewDivStyle).forEach((property) => {\n                  div.style[property] = overlayViewDivStyle[property];\n                });\n              }\n            }\n\n            const panes = this.getPanes();\n            panes.overlayMouseTarget.appendChild(div);\n            this_.geoService_.setMapCanvasProjection(\n              maps,\n              overlay.getProjection()\n            );\n\n            if (!IS_REACT_16) {\n              createPortal(\n                this_,\n                this_._renderPortal(),\n                div,\n                // remove prerendered markers\n                () => this_.setState({ overlay: div })\n              );\n            } else {\n              this_.setState({ overlay: div });\n            }\n          },\n\n          onRemove() {\n            const renderedOverlay = this_.state.overlay;\n            if (renderedOverlay && !IS_REACT_16) {\n              ReactDOM.unmountComponentAtNode(renderedOverlay);\n            }\n            this_.setState({ overlay: null });\n          },\n\n          draw() {\n            this_.updateCounter_++;\n            this_._onBoundsChanged(map, maps, !this_.props.debounced);\n\n            if (!this_.googleApiLoadedCalled_) {\n              this_._onGoogleApiLoaded({ map, maps, ref: this_.googleMapDom_ });\n              this_.googleApiLoadedCalled_ = true;\n            }\n\n            if (this_.mouse_) {\n              const latLng = this_.geoService_.fromContainerPixelToLatLng(\n                this_.mouse_\n              );\n              this_.mouse_.lat = latLng.lat;\n              this_.mouse_.lng = latLng.lng;\n            }\n\n            this_._onChildMouseMove();\n\n            if (this_.markersDispatcher_) {\n              this_.markersDispatcher_.emit('kON_CHANGE');\n              if (this_.fireMouseEventOnIdle_) {\n                this_.markersDispatcher_.emit('kON_MOUSE_POSITION_CHANGE');\n              }\n            }\n          },\n        });\n\n        this.overlay_ = overlay;\n\n        overlay.setMap(map);\n        if (this.props.heatmap.positions) {\n          this.heatmap.setMap(map);\n        }\n\n        if (this.props.onTilesLoaded) {\n          maps.event.addListener(map, 'tilesloaded', () => {\n            this_._onTilesLoaded();\n          });\n        }\n\n        maps.event.addListener(map, 'zoom_changed', () => {\n          // recalc position at zoom start\n          if (this_.geoService_.getZoom() !== map.getZoom()) {\n            if (!this_.zoomAnimationInProgress_) {\n              this_.zoomAnimationInProgress_ = true;\n              this_._onZoomAnimationStart(map.zoom);\n            }\n\n            // If draw() is not called each frame during a zoom animation,\n            // simulate it.\n            if (mapsVersion < DRAW_CALLED_DURING_ANIMATION_VERSION) {\n              const TIMEOUT_ZOOM = 300;\n\n              if (\n                new Date().getTime() - this.zoomControlClickTime_ <\n                TIMEOUT_ZOOM\n              ) {\n                // there is strange Google Map Api behavior in chrome when zoom animation of map\n                // is started only on second raf call, if was click on zoom control\n                // or +- keys pressed, so i wait for two rafs before change state\n\n                // this does not fully prevent animation jump\n                // but reduce it's occurence probability\n                raf(() =>\n                  raf(() => {\n                    this_.updateCounter_++;\n                    this_._onBoundsChanged(map, maps);\n                  })\n                );\n              } else {\n                this_.updateCounter_++;\n                this_._onBoundsChanged(map, maps);\n              }\n            }\n          }\n        });\n\n        maps.event.addListener(map, 'idle', () => {\n          if (this.resetSizeOnIdle_) {\n            this._setViewSize();\n            const currMinZoom = this._computeMinZoom(options.minZoom);\n\n            if (currMinZoom !== this.minZoom_) {\n              this.minZoom_ = currMinZoom;\n              map.setOptions({ minZoom: currMinZoom });\n            }\n\n            this.resetSizeOnIdle_ = false;\n          }\n\n          if (this_.zoomAnimationInProgress_) {\n            this_.zoomAnimationInProgress_ = false;\n            this_._onZoomAnimationEnd(map.zoom);\n          }\n\n          this_.updateCounter_++;\n          this_._onBoundsChanged(map, maps);\n\n          this_.dragTime_ = 0;\n\n          if (this_.markersDispatcher_) {\n            this_.markersDispatcher_.emit('kON_CHANGE');\n          }\n        });\n\n        maps.event.addListener(map, 'mouseover', () => {\n          // has advantage over div MouseLeave\n          this_.mouseInMap_ = true;\n        });\n\n        // an alternative way to know the mouse is back within the map\n        // This would not fire when clicking/interacting with google maps\n        // own on-map countrols+markers. This handles an edge case for touch devices\n        // + 'draggable:false' custom option. See #332 for more details.\n        maps.event.addListener(map, 'click', () => {\n          this_.mouseInMap_ = true;\n        });\n\n        maps.event.addListener(map, 'mouseout', () => {\n          // has advantage over div MouseLeave\n          this_.mouseInMap_ = false;\n          this_.mouse_ = null;\n          this_.markersDispatcher_.emit('kON_MOUSE_POSITION_CHANGE');\n        });\n\n        maps.event.addListener(map, 'drag', () => {\n          this_.dragTime_ = new Date().getTime();\n          this_._onDrag(map);\n        });\n\n        maps.event.addListener(map, 'dragend', () => {\n          // 'dragend' fires on mouse release.\n          // 'idle' listener waits until drag inertia ends before firing `onDragEnd`\n          const idleListener = maps.event.addListener(map, 'idle', () => {\n            maps.event.removeListener(idleListener);\n            this_._onDragEnd(map);\n          });\n        });\n        // user choosing satellite vs roads, etc\n        maps.event.addListener(map, 'maptypeid_changed', () => {\n          this_._onMapTypeIdChange(map.getMapTypeId());\n        });\n      })\n      .catch((e) => {\n        // notify callback of load failure\n        this._onGoogleApiLoaded({\n          map: null,\n          maps: null,\n          ref: this.googleMapDom_,\n        });\n        console.error(e); // eslint-disable-line no-console\n        throw e;\n      });\n  };\n\n  _onGoogleApiLoaded = (...args) => {\n    if (this.props.onGoogleApiLoaded) {\n      if (\n        process.env.NODE_ENV !== 'production' &&\n        this.props.yesIWantToUseGoogleMapApiInternals !== true\n      ) {\n        console.warn(\n          'GoogleMap: ' + // eslint-disable-line\n            'Usage of internal api objects is dangerous ' +\n            'and can cause a lot of issues.\\n' +\n            'To hide this warning add yesIWantToUseGoogleMapApiInternals={true} ' +\n            'to <GoogleMap instance'\n        );\n      }\n\n      this.props.onGoogleApiLoaded(...args);\n    }\n  };\n\n  _getHoverDistance = () => this.props.hoverDistance;\n\n  _onDrag = (...args) => this.props.onDrag && this.props.onDrag(...args);\n\n  _onDragEnd = (...args) =>\n    this.props.onDragEnd && this.props.onDragEnd(...args);\n\n  _onMapTypeIdChange = (...args) =>\n    this.props.onMapTypeIdChange && this.props.onMapTypeIdChange(...args);\n\n  _onZoomAnimationStart = (...args) =>\n    this.props.onZoomAnimationStart && this.props.onZoomAnimationStart(...args);\n\n  _onZoomAnimationEnd = (...args) =>\n    this.props.onZoomAnimationEnd && this.props.onZoomAnimationEnd(...args);\n\n  _onTilesLoaded = () => this.props.onTilesLoaded && this.props.onTilesLoaded();\n\n  _onChildClick = (...args) => {\n    if (this.props.onChildClick) {\n      return this.props.onChildClick(...args);\n    }\n    return undefined;\n  };\n\n  _onChildMouseDown = (hoverKey, childProps) => {\n    this.childMouseDownArgs_ = [hoverKey, childProps];\n    if (this.props.onChildMouseDown) {\n      this.props.onChildMouseDown(hoverKey, childProps, { ...this.mouse_ });\n    }\n  };\n\n  // this method works only if this.props.onChildMouseDown was called\n  _onChildMouseUp = () => {\n    if (this.childMouseDownArgs_) {\n      if (this.props.onChildMouseUp) {\n        this.props.onChildMouseUp(...this.childMouseDownArgs_, {\n          ...this.mouse_,\n        });\n      }\n      this.childMouseDownArgs_ = null;\n      this.childMouseUpTime_ = new Date().getTime();\n    }\n  };\n\n  // this method works only if this.props.onChildMouseDown was called\n  _onChildMouseMove = () => {\n    if (this.childMouseDownArgs_) {\n      if (this.props.onChildMouseMove) {\n        this.props.onChildMouseMove(...this.childMouseDownArgs_, {\n          ...this.mouse_,\n        });\n      }\n    }\n  };\n\n  _onChildMouseEnter = (...args) => {\n    if (this.props.onChildMouseEnter) {\n      return this.props.onChildMouseEnter(...args);\n    }\n    return undefined;\n  };\n\n  _onChildMouseLeave = (...args) => {\n    if (this.props.onChildMouseLeave) {\n      return this.props.onChildMouseLeave(...args);\n    }\n    return undefined;\n  };\n\n  _setViewSize = () => {\n    if (!this.mounted_) return;\n    if (isFullScreen()) {\n      this.geoService_.setViewSize(window.innerWidth, window.innerHeight);\n    } else {\n      const mapDom = ReactDOM.findDOMNode(this.googleMapDom_);\n      this.geoService_.setViewSize(mapDom.clientWidth, mapDom.clientHeight);\n    }\n    this._onBoundsChanged();\n  };\n\n  _onWindowResize = () => {\n    this.resetSizeOnIdle_ = true;\n  };\n\n  _onMapMouseMove = (e) => {\n    if (!this.mouseInMap_) return;\n\n    const currTime = new Date().getTime();\n    const K_RECALC_CLIENT_RECT_MS = 50;\n\n    if (currTime - this.mouseMoveTime_ > K_RECALC_CLIENT_RECT_MS) {\n      this.boundingRect_ = e.currentTarget.getBoundingClientRect();\n    }\n    this.mouseMoveTime_ = currTime;\n\n    const mousePosX = e.clientX - this.boundingRect_.left;\n    const mousePosY = e.clientY - this.boundingRect_.top;\n\n    if (!this.mouse_) {\n      this.mouse_ = { x: 0, y: 0, lat: 0, lng: 0 };\n    }\n\n    this.mouse_.x = mousePosX;\n    this.mouse_.y = mousePosY;\n\n    const latLng = this.geoService_.fromContainerPixelToLatLng(this.mouse_);\n    this.mouse_.lat = latLng.lat;\n    this.mouse_.lng = latLng.lng;\n\n    this._onChildMouseMove();\n\n    if (currTime - this.dragTime_ < K_IDLE_TIMEOUT) {\n      this.fireMouseEventOnIdle_ = true;\n    } else {\n      this.markersDispatcher_.emit('kON_MOUSE_POSITION_CHANGE');\n      this.fireMouseEventOnIdle_ = false;\n    }\n  };\n\n  // K_IDLE_CLICK_TIMEOUT - looks like 300 is enough\n  _onClick = (...args) =>\n    this.props.onClick &&\n    !this.childMouseDownArgs_ &&\n    new Date().getTime() - this.childMouseUpTime_ > K_IDLE_CLICK_TIMEOUT &&\n    this.dragTime_ === 0 &&\n    this.props.onClick(...args);\n\n  _onMapClick = (event) => {\n    if (this.markersDispatcher_) {\n      // support touch events and recalculate mouse position on click\n      this._onMapMouseMove(event);\n      const currTime = new Date().getTime();\n      if (currTime - this.dragTime_ > K_IDLE_TIMEOUT) {\n        if (this.mouse_) {\n          this._onClick({\n            ...this.mouse_,\n            event,\n          });\n        }\n\n        this.markersDispatcher_.emit('kON_CLICK', event);\n      }\n    }\n  };\n\n  // gmap can't prevent map drag if mousedown event already occured\n  // the only workaround I find is prevent mousedown native browser event\n  _onMapMouseDownNative = (event) => {\n    if (!this.mouseInMap_) return;\n\n    this._onMapMouseDown(event);\n  };\n\n  _onMapMouseDown = (event) => {\n    if (this.markersDispatcher_) {\n      const currTime = new Date().getTime();\n      if (currTime - this.dragTime_ > K_IDLE_TIMEOUT) {\n        // Hovered marker detected at mouse move could be deleted at mouse down time\n        // so it will be good to force hovered marker recalculation\n        this._onMapMouseMove(event);\n        this.markersDispatcher_.emit('kON_MDOWN', event);\n      }\n    }\n  };\n\n  _onMapMouseDownCapture = () => {\n    if (detectBrowser().isChrome) {\n      // to fix strange zoom in chrome\n      this.zoomControlClickTime_ = new Date().getTime();\n    }\n  };\n\n  _onKeyDownCapture = () => {\n    if (detectBrowser().isChrome) {\n      this.zoomControlClickTime_ = new Date().getTime();\n    }\n  };\n\n  _isCenterDefined = (center) =>\n    center &&\n    ((isPlainObject(center) && isNumber(center.lat) && isNumber(center.lng)) ||\n      (center.length === 2 && isNumber(center[0]) && isNumber(center[1])));\n\n  _onBoundsChanged = (map, maps, callExtBoundsChange) => {\n    if (map) {\n      const gmC = map.getCenter();\n      this.geoService_.setView([gmC.lat(), gmC.lng()], map.getZoom(), 0);\n    }\n\n    if (\n      (this.props.onChange || this.props.onBoundsChange) &&\n      this.geoService_.canProject()\n    ) {\n      const zoom = this.geoService_.getZoom();\n      const bounds = this.geoService_.getBounds();\n      const centerLatLng = this.geoService_.getCenter();\n\n      if (!isArraysEqualEps(bounds, this.prevBounds_, kEPS)) {\n        if (callExtBoundsChange !== false) {\n          const marginBounds = this.geoService_.getBounds(this.props.margin);\n          if (this.props.onBoundsChange) {\n            this.props.onBoundsChange(\n              this.centerIsObject_\n                ? { ...centerLatLng }\n                : [centerLatLng.lat, centerLatLng.lng],\n              zoom,\n              bounds,\n              marginBounds\n            );\n          }\n\n          if (this.props.onChange) {\n            this.props.onChange({\n              center: { ...centerLatLng },\n              zoom,\n              bounds: {\n                nw: {\n                  lat: bounds[0],\n                  lng: bounds[1],\n                },\n                se: {\n                  lat: bounds[2],\n                  lng: bounds[3],\n                },\n                sw: {\n                  lat: bounds[4],\n                  lng: bounds[5],\n                },\n                ne: {\n                  lat: bounds[6],\n                  lng: bounds[7],\n                },\n              },\n              marginBounds: {\n                nw: {\n                  lat: marginBounds[0],\n                  lng: marginBounds[1],\n                },\n                se: {\n                  lat: marginBounds[2],\n                  lng: marginBounds[3],\n                },\n                sw: {\n                  lat: marginBounds[4],\n                  lng: marginBounds[5],\n                },\n                ne: {\n                  lat: marginBounds[6],\n                  lng: marginBounds[7],\n                },\n              },\n\n              size: this.geoService_.hasSize()\n                ? {\n                    width: this.geoService_.getWidth(),\n                    height: this.geoService_.getHeight(),\n                  }\n                : {\n                    width: 0,\n                    height: 0,\n                  },\n            });\n          }\n\n          this.prevBounds_ = bounds;\n        }\n      }\n    }\n  };\n\n  _registerChild = (ref) => {\n    this.googleMapDom_ = ref;\n  };\n\n  render() {\n    const overlay = this.state.overlay;\n    const mapMarkerPrerender = !overlay ? (\n      <GoogleMapMarkersPrerender\n        experimental={this.props.experimental}\n        onChildClick={this._onChildClick}\n        onChildMouseDown={this._onChildMouseDown}\n        onChildMouseEnter={this._onChildMouseEnter}\n        onChildMouseLeave={this._onChildMouseLeave}\n        geoService={this.geoService_}\n        insideMapPanes={false}\n        distanceToMouse={this.props.distanceToMouse}\n        getHoverDistance={this._getHoverDistance}\n        dispatcher={this.markersDispatcher_}\n      />\n    ) : null;\n\n    return (\n      <div\n        style={this.props.style}\n        onMouseMove={this._onMapMouseMove}\n        onMouseDownCapture={this._onMapMouseDownCapture}\n        onClick={this._onMapClick}\n      >\n        <GoogleMapMap registerChild={this._registerChild} />\n        {IS_REACT_16 && overlay && createPortal(this._renderPortal(), overlay)}\n\n        {/* render markers before map load done */}\n        {mapMarkerPrerender}\n      </div>\n    );\n  }\n}\n\nexport default GoogleMap;\n"]},"metadata":{},"sourceType":"module"}