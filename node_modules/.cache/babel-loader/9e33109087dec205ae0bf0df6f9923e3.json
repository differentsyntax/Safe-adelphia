{"ast":null,"code":"var _jsxFileName = \"/home/differentsyntax/GitHub/Safexel/src/App.js\";\nimport React, { Component } from 'react';\nimport GoogleMap from 'google-map-react';\nimport axios from 'axios';\nimport Pusher from 'pusher-js';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nconst mapStyles = {\n  width: '100%',\n  height: '100%'\n};\nconst markerStyle = {\n  height: '50px',\n  width: '50px',\n  marginTop: '-50px'\n};\nconst imgStyle = {\n  height: '100%'\n};\n\nconst Marker = ({\n  title\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  style: markerStyle,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 3\n  }\n}, /*#__PURE__*/React.createElement(\"img\", {\n  style: imgStyle,\n  src: \"https://res.cloudinary.com/og-tech/image/upload/s--OpSJXuvZ--/v1545236805/map-marker_hfipes.png\",\n  alt: title,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 5\n  }\n}), /*#__PURE__*/React.createElement(\"h3\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }\n}, title)); // class App extends Component {\n//   render() {\n//     return (\n//       <div >\n//         <GoogleMap\n//           style={mapStyles}\n//           bootstrapURLKeys={{ key: 'AIzaSyC1o_fhD9B-B9rOq0rY2-wrMwvUoq4y4jI' }}\n//           center={{ lat: 39.960401, lng: -75.187780 }} \n//           zoom={14}\n//         >\n//           <Marker\n//           title={'Current Location'}\n//           lat={39.960401}\n//           lng={-75.187780}\n//         >\n//           </Marker>\n//         </GoogleMap>\n//       </div>\n//     )\n//   }\n// }\n\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.notify = () => toast(`Users online : ${Object.keys(this.state.users_online).length}`, {\n      position: \"top-right\",\n      autoClose: 3000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      type: 'info'\n    });\n\n    this.state = {\n      center: {\n        lat: 39.960401,\n        lng: -75.187780\n      },\n      locations: {},\n      users_online: [],\n      current_user: ''\n    };\n  }\n\n  componentDidMount() {\n    let pusher = new Pusher('PUSHER_APP_KEY', {\n      authEndpoint: \"http://localhost:3128/pusher/auth\",\n      cluster: \"mt1\"\n    });\n    this.presenceChannel = pusher.subscribe('presence-channel');\n    this.presenceChannel.bind('pusher:subscription_succeeded', members => {\n      this.setState({\n        users_online: members.members,\n        current_user: members.myID\n      });\n      this.getLocation();\n      this.notify();\n    });\n    this.presenceChannel.bind('location-update', body => {\n      this.setState((prevState, props) => {\n        const newState = { ...prevState\n        };\n        newState.locations[`${body.username}`] = body.location;\n        return newState;\n      });\n    });\n    this.presenceChannel.bind('pusher:member_removed', member => {\n      this.setState((prevState, props) => {\n        const newState = { ...prevState\n        }; // remove member location once they go offline\n\n        delete newState.locations[`${member.id}`]; // delete member from the list of online users\n\n        delete newState.users_online[`${member.id}`];\n        return newState;\n      });\n      this.notify();\n    });\n    this.presenceChannel.bind('pusher:member_added', member => {\n      this.notify();\n    });\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/differentsyntax/GitHub/Safexel/src/App.js"],"names":["React","Component","GoogleMap","axios","Pusher","ToastContainer","toast","mapStyles","width","height","markerStyle","marginTop","imgStyle","Marker","title","App","constructor","props","notify","Object","keys","state","users_online","length","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","type","center","lat","lng","locations","current_user","componentDidMount","pusher","authEndpoint","cluster","presenceChannel","subscribe","bind","members","setState","myID","getLocation","body","prevState","newState","username","location","member","id"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,kBAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,SAASC,cAAT,EAAyBC,KAAzB,QAAsC,gBAAtC;AACA,OAAO,uCAAP;AAEA,MAAMC,SAAS,GAAG;AAChBC,EAAAA,KAAK,EAAE,MADS;AAEhBC,EAAAA,MAAM,EAAE;AAFQ,CAAlB;AAKA,MAAMC,WAAW,GAAG;AAClBD,EAAAA,MAAM,EAAE,MADU;AAElBD,EAAAA,KAAK,EAAE,MAFW;AAGlBG,EAAAA,SAAS,EAAE;AAHO,CAApB;AAMA,MAAMC,QAAQ,GAAG;AACfH,EAAAA,MAAM,EAAE;AADO,CAAjB;;AAKA,MAAMI,MAAM,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,kBACb;AAAK,EAAA,KAAK,EAAEJ,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACE;AAAK,EAAA,KAAK,EAAEE,QAAZ;AAAsB,EAAA,GAAG,EAAC,iGAA1B;AAA4H,EAAA,GAAG,EAAEE,KAAjI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAKA,KAAL,CAFF,CADF,C,CAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,MAAMC,GAAN,SAAkBd,SAAlB,CAA4B;AAE1Be,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAiDnBC,MAjDmB,GAiDV,MAAMZ,KAAK,CAAE,kBAAiBa,MAAM,CAACC,IAAP,CAAY,KAAKC,KAAL,CAAWC,YAAvB,EAAqCC,MAAO,EAA/D,EAAkE;AACpFC,MAAAA,QAAQ,EAAE,WAD0E;AAEpFC,MAAAA,SAAS,EAAE,IAFyE;AAGpFC,MAAAA,eAAe,EAAE,KAHmE;AAIpFC,MAAAA,YAAY,EAAE,IAJsE;AAKpFC,MAAAA,YAAY,EAAE,IALsE;AAMpFC,MAAAA,SAAS,EAAE,IANyE;AAOpFC,MAAAA,IAAI,EAAE;AAP8E,KAAlE,CAjDD;;AAEjB,SAAKT,KAAL,GAAa;AACXU,MAAAA,MAAM,EAAE;AAAEC,QAAAA,GAAG,EAAE,SAAP;AAAkBC,QAAAA,GAAG,EAAE,CAAC;AAAxB,OADG;AAEXC,MAAAA,SAAS,EAAE,EAFA;AAGXZ,MAAAA,YAAY,EAAE,EAHH;AAIXa,MAAAA,YAAY,EAAE;AAJH,KAAb;AAMD;;AACDC,EAAAA,iBAAiB,GAAG;AAClB,QAAIC,MAAM,GAAG,IAAIjC,MAAJ,CAAW,gBAAX,EAA6B;AACxCkC,MAAAA,YAAY,EAAE,mCAD0B;AAExCC,MAAAA,OAAO,EAAE;AAF+B,KAA7B,CAAb;AAIA,SAAKC,eAAL,GAAuBH,MAAM,CAACI,SAAP,CAAiB,kBAAjB,CAAvB;AAEA,SAAKD,eAAL,CAAqBE,IAArB,CAA0B,+BAA1B,EAA2DC,OAAO,IAAI;AACpE,WAAKC,QAAL,CAAc;AACZtB,QAAAA,YAAY,EAAEqB,OAAO,CAACA,OADV;AAEZR,QAAAA,YAAY,EAAEQ,OAAO,CAACE;AAFV,OAAd;AAIA,WAAKC,WAAL;AACA,WAAK5B,MAAL;AACD,KAPD;AASA,SAAKsB,eAAL,CAAqBE,IAArB,CAA0B,iBAA1B,EAA6CK,IAAI,IAAI;AACnD,WAAKH,QAAL,CAAc,CAACI,SAAD,EAAY/B,KAAZ,KAAsB;AAClC,cAAMgC,QAAQ,GAAG,EAAE,GAAGD;AAAL,SAAjB;AACAC,QAAAA,QAAQ,CAACf,SAAT,CAAoB,GAAEa,IAAI,CAACG,QAAS,EAApC,IAAyCH,IAAI,CAACI,QAA9C;AACA,eAAOF,QAAP;AACD,OAJD;AAKD,KAND;AAQA,SAAKT,eAAL,CAAqBE,IAArB,CAA0B,uBAA1B,EAAmDU,MAAM,IAAI;AAC3D,WAAKR,QAAL,CAAc,CAACI,SAAD,EAAY/B,KAAZ,KAAsB;AAClC,cAAMgC,QAAQ,GAAG,EAAE,GAAGD;AAAL,SAAjB,CADkC,CAElC;;AACA,eAAOC,QAAQ,CAACf,SAAT,CAAoB,GAAEkB,MAAM,CAACC,EAAG,EAAhC,CAAP,CAHkC,CAIlC;;AACA,eAAOJ,QAAQ,CAAC3B,YAAT,CAAuB,GAAE8B,MAAM,CAACC,EAAG,EAAnC,CAAP;AACA,eAAOJ,QAAP;AACD,OAPD;AAQA,WAAK/B,MAAL;AACD,KAVD;AAYA,SAAKsB,eAAL,CAAqBE,IAArB,CAA0B,qBAA1B,EAAiDU,MAAM,IAAI;AACzD,WAAKlC,MAAL;AACD,KAFD;AAGD;;AAlDyB;;AA8D5B,eAAeH,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport GoogleMap from 'google-map-react';\nimport axios from 'axios';\nimport Pusher from 'pusher-js';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst mapStyles = {\n  width: '100%',\n  height: '100%'\n}\n\nconst markerStyle = {\n  height: '50px',\n  width: '50px',\n  marginTop: '-50px'\n}\n\nconst imgStyle = {\n  height: '100%'\n}\n\n\nconst Marker = ({ title }) => (\n  <div style={markerStyle}>\n    <img style={imgStyle} src=\"https://res.cloudinary.com/og-tech/image/upload/s--OpSJXuvZ--/v1545236805/map-marker_hfipes.png\" alt={title} />\n    <h3>{title}</h3>\n  </div>\n);\n\n// class App extends Component {\n//   render() {\n//     return (\n//       <div >\n//         <GoogleMap\n//           style={mapStyles}\n//           bootstrapURLKeys={{ key: 'AIzaSyC1o_fhD9B-B9rOq0rY2-wrMwvUoq4y4jI' }}\n//           center={{ lat: 39.960401, lng: -75.187780 }} \n//           zoom={14}\n//         >\n//           <Marker\n//           title={'Current Location'}\n//           lat={39.960401}\n//           lng={-75.187780}\n//         >\n//           </Marker>\n//         </GoogleMap>\n//       </div>\n//     )\n//   }\n// }\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      center: { lat: 39.960401, lng: -75.187780 },\n      locations: {},\n      users_online: [],\n      current_user: ''\n    }\n  }\n  componentDidMount() {\n    let pusher = new Pusher('PUSHER_APP_KEY', {\n      authEndpoint: \"http://localhost:3128/pusher/auth\",\n      cluster: \"mt1\"\n    })\n    this.presenceChannel = pusher.subscribe('presence-channel');\n\n    this.presenceChannel.bind('pusher:subscription_succeeded', members => {\n      this.setState({\n        users_online: members.members,\n        current_user: members.myID\n      });\n      this.getLocation();\n      this.notify();\n    })\n\n    this.presenceChannel.bind('location-update', body => {\n      this.setState((prevState, props) => {\n        const newState = { ...prevState }\n        newState.locations[`${body.username}`] = body.location;\n        return newState;\n      });\n    });\n\n    this.presenceChannel.bind('pusher:member_removed', member => {\n      this.setState((prevState, props) => {\n        const newState = { ...prevState };\n        // remove member location once they go offline\n        delete newState.locations[`${member.id}`];\n        // delete member from the list of online users\n        delete newState.users_online[`${member.id}`];\n        return newState;\n      })\n      this.notify()\n    })\n\n    this.presenceChannel.bind('pusher:member_added', member => {\n      this.notify();\n    })\n  }  \n  notify = () => toast(`Users online : ${Object.keys(this.state.users_online).length}`, {\n    position: \"top-right\",\n    autoClose: 3000,\n    hideProgressBar: false,\n    closeOnClick: true,\n    pauseOnHover: true,\n    draggable: true,\n    type: 'info'\n  });\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}